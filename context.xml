This file is a merged representation of a subset of the codebase, containing specifically included files, combined into a single document by Repomix.
The content has been processed where security check has been disabled.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of a subset of the repository's contents that is considered the most important context.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Only files matching these patterns are included: client/src/app/globals.css, client/src/app/photo/page.tsx, client/src/lib/forms/UserAddressForm.tsx, client/src/app/menu/page.tsx, client/src/lib/forms/EditProfileForm.tsx, client/src/lib/database.types.ts, client/src/lib/forms/ContactForm.tsx, client/src/app/menu/[Products]/[product]/page.tsx, client/src/app/privacy/page.tsx, admin/src/components/orders/OrdersBoard.tsx, client/src/app/terms/page.tsx, client/src/app/photo/placeholder-images.json, client/src/app/menu/[Products]/components/FilterSortBar.tsx, admin/public/next.svg, client/public/next.svg, admin/src/components/menu/ProductBoard.tsx, client/src/app/gallery/components/ImageGallery.tsx, client/src/app/contact/page.tsx, admin/src/components/menu/AddProductForm.tsx, client/src/app/api/seed/route.ts, client/src/lib/actions/auth.ts, client/supabase_migrations/seed_products.sql, client/src/app/menu/[Products]/[product]/components/ProductInfo.tsx, client/src/app/menu/[Products]/page.tsx, admin/src/lib/database.types.ts, client/src/app/menu/[Products]/components/LikesButton.tsx, client/src/lib/context/CartContext.tsx, client/src/lib/actions/profile.ts, client/src/app/menu/components/PromotionsBanner.tsx, client/src/app/profile/page.tsx, admin/src/lib/data/products-actions.ts, admin/src/lib/data/dashboard.ts, admin/public/globe.svg, client/public/globe.svg, client/src/app/menu/cart/components/CartFooter.tsx, admin/src/components/dashboard/RecentOrdersCard.tsx, client/src/app/terms/components/TermsContent.tsx, admin/src/components/auth/RegisterForm.tsx, admin/src/components/menu/QuickEditForm.tsx, client/src/lib/forms/CommentsForm.tsx, client/src/app/home-components/Testimonials.tsx, client/src/app/menu/[Products]/[product]/components/FavoriteButton.tsx, client/src/lib/forms/CartProductForm.tsx, client/src/app/menu/components/ProductCard.tsx, admin/src/lib/auth/actions.ts, client/src/app/menu/[Products]/components/CommentModal.tsx, client/src/app/menu/components/MenuSections.tsx, client/src/app/profile/components/Preferences.server.tsx, client/src/components/Navbar/ProfileMenu.tsx, client/src/app/menu/[Products]/[product]/components/comments.tsx, client/supabase_migrations/create_tables.sql, client/src/components/Navbar/DesktopNavbar.tsx, client/src/app/home-components/FeaturedItemsServices.tsx, client/src/app/menu/[Products]/components/CommentsButton.tsx, client/src/lib/supabase/orders/orders.ts, admin/src/components/dashboard/StatsGrid.tsx, client/src/components/ui/TextInput.tsx, admin/src/components/layout/AdminTopbar.tsx, client/src/components/Navbar/MobileMenu.tsx, client/src/app/gallery/components/ImageModal.tsx, admin/src/components/auth/LoginForm.tsx, client/src/components/ui/AddOnSelector.tsx, client/src/app/about/components/WhatMakesUsSpecial.tsx, client/src/app/home-components/TargetMarketCallout.tsx, client/src/app/menu/[Products]/[product]/components/RelatedProducts.tsx, client/src/lib/forms/RegisterForm.tsx, admin/src/components/orders/UpdateOrderStatusForm.tsx, client/supabase_migrations/update_profiles_schema.sql, client/src/app/about/components/KeyLeadership.tsx, client/src/components/ui/Button.tsx, client/src/app/orders/[State]/page.tsx, admin/src/lib/auth/session.ts, client/src/app/profile/components/AccountManagement.server.tsx, client/package.json, client/src/app/profile/components/PersonalInformation.tsx, client/src/proxy.ts, client/src/components/ui/Icon.tsx, client/src/app/about/components/MilestonesAndVision.tsx, client/src/app/about/components/CompanyDescription.tsx, admin/src/lib/data/orders-actions.ts, client/src/components/ui/TimeSlotPicker.tsx, client/src/app/menu/components/SpecialOffers.tsx, client/src/app/home-components/KeyDifferentiators.tsx, client/src/components/Navbar/MobileNavbar.tsx, client/src/components/ui/Avatar.tsx, client/src/app/about/components/KeyHighlights.tsx, client/src/app/menu/components/ProductDetails.tsx, client/src/app/contact/components/MapEmbed.tsx, client/src/app/menu/components/CategoryCard.tsx, client/README.md, client/src/components/ui/layout/FormField.tsx, client/src/lib/forms/LoginForm.tsx, client/src/app/menu/components/SearchBar.tsx, client/src/app/orders/layout.tsx, admin/src/lib/types/users.ts, client/src/app/menu/[Products]/components/SocialButtons.tsx, admin/proxy.ts, client/src/app/home-components/HeroSection.tsx, client/src/app/about/components/StrengthsAndOpportunities.tsx, admin/src/components/dashboard/LowInventoryCard.tsx, client/src/app/blog/components/BlogPostList.tsx, client/src/components/ui/layout/Section.tsx, client/src/lib/types/UserTypes.d.ts, admin/src/components/dashboard/RevenueTrendCard.tsx, client/src/app/contact/components/OperatingHours.tsx, client/src/lib/supabase/likes.ts, client/src/app/contact/components/ContactInfo.tsx, client/src/app/menu/[Products]/utils/likesUtils.ts, client/src/lib/supabase/products/products.ts, client/src/app/orders/page.tsx, client/src/components/Navbar/NavbarClient.tsx, admin/src/app/(dashboard)/settings/page.tsx, client/src/components/ui/Alert.tsx, admin/src/components/layout/SidebarNav.tsx, client/src/app/about/components/CoreValues.tsx, client/src/app/about/page.tsx, admin/src/app/(auth)/login/page.tsx, client/src/components/ui/Link.tsx, client/src/app/about/components/WeaknessesAndThreats.tsx, admin/public/file.svg, client/public/file.svg, admin/public/window.svg, client/public/window.svg, client/src/app/home-components/KeyHighlights.tsx, admin/src/components/layout/AdminSidebar.tsx, client/src/app/profile/components/ReferralCodeCopier.tsx, admin/src/lib/types/orders.ts, client/src/lib/supabase/favorites.ts, admin/README.md, admin/src/app/(dashboard)/dashboard/page.tsx, admin/package.json, client/src/app/menu/[Products]/[product]/components/AddtoCart.tsx, client/src/app/profile/components/LoyaltyProgramInfo.server.tsx, client/src/components/ui/Loading.tsx, client/src/app/layout.css, client/src/app/orders/components/OrderItem.tsx, admin/src/components/layout/nav-items.tsx, admin/src/components/layout/DashboardShell.tsx, client/src/app/profile/components/PaymentInformation.tsx, client/src/lib/utils/dateUtils.ts, client/tsconfig.json, client/src/lib/hooks/Cookies/setCookie.ts, client/src/lib/supabase/auth/useAuth.ts, admin/biome.json, client/biome.json, client/src/lib/supabase/orders.ts, client/src/components/ui/layout/Main.tsx, admin/tsconfig.json, client/src/app/menu/cart/page.tsx, client/src/lib/supabase/comments.ts, admin/src/lib/types/products.ts, client/src/lib/supabase/server.ts, admin/src/components/auth/AuthShell.tsx, client/src/components/Navbar/AuthButton.tsx, client/src/app/about/components/OurJourney.tsx, client/src/app/home-components/AboutUsSnippet.tsx, admin/src/lib/supabase/server.ts, admin/src/app/layout.tsx, client/src/app/menu/components/NoResults.tsx, client/src/app/about/components/OurCommitment.tsx, client/src/lib/types/CarWashTypes.d.ts, admin/src/app/(dashboard)/menu/page.tsx, admin/src/lib/data/orders.ts, client/src/lib/types/OrderTypes.d.ts, admin/src/app/(dashboard)/layout.tsx, client/src/app/page.tsx, admin/src/app/(auth)/register/page.tsx, admin/src/app/(dashboard)/support/page.tsx, admin/src/app/(auth)/layout.tsx, client/src/app/home-components/FinancialSnapshotTeaser.tsx, client/src/app/profile/components/AccountManagement.delete.client.tsx, admin/src/components/forms/SubmitButton.tsx, client/src/app/about/components/OurVision.tsx, client/src/components/Navbar/useMenubarToggle.ts, client/src/lib/types/ProductTypes.d.ts, admin/src/app/globals.css, admin/.gitignore, client/src/app/home-components/ContactSection.tsx, client/.gitignore, admin/src/lib/data/products.ts, client/src/app/menu/[Products]/[product]/comments/page.tsx, client/next.config.ts, client/src/app/layout.tsx, client/src/app/blog/page.tsx, admin/src/app/(dashboard)/products/page.tsx, admin/src/app/(dashboard)/orders/page.tsx, client/src/app/menu/layout.tsx, admin/src/components/menu/AddProductPanel.tsx, client/src/components/components.css, client/src/lib/hooks/Cookies/getdelete.ts, admin/src/lib/supabase/config.ts, client/src/app/privacy/components/PrivacyContent.tsx, client/src/lib/hooks/Cookies/setdelete.ts, client/public/robots.txt, client/src/app/gallery/page.tsx, admin/src/lib/supabase/client.ts, client/src/app/profile/components/LoyaltyProgramInfo.client.tsx, admin/src/lib/types/base.ts, client/src/components/Navbar/Navbar.tsx, client/src/lib/supabase/client.ts, client/src/app/profile/edit/page.tsx, client/src/app/profile/components/Preferences.client.tsx, admin/public/vercel.svg, client/public/vercel.svg, client/src/lib/supabase/auth/logout.ts, client/src/app/(auth)/register/page.tsx, client/src/app/(auth)/login/page.tsx, client/src/app/photo/placeholderImages.ts, client/src/lib/types/index.ts, client/src/lib/utils.ts, admin/src/lib/auth/index.ts, client/src/app/privacy/loading.tsx, admin/next.config.ts, client/src/app/about/loading.tsx, client/src/app/(auth)/login/loading.tsx, client/src/app/(auth)/register/loading.tsx, client/src/app/blog/loading.tsx, client/src/app/contact/loading.tsx, client/src/app/menu/[Products]/[product]/comments/loading.tsx, client/src/app/menu/[Products]/[product]/loading.tsx, client/src/app/profile/components/AccountManagement.tsx, client/src/app/loading.tsx, client/src/app/gallery/loading.tsx, client/src/app/menu/[Products]/loading.tsx, client/src/app/menu/cart/loading.tsx, client/src/app/menu/loading.tsx, client/src/app/profile/components/LoyaltyProgramInfo.tsx, client/src/app/profile/loading.tsx, client/src/app/terms/loading.tsx, admin/src/lib/types/index.ts, admin/postcss.config.mjs, client/postcss.config.mjs, client/src/app/profile/components/Preferences.tsx, admin/src/app/page.tsx, admin/src/lib/auth/types.ts, admin/src/lib/supabase/index.ts
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Security check has been disabled - content may contain sensitive information
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
admin/
  public/
    file.svg
    globe.svg
    next.svg
    vercel.svg
    window.svg
  src/
    app/
      (auth)/
        login/
          page.tsx
        register/
          page.tsx
        layout.tsx
      (dashboard)/
        dashboard/
          page.tsx
        menu/
          page.tsx
        orders/
          page.tsx
        products/
          page.tsx
        settings/
          page.tsx
        support/
          page.tsx
        layout.tsx
      globals.css
      layout.tsx
      page.tsx
    components/
      auth/
        AuthShell.tsx
        LoginForm.tsx
        RegisterForm.tsx
      dashboard/
        LowInventoryCard.tsx
        RecentOrdersCard.tsx
        RevenueTrendCard.tsx
        StatsGrid.tsx
      forms/
        SubmitButton.tsx
      layout/
        AdminSidebar.tsx
        AdminTopbar.tsx
        DashboardShell.tsx
        nav-items.tsx
        SidebarNav.tsx
      menu/
        AddProductForm.tsx
        AddProductPanel.tsx
        ProductBoard.tsx
        QuickEditForm.tsx
      orders/
        OrdersBoard.tsx
        UpdateOrderStatusForm.tsx
    lib/
      auth/
        actions.ts
        index.ts
        session.ts
        types.ts
      data/
        dashboard.ts
        orders-actions.ts
        orders.ts
        products-actions.ts
        products.ts
      supabase/
        client.ts
        config.ts
        index.ts
        server.ts
      types/
        base.ts
        index.ts
        orders.ts
        products.ts
        users.ts
      database.types.ts
  .gitignore
  biome.json
  next.config.ts
  package.json
  postcss.config.mjs
  proxy.ts
  README.md
  tsconfig.json
client/
  public/
    file.svg
    globe.svg
    next.svg
    robots.txt
    vercel.svg
    window.svg
  src/
    app/
      (auth)/
        login/
          loading.tsx
          page.tsx
        register/
          loading.tsx
          page.tsx
      about/
        components/
          CompanyDescription.tsx
          CoreValues.tsx
          KeyHighlights.tsx
          KeyLeadership.tsx
          MilestonesAndVision.tsx
          OurCommitment.tsx
          OurJourney.tsx
          OurVision.tsx
          StrengthsAndOpportunities.tsx
          WeaknessesAndThreats.tsx
          WhatMakesUsSpecial.tsx
        loading.tsx
        page.tsx
      api/
        seed/
          route.ts
      blog/
        components/
          BlogPostList.tsx
        loading.tsx
        page.tsx
      contact/
        components/
          ContactInfo.tsx
          MapEmbed.tsx
          OperatingHours.tsx
        loading.tsx
        page.tsx
      gallery/
        components/
          ImageGallery.tsx
          ImageModal.tsx
        loading.tsx
        page.tsx
      home-components/
        AboutUsSnippet.tsx
        ContactSection.tsx
        FeaturedItemsServices.tsx
        FinancialSnapshotTeaser.tsx
        HeroSection.tsx
        KeyDifferentiators.tsx
        KeyHighlights.tsx
        TargetMarketCallout.tsx
        Testimonials.tsx
      menu/
        [Products]/
          [product]/
            comments/
              loading.tsx
              page.tsx
            components/
              AddtoCart.tsx
              comments.tsx
              FavoriteButton.tsx
              ProductInfo.tsx
              RelatedProducts.tsx
            loading.tsx
            page.tsx
          components/
            CommentModal.tsx
            CommentsButton.tsx
            FilterSortBar.tsx
            LikesButton.tsx
            SocialButtons.tsx
          utils/
            likesUtils.ts
          loading.tsx
          page.tsx
        cart/
          components/
            CartFooter.tsx
          loading.tsx
          page.tsx
        components/
          CategoryCard.tsx
          MenuSections.tsx
          NoResults.tsx
          ProductCard.tsx
          ProductDetails.tsx
          PromotionsBanner.tsx
          SearchBar.tsx
          SpecialOffers.tsx
        layout.tsx
        loading.tsx
        page.tsx
      orders/
        [State]/
          page.tsx
        components/
          OrderItem.tsx
        layout.tsx
        page.tsx
      photo/
        page.tsx
        placeholder-images.json
        placeholderImages.ts
      privacy/
        components/
          PrivacyContent.tsx
        loading.tsx
        page.tsx
      profile/
        components/
          AccountManagement.delete.client.tsx
          AccountManagement.server.tsx
          AccountManagement.tsx
          LoyaltyProgramInfo.client.tsx
          LoyaltyProgramInfo.server.tsx
          LoyaltyProgramInfo.tsx
          PaymentInformation.tsx
          PersonalInformation.tsx
          Preferences.client.tsx
          Preferences.server.tsx
          Preferences.tsx
          ReferralCodeCopier.tsx
        edit/
          page.tsx
        loading.tsx
        page.tsx
      terms/
        components/
          TermsContent.tsx
        loading.tsx
        page.tsx
      globals.css
      layout.css
      layout.tsx
      loading.tsx
      page.tsx
    components/
      Navbar/
        AuthButton.tsx
        DesktopNavbar.tsx
        MobileMenu.tsx
        MobileNavbar.tsx
        Navbar.tsx
        NavbarClient.tsx
        ProfileMenu.tsx
        useMenubarToggle.ts
      ui/
        layout/
          FormField.tsx
          Main.tsx
          Section.tsx
        AddOnSelector.tsx
        Alert.tsx
        Avatar.tsx
        Button.tsx
        Icon.tsx
        Link.tsx
        Loading.tsx
        TextInput.tsx
        TimeSlotPicker.tsx
      components.css
    lib/
      actions/
        auth.ts
        profile.ts
      context/
        CartContext.tsx
      forms/
        CartProductForm.tsx
        CommentsForm.tsx
        ContactForm.tsx
        EditProfileForm.tsx
        LoginForm.tsx
        RegisterForm.tsx
        UserAddressForm.tsx
      hooks/
        Cookies/
          getdelete.ts
          setCookie.ts
          setdelete.ts
      supabase/
        auth/
          logout.ts
          useAuth.ts
        orders/
          orders.ts
        products/
          products.ts
        client.ts
        comments.ts
        favorites.ts
        likes.ts
        orders.ts
        server.ts
      types/
        CarWashTypes.d.ts
        index.ts
        OrderTypes.d.ts
        ProductTypes.d.ts
        UserTypes.d.ts
      utils/
        dateUtils.ts
      database.types.ts
      utils.ts
    proxy.ts
  supabase_migrations/
    create_tables.sql
    seed_products.sql
    update_profiles_schema.sql
  .gitignore
  biome.json
  next.config.ts
  package.json
  postcss.config.mjs
  README.md
  tsconfig.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="admin/public/file.svg">
<svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 13.5V5.41a1 1 0 0 0-.3-.7L9.8.29A1 1 0 0 0 9.08 0H1.5v13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5m-1.5 0v-7H8v-5H3v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1M9.5 5V2.12L12.38 5zM5.13 5h-.62v1.25h2.12V5zm-.62 3h7.12v1.25H4.5zm.62 3h-.62v1.25h7.12V11z" clip-rule="evenodd" fill="#666" fill-rule="evenodd"/></svg>
</file>

<file path="admin/public/globe.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.27 14.1a6.5 6.5 0 0 0 3.67-3.45q-1.24.21-2.7.34-.31 1.83-.97 3.1M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.48-1.52a7 7 0 0 1-.96 0H7.5a4 4 0 0 1-.84-1.32q-.38-.89-.63-2.08a40 40 0 0 0 3.92 0q-.25 1.2-.63 2.08a4 4 0 0 1-.84 1.31zm2.94-4.76q1.66-.15 2.95-.43a7 7 0 0 0 0-2.58q-1.3-.27-2.95-.43a18 18 0 0 1 0 3.44m-1.27-3.54a17 17 0 0 1 0 3.64 39 39 0 0 1-4.3 0 17 17 0 0 1 0-3.64 39 39 0 0 1 4.3 0m1.1-1.17q1.45.13 2.69.34a6.5 6.5 0 0 0-3.67-3.44q.65 1.26.98 3.1M8.48 1.5l.01.02q.41.37.84 1.31.38.89.63 2.08a40 40 0 0 0-3.92 0q.25-1.2.63-2.08a4 4 0 0 1 .85-1.32 7 7 0 0 1 .96 0m-2.75.4a6.5 6.5 0 0 0-3.67 3.44 29 29 0 0 1 2.7-.34q.31-1.83.97-3.1M4.58 6.28q-1.66.16-2.95.43a7 7 0 0 0 0 2.58q1.3.27 2.95.43a18 18 0 0 1 0-3.44m.17 4.71q-1.45-.12-2.69-.34a6.5 6.5 0 0 0 3.67 3.44q-.65-1.27-.98-3.1" fill="#666"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>
</file>

<file path="admin/public/next.svg">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 394 80"><path fill="#000" d="M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z"/><path fill="#000" d="M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z"/></svg>
</file>

<file path="admin/public/vercel.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1155 1000"><path d="m577.3 0 577.4 1000H0z" fill="#fff"/></svg>
</file>

<file path="admin/public/window.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5h13v10a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1zM0 1h16v11.5a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5zm3.75 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M7 4.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m1.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5" fill="#666"/></svg>
</file>

<file path="admin/src/app/(auth)/login/page.tsx">
import Link from "next/link";
import { AuthShell } from "@/components/auth/AuthShell";
import { LoginForm } from "@/components/auth/LoginForm";

type SearchParams = {
  redirectTo?: string;
  registered?: string;
  error?: string;
};

export default function LoginPage({
  searchParams,
}: {
  searchParams: SearchParams;
}) {
  const redirectTo = searchParams?.redirectTo;
  const registered = searchParams?.registered === "1";
  const error = searchParams?.error;

  const initialMessage = registered
    ? "Account created successfully. You can sign in now."
    : undefined;
  const description =
    error === "not_authorized"
      ? "Your account lacks admin permissions. Contact Operations for access."
      : "Access internal dashboards to manage menus, orders, and logistics.";

  return (
    <AuthShell
      title="Admin sign in"
      description={description}
      footer={
        <p>
          Need access?{" "}
          <Link
            href="/register"
            className="text-indigo-300 underline-offset-4 hover:underline"
          >
            Request an admin account
          </Link>
        </p>
      }
    >
      <LoginForm redirectTo={redirectTo} initialMessage={initialMessage} />
    </AuthShell>
  );
}
</file>

<file path="admin/src/app/(auth)/register/page.tsx">
import Link from "next/link";
import { AuthShell } from "@/components/auth/AuthShell";
import { RegisterForm } from "@/components/auth/RegisterForm";

type SearchParams = {
  error?: string;
};

export default function RegisterPage({
  searchParams,
}: {
  searchParams: SearchParams;
}) {
  return (
    <AuthShell
      title="Invite-only registration"
      description="Only trusted operations staff should create new admin accounts."
      footer={
        <p>
          Already onboarded?{" "}
          <Link
            href="/login"
            className="text-indigo-300 underline-offset-4 hover:underline"
          >
            Sign in
          </Link>
        </p>
      }
    >
      <RegisterForm initialError={searchParams?.error} />
    </AuthShell>
  );
}
</file>

<file path="admin/src/app/(auth)/layout.tsx">
import type { ReactNode } from "react";

export default function AuthLayout({ children }: { children: ReactNode }) {
  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-10">
      <div className="mx-auto flex max-w-6xl flex-col items-center justify-center gap-8">
        <div className="text-center text-white">
          <p className="text-sm uppercase tracking-[0.3em] text-indigo-300">
            PA Catering
          </p>
          <h1 className="text-3xl font-semibold">Operations Console</h1>
        </div>
        {children}
      </div>
    </div>
  );
}
</file>

<file path="admin/src/app/(dashboard)/dashboard/page.tsx">
import { LowInventoryCard } from "@/components/dashboard/LowInventoryCard";
import { RecentOrdersCard } from "@/components/dashboard/RecentOrdersCard";
import { RevenueTrendCard } from "@/components/dashboard/RevenueTrendCard";
import { StatsGrid } from "@/components/dashboard/StatsGrid";
import { DashboardShell } from "@/components/layout/DashboardShell";
import { fetchDashboardData } from "@/lib/data/dashboard";

export default async function DashboardPage() {
  const data = await fetchDashboardData();

  return (
    <div className="space-y-6">
      <DashboardShell
        title="Executive summary"
        description="Live snapshot of menu demand, fulfillment, and stock health."
      >
        <StatsGrid stats={data.stats} />
      </DashboardShell>

      <div className="grid gap-6 lg:grid-cols-3">
        <div className="lg:col-span-2">
          <RecentOrdersCard orders={data.recentOrders} />
        </div>
        <div className="space-y-6">
          <RevenueTrendCard series={data.revenueSeries} />
          <LowInventoryCard items={data.lowInventory} />
        </div>
      </div>
    </div>
  );
}
</file>

<file path="admin/src/app/(dashboard)/menu/page.tsx">
import { DashboardShell } from "@/components/layout/DashboardShell";
import { AddProductPanel } from "@/components/menu/AddProductPanel";
import { ProductBoard } from "@/components/menu/ProductBoard";
import { fetchProductCatalog } from "@/lib/data/products";

export default async function MenuPage() {
  const products = await fetchProductCatalog();
  const categories = Array.from(
    new Set(products.map((product) => product.category).filter(Boolean)),
  ) as string[];

  return (
    <div className="grid gap-6 lg:grid-cols-[2fr,1fr]">
      <DashboardShell
        title="Menu management"
        description="Control availability, pricing, and storytelling for every PA Catering experience."
      >
        <ProductBoard products={products} />
      </DashboardShell>

      <AddProductPanel categories={categories} />
    </div>
  );
}
</file>

<file path="admin/src/app/(dashboard)/orders/page.tsx">
import { DashboardShell } from "@/components/layout/DashboardShell";
import { OrdersBoard } from "@/components/orders/OrdersBoard";
import { fetchOrdersBoard } from "@/lib/data/orders";

export default async function OrdersPage() {
  const { orders } = await fetchOrdersBoard();

  return (
    <DashboardShell
      title="Fulfilment queue"
      description="Assign, track, and complete customer orders in real time."
    >
      <OrdersBoard orders={orders} />
    </DashboardShell>
  );
}
</file>

<file path="admin/src/app/(dashboard)/products/page.tsx">
import { DashboardShell } from "@/components/layout/DashboardShell";
import { ProductBoard } from "@/components/menu/ProductBoard";
import { fetchProductCatalog } from "@/lib/data/products";

export default async function ProductsPage() {
  const products = await fetchProductCatalog();

  return (
    <DashboardShell
      title="Product catalogue"
      description="Full view of every SKU synced from Supabase. Use this to audit descriptions and pricing."
    >
      <ProductBoard products={products} />
    </DashboardShell>
  );
}
</file>

<file path="admin/src/app/(dashboard)/settings/page.tsx">
import { DashboardShell } from "@/components/layout/DashboardShell";

export default function SettingsPage() {
  return (
    <DashboardShell
      title="Workspace settings"
      description="Configure notification channels and escalation defaults."
    >
      <div className="space-y-4 text-sm text-slate-300">
        <div className="rounded-2xl border border-white/10 bg-slate-900/40 p-4">
          <p className="text-xs uppercase tracking-[0.3em] text-slate-500">
            Notifications
          </p>
          <p className="mt-2 text-white">
            Ops alerts sent to #war-room (Teams)
          </p>
          <p>
            Email digests go to ops@pacatering.co.za every morning at 06:00.
          </p>
        </div>
        <div className="rounded-2xl border border-white/10 bg-slate-900/40 p-4">
          <p className="text-xs uppercase tracking-[0.3em] text-slate-500">
            Escalations
          </p>
          <p className="mt-2 text-white">On-call: Nomsa Nkosi</p>
          <p>Backup: Lesedi Moagi</p>
        </div>
      </div>
    </DashboardShell>
  );
}
</file>

<file path="admin/src/app/(dashboard)/support/page.tsx">
import { DashboardShell } from "@/components/layout/DashboardShell";

export default function SupportPage() {
  return (
    <DashboardShell
      title="Ops support"
      description="Get help from leadership or open a ticket with the tech team."
    >
      <div className="space-y-4 text-sm text-slate-300">
        <p>Need assistance? Reach out via the following channels:</p>
        <ul className="list-disc space-y-2 pl-5">
          <li>Email: ops@pacatering.co.za</li>
          <li>WhatsApp: +27 60 555 0101</li>
          <li>Escalations: #ops-war-room (Teams)</li>
        </ul>
      </div>
    </DashboardShell>
  );
}
</file>

<file path="admin/src/app/(dashboard)/layout.tsx">
import type { ReactNode } from "react";
import { AdminSidebar } from "@/components/layout/AdminSidebar";
import { AdminTopbar } from "@/components/layout/AdminTopbar";
import { requireAdminProfile } from "@/lib/auth/session";

export default async function DashboardLayout({
  children,
}: {
  children: ReactNode;
}) {
  const profile = await requireAdminProfile();

  return (
    <div className="flex min-h-screen bg-slate-950 text-white">
      <AdminSidebar />
      <div className="flex flex-1 flex-col">
        <AdminTopbar profile={profile} />
        <main className="flex-1 space-y-6 bg-slate-950 px-4 py-6 lg:px-8">
          {children}
        </main>
      </div>
    </div>
  );
}
</file>

<file path="admin/src/app/globals.css">
@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}
</file>

<file path="admin/src/app/layout.tsx">
import type { Metadata } from "next";
import { Geist, Geist_Mono } from "next/font/google";
import "./globals.css";

const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
});

const geistMono = Geist_Mono({
  variable: "--font-geist-mono",
  subsets: ["latin"],
});

export const metadata: Metadata = {
  title: "PA Catering Admin",
  description: "Operations console for menu, orders, and logistics",
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="en">
      <body
        className={`${geistSans.variable} ${geistMono.variable} antialiased bg-slate-950 text-white`}
      >
        {children}
      </body>
    </html>
  );
}
</file>

<file path="admin/src/app/page.tsx">
import { redirect } from "next/navigation";

export default function Home() {
  redirect("/dashboard");
}
</file>

<file path="admin/src/components/auth/AuthShell.tsx">
import type { ReactNode } from "react";

type Props = {
  title: string;
  description: string;
  children: ReactNode;
  footer?: ReactNode;
};

export const AuthShell = ({ title, description, children, footer }: Props) => (
  <div className="w-full max-w-md rounded-2xl border border-white/10 bg-slate-900/80 p-8 text-white shadow-2xl backdrop-blur">
    <div className="space-y-2 text-center">
      <h1 className="text-2xl font-semibold">{title}</h1>
      <p className="text-sm text-slate-300">{description}</p>
    </div>

    <div className="mt-6">{children}</div>

    {footer ? (
      <div className="mt-6 text-center text-sm text-slate-400">{footer}</div>
    ) : null}
  </div>
);
</file>

<file path="admin/src/components/auth/LoginForm.tsx">
"use client";

import { useFormState } from "react-dom";
import { SubmitButton } from "@/components/forms/SubmitButton";
import type { AuthActionState } from "@/lib/auth";
import { loginAction } from "@/lib/auth";

type Props = {
  redirectTo?: string;
  initialMessage?: string;
};

const initialState: AuthActionState = {};

export const LoginForm = ({ redirectTo, initialMessage }: Props) => {
  const [state, formAction] = useFormState(loginAction, {
    ...initialState,
    message: initialMessage,
  });

  return (
    <form action={formAction} className="space-y-4">
      <input
        type="hidden"
        name="redirectTo"
        value={redirectTo ?? "/dashboard"}
      />
      <div className="space-y-2">
        <label className="text-sm text-slate-300" htmlFor="email">
          Work email
        </label>
        <input
          id="email"
          name="email"
          type="email"
          required
          className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-4 py-2 text-white outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
          placeholder="you@pacatering.co.za"
        />
      </div>

      <div className="space-y-2">
        <label className="text-sm text-slate-300" htmlFor="password">
          Password
        </label>
        <input
          id="password"
          name="password"
          type="password"
          required
          className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-4 py-2 text-white outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
          placeholder="••••••••"
        />
      </div>

      {(state.error || state.message) && (
        <p
          className={`text-sm ${state.error ? "text-rose-400" : "text-emerald-400"}`}
        >
          {state.error ?? state.message}
        </p>
      )}

      <SubmitButton label="Sign in" loadingLabel="Signing in..." />
    </form>
  );
};
</file>

<file path="admin/src/components/auth/RegisterForm.tsx">
"use client";

import { useFormState } from "react-dom";
import { SubmitButton } from "@/components/forms/SubmitButton";
import type { AuthActionState } from "@/lib/auth";
import { registerAction } from "@/lib/auth";

type Props = {
  initialError?: string;
};

export const RegisterForm = ({ initialError }: Props) => {
  const [state, formAction] = useFormState<AuthActionState, FormData>(
    registerAction,
    {
      error: initialError,
    },
  );

  return (
    <form action={formAction} className="space-y-4">
      <div className="space-y-2">
        <label className="text-sm text-slate-300" htmlFor="fullName">
          Full name
        </label>
        <input
          id="fullName"
          name="fullName"
          type="text"
          placeholder="Nomsa Nkosi"
          className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-4 py-2 text-white outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
        />
      </div>

      <div className="space-y-2">
        <label className="text-sm text-slate-300" htmlFor="email">
          Work email
        </label>
        <input
          id="email"
          name="email"
          type="email"
          required
          placeholder="you@pacatering.co.za"
          className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-4 py-2 text-white outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
        />
      </div>

      <div className="space-y-2">
        <label className="text-sm text-slate-300" htmlFor="password">
          Password
        </label>
        <input
          id="password"
          name="password"
          type="password"
          required
          minLength={6}
          placeholder="Create a strong password"
          className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-4 py-2 text-white outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
        />
      </div>

      <div className="space-y-2">
        <label className="text-sm text-slate-300" htmlFor="inviteCode">
          Invite code
        </label>
        <input
          id="inviteCode"
          name="inviteCode"
          type="password"
          placeholder="Required if set by Ops"
          className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-4 py-2 text-white outline-none transition focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
        />
      </div>

      {state.error ? (
        <p className="text-sm text-rose-400">{state.error}</p>
      ) : null}

      <SubmitButton
        label="Create admin account"
        loadingLabel="Creating account..."
      />
    </form>
  );
};
</file>

<file path="admin/src/components/dashboard/LowInventoryCard.tsx">
import { HiOutlineExclamationTriangle } from "react-icons/hi2";
import { DashboardShell } from "@/components/layout/DashboardShell";
import type { ProductRecord } from "@/lib/types";

type Props = {
  items: ProductRecord[];
};

export const LowInventoryCard = ({ items }: Props) => (
  <DashboardShell
    title="Low inventory"
    description="Keep signature menu items available during peak demand."
  >
    {items.length === 0 ? (
      <p className="text-sm text-slate-500">
        All tracked items are within healthy stock levels.
      </p>
    ) : (
      <ul className="space-y-3">
        {items.map((item) => (
          <li
            key={item.id}
            className="flex items-center justify-between rounded-xl border border-rose-500/30 bg-rose-500/5 px-3 py-2 text-sm text-rose-200"
          >
            <div>
              <p className="font-semibold text-white">{item.name}</p>
              <p className="text-xs uppercase tracking-[0.3em] text-rose-300">
                {item.category ?? "Uncategorised"}
              </p>
            </div>
            <div className="flex items-center gap-1 text-rose-300">
              <HiOutlineExclamationTriangle />
              <span>{item.stock ?? 0} left</span>
            </div>
          </li>
        ))}
      </ul>
    )}
  </DashboardShell>
);
</file>

<file path="admin/src/components/dashboard/RecentOrdersCard.tsx">
import { formatDistanceToNow } from "date-fns";
import Link from "next/link";
import {
  HiOutlineArrowRight,
  HiOutlineClipboardDocumentCheck,
} from "react-icons/hi2";
import { DashboardShell } from "@/components/layout/DashboardShell";
import type { SupabaseOrderRecord } from "@/lib/types";

type Props = {
  orders: SupabaseOrderRecord[];
};

const statusColor: Record<string, string> = {
  pending: "text-amber-300",
  processing: "text-sky-300",
  completed: "text-emerald-300",
  cancelled: "text-rose-300",
};

export const RecentOrdersCard = ({ orders }: Props) => (
  <DashboardShell
    title="Live orders"
    description="Monitor field teams and respond to escalations in real time."
    actions={
      <Link
        href="/orders"
        className="inline-flex items-center gap-1 rounded-full border border-white/10 px-3 py-2 text-xs uppercase tracking-[0.25em] text-slate-200 transition hover:border-indigo-400 hover:text-white"
      >
        View queue
        <HiOutlineArrowRight />
      </Link>
    }
  >
    <div className="overflow-x-auto">
      <table className="min-w-full text-left text-sm text-slate-300">
        <thead className="text-xs uppercase tracking-[0.2em] text-slate-500">
          <tr>
            <th className="py-3">Order</th>
            <th className="py-3">Status</th>
            <th className="py-3">Total</th>
            <th className="py-3">Updated</th>
          </tr>
        </thead>
        <tbody>
          {orders.length === 0 ? (
            <tr>
              <td colSpan={4} className="py-10 text-center text-slate-500">
                <div className="flex flex-col items-center gap-2">
                  <HiOutlineClipboardDocumentCheck className="text-3xl text-slate-600" />
                  <p>No orders in the last hour.</p>
                </div>
              </td>
            </tr>
          ) : (
            orders.map((order) => (
              <tr key={order.id} className="border-t border-white/5">
                <td className="py-3 font-semibold text-white">
                  #{order.id.slice(0, 8)}
                </td>
                <td
                  className={`py-3 text-xs uppercase tracking-[0.25em] ${statusColor[order.status] ?? "text-slate-400"}`}
                >
                  {order.status}
                </td>
                <td className="py-3 font-medium text-white">
                  R{order.total_price?.toFixed(2) ?? "0.00"}
                </td>
                <td className="py-3 text-slate-400">
                  {formatDistanceToNow(new Date(order.created_at), {
                    addSuffix: true,
                  })}
                </td>
              </tr>
            ))
          )}
        </tbody>
      </table>
    </div>
  </DashboardShell>
);
</file>

<file path="admin/src/components/dashboard/RevenueTrendCard.tsx">
import { HiOutlineArrowTrendingUp } from "react-icons/hi2";
import { DashboardShell } from "@/components/layout/DashboardShell";
import type { RevenuePoint } from "@/lib/data/dashboard";

type Props = {
  series: RevenuePoint[];
};

export const RevenueTrendCard = ({ series }: Props) => (
  <DashboardShell
    title="7-day revenue trend"
    description="Daily gross sales captured via Supabase orders API."
  >
    {series.length === 0 ? (
      <div className="flex h-32 items-center justify-center text-sm text-slate-500">
        No orders to chart yet.
      </div>
    ) : (
      <ul className="space-y-3">
        {series.map((point) => (
          <li
            key={point.date}
            className="flex items-center justify-between rounded-xl border border-white/5 bg-slate-900/40 px-3 py-2 text-sm"
          >
            <div>
              <p className="text-xs uppercase tracking-[0.3em] text-slate-500">
                {point.date}
              </p>
              <p className="text-lg font-semibold text-white">
                R{point.total.toFixed(2)}
              </p>
            </div>
            <HiOutlineArrowTrendingUp className="text-xl text-emerald-300" />
          </li>
        ))}
      </ul>
    )}
  </DashboardShell>
);
</file>

<file path="admin/src/components/dashboard/StatsGrid.tsx">
import {
  HiOutlineArrowTrendingUp,
  HiOutlineBanknotes,
  HiOutlineClipboardDocumentList,
  HiOutlineCube,
  HiOutlineSparkles,
} from "react-icons/hi2";
import type { DashboardStats } from "@/lib/data/dashboard";

type Props = {
  stats: DashboardStats;
};

const formatNumber = (value: number) => value.toLocaleString("en-ZA");

export const StatsGrid = ({ stats }: Props) => {
  const cards = [
    {
      label: "Orders (24h)",
      value: formatNumber(stats.totalOrders),
      change: "+12% vs yesterday",
      icon: HiOutlineClipboardDocumentList,
    },
    {
      label: "Revenue (ZAR)",
      value: `R${formatNumber(stats.revenue)}`,
      change: "Gross sales",
      icon: HiOutlineBanknotes,
    },
    {
      label: "Pending orders",
      value: formatNumber(stats.pendingOrders),
      change: "Awaiting assignment",
      icon: HiOutlineArrowTrendingUp,
    },
    {
      label: "Menu items live",
      value: formatNumber(stats.productCount),
      change: `${stats.lowStockCount} flagged low stock`,
      icon: HiOutlineCube,
    },
    {
      label: "Fulfilment rate",
      value: `${stats.fulfillmentRate}%`,
      change: "Completed vs total",
      icon: HiOutlineSparkles,
    },
  ];

  return (
    <div className="grid gap-4 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-5">
      {cards.map(({ label, value, change, icon: Icon }) => (
        <article
          key={label}
          className="rounded-2xl border border-white/5 bg-gradient-to-br from-slate-900/70 to-slate-900/30 p-4 shadow-lg shadow-black/10"
        >
          <div className="flex items-center justify-between">
            <div>
              <p className="text-sm uppercase tracking-[0.2em] text-slate-400">
                {label}
              </p>
              <p className="mt-2 text-2xl font-semibold text-white">{value}</p>
            </div>
            <div className="rounded-xl bg-white/10 p-3 text-indigo-300">
              <Icon className="text-xl" />
            </div>
          </div>
          <p className="mt-4 text-xs uppercase tracking-[0.25em] text-slate-500">
            {change}
          </p>
        </article>
      ))}
    </div>
  );
};
</file>

<file path="admin/src/components/forms/SubmitButton.tsx">
"use client";

import { useFormStatus } from "react-dom";

type Props = {
  label: string;
  loadingLabel?: string;
  className?: string;
};

export const SubmitButton = ({
  label,
  loadingLabel = "Working...",
  className,
}: Props) => {
  const { pending } = useFormStatus();

  return (
    <button
      type="submit"
      disabled={pending}
      className={`inline-flex w-full items-center justify-center rounded-lg bg-indigo-500 px-4 py-2 font-semibold text-white transition hover:bg-indigo-400 disabled:opacity-60 ${className ?? ""}`}
    >
      {pending ? loadingLabel : label}
    </button>
  );
};
</file>

<file path="admin/src/components/layout/AdminSidebar.tsx">
import Link from "next/link";
import { NAV_ITEMS } from "./nav-items";
import { SidebarNav } from "./SidebarNav";

export const AdminSidebar = () => (
  <aside className="hidden w-72 flex-col border-r border-white/10 bg-slate-950/80 px-6 py-8 lg:flex">
    <Link href="/dashboard" className="mb-10 block">
      <div className="text-xs uppercase tracking-[0.4em] text-indigo-400">
        PA Catering
      </div>
      <p className="text-xl font-semibold text-white">Admin Console</p>
    </Link>

    <SidebarNav items={NAV_ITEMS} />

    <div className="mt-auto rounded-xl border border-white/10 bg-slate-900/80 p-4 text-sm text-slate-300">
      <p className="font-semibold text-white">Daily Ops Checklist</p>
      <ul className="mt-2 space-y-1 text-xs text-slate-400">
        <li>• Confirm menu availability</li>
        <li>• Assign pending orders</li>
        <li>• Update stock counts</li>
      </ul>
    </div>
  </aside>
);
</file>

<file path="admin/src/components/layout/AdminTopbar.tsx">
import Link from "next/link";
import { HiOutlineBell, HiOutlineQuestionMarkCircle } from "react-icons/hi2";
import { logoutAction } from "@/lib/auth";
import type { AdminProfileSummary } from "@/lib/types";
import { NAV_ITEMS } from "./nav-items";

type Props = {
  profile: AdminProfileSummary;
};

export const AdminTopbar = ({ profile }: Props) => (
  <header className="flex flex-col gap-4 border-b border-white/5 bg-slate-950/60 px-4 py-4 backdrop-blur">
    <div>
      <p className="text-sm uppercase tracking-[0.35em] text-indigo-300">
        Operations
      </p>
      <h1 className="text-xl font-semibold text-white">
        Welcome back, {profile.full_name ?? "Admin"}
      </h1>
    </div>

    <div className="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
      <div className="flex flex-wrap gap-2 lg:hidden">
        {NAV_ITEMS.map((item) => (
          <Link
            key={item.href}
            href={item.href}
            className="rounded-full border border-white/10 px-3 py-1 text-xs uppercase tracking-[0.2em] text-slate-300 transition hover:border-indigo-400 hover:text-white"
          >
            {item.label}
          </Link>
        ))}
      </div>

      <div className="flex items-center gap-3">
        <Link
          href="/support"
          className="inline-flex items-center gap-2 rounded-full border border-white/10 px-3 py-2 text-sm text-slate-200 transition hover:border-indigo-400 hover:text-white"
        >
          <HiOutlineQuestionMarkCircle />
          Support
        </Link>
        <button
          type="button"
          className="rounded-full border border-white/10 p-2 text-slate-200 transition hover:border-indigo-400 hover:text-white"
          aria-label="Notifications"
        >
          <HiOutlineBell className="text-lg" />
        </button>
        <form action={logoutAction}>
          <button
            type="submit"
            className="rounded-full border border-white/10 px-4 py-2 text-sm text-slate-200 transition hover:border-rose-500 hover:text-white"
          >
            Sign out
          </button>
        </form>
      </div>
    </div>
  </header>
);
</file>

<file path="admin/src/components/layout/DashboardShell.tsx">
import type { ReactNode } from "react";

type Props = {
  title: string;
  description?: string;
  actions?: ReactNode;
  children: ReactNode;
};

export const DashboardShell = ({
  title,
  description,
  actions,
  children,
}: Props) => (
  <section className="space-y-6 rounded-2xl border border-white/5 bg-slate-900/40 p-6 shadow-inner shadow-black/20">
    <header className="flex flex-col gap-2 border-b border-white/5 pb-4 md:flex-row md:items-center md:justify-between">
      <div>
        <h2 className="text-xl font-semibold text-white">{title}</h2>
        {description ? (
          <p className="text-sm text-slate-400">{description}</p>
        ) : null}
      </div>
      {actions ? (
        <div className="flex items-center gap-3">{actions}</div>
      ) : null}
    </header>

    <div>{children}</div>
  </section>
);
</file>

<file path="admin/src/components/layout/nav-items.tsx">
import type { IconType } from "react-icons";
import {
  HiOutlineChartBar,
  HiOutlineClipboardDocumentList,
  HiOutlineCog,
  HiOutlineSquares2X2,
} from "react-icons/hi2";
import { PiBowlFoodBold } from "react-icons/pi";

export type NavItem = {
  label: string;
  href: string;
  icon: IconType;
  badge?: string;
};

export const NAV_ITEMS: NavItem[] = [
  {
    label: "Dashboard",
    href: "/dashboard",
    icon: HiOutlineChartBar,
  },
  {
    label: "Menu",
    href: "/menu",
    icon: PiBowlFoodBold,
  },
  {
    label: "Orders",
    href: "/orders",
    icon: HiOutlineClipboardDocumentList,
    badge: "Live",
  },
  {
    label: "Products",
    href: "/products",
    icon: HiOutlineSquares2X2,
  },
  {
    label: "Settings",
    href: "/settings",
    icon: HiOutlineCog,
  },
];
</file>

<file path="admin/src/components/layout/SidebarNav.tsx">
"use client";

import Link from "next/link";
import { usePathname } from "next/navigation";
import type { NavItem } from "./nav-items";

type Props = {
  items: NavItem[];
};

export const SidebarNav = ({ items }: Props) => {
  const pathname = usePathname();

  return (
    <nav className="space-y-1">
      {items.map(({ label, href, icon: Icon, badge }) => {
        const isActive = pathname === href;

        return (
          <Link
            key={href}
            href={href}
            className={`flex items-center justify-between rounded-xl px-4 py-3 text-sm font-medium transition ${
              isActive
                ? "bg-indigo-500/20 text-white"
                : "text-slate-300 hover:bg-white/5 hover:text-white"
            }`}
          >
            <span className="flex items-center gap-3">
              <Icon className="text-lg" />
              {label}
            </span>
            {badge ? (
              <span className="rounded-full bg-white/10 px-2 py-0.5 text-[10px] uppercase tracking-widest text-white">
                {badge}
              </span>
            ) : null}
          </Link>
        );
      })}
    </nav>
  );
};
</file>

<file path="admin/src/components/menu/AddProductForm.tsx">
"use client";

import { useFormState } from "react-dom";
import { SubmitButton } from "@/components/forms/SubmitButton";
import {
  createProductAction,
  type ProductActionState,
} from "@/lib/data/products-actions";

type Props = {
  categories: string[];
};

const initialState: ProductActionState = {};

export const AddProductForm = ({ categories }: Props) => {
  const [state, formAction] = useFormState(createProductAction, initialState);

  return (
    <form action={formAction} className="space-y-4 text-sm text-slate-200">
      <div className="space-y-2">
        <label htmlFor="name">Product name</label>
        <input
          id="name"
          name="name"
          required
          placeholder="Mogodu Mondays"
          className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
        />
      </div>

      <div className="space-y-2">
        <label htmlFor="category">Category</label>
        <input
          id="category"
          name="category"
          list="menu-categories"
          required
          placeholder="Warm bowls"
          className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
        />
        <datalist id="menu-categories">
          {categories.map((category) => (
            <option key={category} value={category ?? ""} />
          ))}
        </datalist>
      </div>

      <div className="grid gap-3 md:grid-cols-2">
        <div className="space-y-2">
          <label htmlFor="price">Price (ZAR)</label>
          <input
            id="price"
            name="price"
            type="number"
            step="0.01"
            min="0"
            required
            placeholder="85"
            className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
          />
        </div>
        <div className="space-y-2">
          <label htmlFor="stock">Stock</label>
          <input
            id="stock"
            name="stock"
            type="number"
            min="0"
            placeholder="25"
            className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
          />
        </div>
      </div>

      <div className="space-y-2">
        <label htmlFor="badge">Badge (optional)</label>
        <input
          id="badge"
          name="badge"
          placeholder="New / Bestseller"
          className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
        />
      </div>

      <div className="space-y-2">
        <label htmlFor="image_url">Image URL</label>
        <input
          id="image_url"
          name="image_url"
          type="url"
          placeholder="https://cdn.pacatering.co.za/menu/mogodu.jpg"
          className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
        />
      </div>

      <div className="space-y-2">
        <label htmlFor="description">Story / description</label>
        <textarea
          id="description"
          name="description"
          rows={4}
          placeholder="Slow-cooked tripe with creamy samp, toasted chakalaka crumbs, and herb oil."
          className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
        />
      </div>

      {state.error ? (
        <p className="text-sm text-rose-400">{state.error}</p>
      ) : null}
      {state.success ? (
        <p className="text-sm text-emerald-400">{state.success}</p>
      ) : null}

      <SubmitButton label="Add to menu" loadingLabel="Saving..." />
    </form>
  );
};
</file>

<file path="admin/src/components/menu/AddProductPanel.tsx">
import { DashboardShell } from "@/components/layout/DashboardShell";
import { AddProductForm } from "./AddProductForm";

type Props = {
  categories: string[];
};

export const AddProductPanel = ({ categories }: Props) => (
  <DashboardShell
    title="Add menu item"
    description="Create a new product and sync it directly to Supabase."
  >
    <AddProductForm categories={categories} />
  </DashboardShell>
);
</file>

<file path="admin/src/components/menu/ProductBoard.tsx">
"use client";

import { useMemo, useState } from "react";
import type { ProductRecord } from "@/lib/types";
import { QuickEditForm } from "./QuickEditForm";

type Props = {
  products: ProductRecord[];
};

const normalize = (value?: string | null) => value?.toLowerCase() ?? "";

export const ProductBoard = ({ products }: Props) => {
  const [search, setSearch] = useState("");
  const [category, setCategory] = useState("all");

  const categories = useMemo(() => {
    const unique = Array.from(
      new Set(products.map((product) => product.category ?? "")),
    ).filter(Boolean) as string[];
    return ["all", ...unique];
  }, [products]);

  const filtered = useMemo(() => {
    return products.filter((product) => {
      const matchesSearch =
        !search ||
        normalize(product.name).includes(search.toLowerCase()) ||
        normalize(product.description).includes(search.toLowerCase());
      const matchesCategory =
        category === "all" ||
        normalize(product.category) === category.toLowerCase();
      return matchesSearch && matchesCategory;
    });
  }, [category, products, search]);

  const avgPrice =
    filtered.length > 0
      ? filtered.reduce((sum, product) => sum + (product.price ?? 0), 0) /
        filtered.length
      : 0;
  const lowStock = filtered.filter(
    (product) => (product.stock ?? 0) <= 10,
  ).length;

  return (
    <div className="space-y-5">
      <div className="grid gap-3 md:grid-cols-3">
        <label className="space-y-2 text-sm text-slate-300">
          <span>Search</span>
          <input
            type="search"
            placeholder="Name or description"
            value={search}
            onChange={(event) => setSearch(event.target.value)}
            className="w-full rounded-xl border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
          />
        </label>

        <label className="space-y-2 text-sm text-slate-300">
          <span>Category</span>
          <select
            value={category}
            onChange={(event) => setCategory(event.target.value)}
            className="w-full rounded-xl border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
          >
            {categories.map((item) => (
              <option key={item} value={item}>
                {item === "all" ? "All menu sections" : item}
              </option>
            ))}
          </select>
        </label>

        <div className="rounded-xl border border-white/10 bg-slate-900/50 p-3 text-sm text-slate-300">
          <p className="text-xs uppercase tracking-[0.3em] text-slate-500">
            Insights
          </p>
          <p className="mt-2 text-white">
            Avg price:{" "}
            <span className="font-semibold">R{avgPrice.toFixed(2)}</span>
          </p>
          <p>
            Low stock items: <span className="font-semibold">{lowStock}</span>
          </p>
        </div>
      </div>

      <div className="grid gap-4 md:grid-cols-2">
        {filtered.length === 0 ? (
          <div className="col-span-full rounded-2xl border border-white/10 bg-slate-900/40 p-8 text-center text-slate-500">
            No menu items match your filters.
          </div>
        ) : (
          filtered.map((product) => (
            <article
              key={product.id}
              className="rounded-2xl border border-white/10 bg-slate-900/40 p-4 shadow-inner shadow-black/30"
            >
              <div className="flex items-start justify-between gap-4">
                <div>
                  <p className="text-xs uppercase tracking-[0.3em] text-slate-500">
                    {product.category ?? "Uncategorised"}
                  </p>
                  <h3 className="text-lg font-semibold text-white">
                    {product.name}
                  </h3>
                  <p className="text-sm text-slate-400">
                    {product.description ?? "No description yet."}
                  </p>
                </div>
                <div className="text-right text-white">
                  <p className="text-2xl font-semibold">
                    R{product.price?.toFixed(2) ?? "0.00"}
                  </p>
                  <p className="text-xs text-slate-500">
                    {product.stock ?? 0} in stock
                  </p>
                </div>
              </div>

              {product.badge ? (
                <span className="mt-2 inline-block rounded-full border border-indigo-400/40 px-3 py-1 text-xs uppercase tracking-[0.3em] text-indigo-200">
                  {product.badge}
                </span>
              ) : null}

              <div className="mt-4 rounded-xl border border-white/10 bg-slate-950/40 p-3">
                <QuickEditForm product={product} />
              </div>
            </article>
          ))
        )}
      </div>
    </div>
  );
};
</file>

<file path="admin/src/components/menu/QuickEditForm.tsx">
"use client";

import { useFormState } from "react-dom";
import { SubmitButton } from "@/components/forms/SubmitButton";
import {
  type ProductActionState,
  updateProductAction,
} from "@/lib/data/products-actions";
import type { ProductRecord } from "@/lib/types";

type Props = {
  product: ProductRecord;
};

const initialState: ProductActionState = {};

export const QuickEditForm = ({ product }: Props) => {
  const [state, formAction] = useFormState(updateProductAction, initialState);

  return (
    <form action={formAction} className="space-y-3 text-sm text-slate-200">
      <input type="hidden" name="id" value={product.id} />
      <div className="grid gap-3 md:grid-cols-2">
        <label className="space-y-2">
          <span>Price (ZAR)</span>
          <input
            name="price"
            type="number"
            step="0.01"
            min="0"
            defaultValue={product.price ?? 0}
            className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
          />
        </label>
        <label className="space-y-2">
          <span>Stock</span>
          <input
            name="stock"
            type="number"
            min="0"
            defaultValue={product.stock ?? 0}
            className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
          />
        </label>
      </div>

      <label className="space-y-2 block">
        <span>Badge</span>
        <input
          name="badge"
          defaultValue={product.badge ?? ""}
          placeholder="Chef's pick"
          className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
        />
      </label>

      <label className="space-y-2 block">
        <span>Description</span>
        <textarea
          name="description"
          rows={3}
          defaultValue={product.description ?? ""}
          className="w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
        />
      </label>

      {state.error ? (
        <p className="text-sm text-rose-400">{state.error}</p>
      ) : null}
      {state.success ? (
        <p className="text-sm text-emerald-400">{state.success}</p>
      ) : null}

      <SubmitButton
        label="Save changes"
        loadingLabel="Updating..."
        className="bg-slate-800"
      />
    </form>
  );
};
</file>

<file path="admin/src/components/orders/OrdersBoard.tsx">
"use client";

import { formatDistanceToNow } from "date-fns";
import { useMemo, useState } from "react";
import type { CartItem, SupabaseOrderRecord } from "@/lib/types";
import { UpdateOrderStatusForm } from "./UpdateOrderStatusForm";

type Props = {
  orders: SupabaseOrderRecord[];
};

const STATUS_COLUMNS: SupabaseOrderRecord["status"][] = [
  "pending",
  "processing",
  "completed",
  "cancelled",
];

type DisplayOrderItem = CartItem & {
  name?: string;
  Quantity?: number;
  ProductID?: string;
};

const resolveItemName = (item: DisplayOrderItem) =>
  item.Name ?? item.name ?? "Menu item";

const resolveItemQuantity = (item: DisplayOrderItem) =>
  item.quantity ?? item.Quantity ?? 1;

export const OrdersBoard = ({ orders }: Props) => {
  const [search, setSearch] = useState("");

  const filtered = useMemo(() => {
    return orders.filter((order) => {
      if (!search) return true;
      const term = search.toLowerCase();
      const idMatch = order.id.toLowerCase().includes(term);
      const userMatch = (order.user_id ?? "").toLowerCase().includes(term);
      const itemMatch = (order.items ?? []).some((item) =>
        resolveItemName(item as DisplayOrderItem)
          .toLowerCase()
          .includes(term),
      );
      return idMatch || userMatch || itemMatch;
    });
  }, [orders, search]);

  const grouped = STATUS_COLUMNS.map((status) => ({
    status,
    items: filtered.filter((order) => order.status === status),
  }));

  return (
    <div className="space-y-4">
      <div className="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
        <label className="w-full max-w-md text-sm text-slate-300">
          <span className="sr-only">Search orders</span>
          <input
            type="search"
            placeholder="Search by order ID, customer, or item"
            value={search}
            onChange={(event) => setSearch(event.target.value)}
            className="w-full rounded-full border border-white/10 bg-slate-900/60 px-4 py-3 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
          />
        </label>
        <p className="text-xs uppercase tracking-[0.3em] text-slate-500">
          Showing {filtered.length} of {orders.length} orders
        </p>
      </div>

      <div className="grid gap-4 md:grid-cols-2 xl:grid-cols-4">
        {grouped.map(({ status, items }) => (
          <section
            key={status}
            className="rounded-2xl border border-white/10 bg-slate-900/40 p-4"
          >
            <header className="flex items-center justify-between">
              <p className="text-xs uppercase tracking-[0.3em] text-slate-500">
                {status}
              </p>
              <span className="rounded-full bg-white/10 px-3 py-1 text-xs text-white">
                {items.length}
              </span>
            </header>

            <div className="mt-4 space-y-3">
              {items.length === 0 ? (
                <p className="text-xs text-slate-500">
                  No orders in this lane.
                </p>
              ) : (
                items.map((order) => (
                  <article
                    key={order.id}
                    className="rounded-xl border border-white/10 bg-slate-950/40 p-3 text-sm text-slate-200"
                  >
                    <div className="flex items-start justify-between gap-2">
                      <div>
                        <p className="text-xs uppercase tracking-[0.3em] text-slate-500">
                          #{order.id.slice(0, 8)}
                        </p>
                        <p className="font-semibold text-white">
                          R{order.total_price?.toFixed(2) ?? "0.00"}
                        </p>
                        <p className="text-xs text-slate-500">
                          {formatDistanceToNow(new Date(order.created_at), {
                            addSuffix: true,
                          })}
                        </p>
                      </div>
                      <div className="text-right text-xs text-slate-500">
                        <p>{order.total_quantity} items</p>
                        <p>{order.user_id ?? "Guest"}</p>
                      </div>
                    </div>

                    <div className="mt-3 rounded-lg bg-slate-900/60 p-2 text-xs text-slate-400">
                      <p className="text-[10px] uppercase tracking-[0.4em] text-slate-500">
                        Items
                      </p>
                      <ul className="mt-1 space-y-1">
                        {(order.items ?? []).slice(0, 4).map((item, index) => {
                          const displayItem = item as DisplayOrderItem;
                          const name = resolveItemName(displayItem);
                          const quantity = resolveItemQuantity(displayItem);
                          return (
                          <li
                            key={`${order.id}-${displayItem.ProductID ?? name}-${index}`}
                            className="flex justify-between text-white"
                          >
                            <span>{name}</span>
                            <span className="text-slate-400">
                              x{quantity}
                            </span>
                          </li>
                          );
                        })}
                        {(order.items ?? []).length > 4 ? (
                          <li className="text-[10px] uppercase tracking-[0.3em] text-slate-500">
                            + more
                          </li>
                        ) : null}
                      </ul>
                    </div>

                    <div className="mt-3">
                      <UpdateOrderStatusForm
                        orderId={order.id}
                        currentStatus={order.status}
                      />
                    </div>
                  </article>
                ))
              )}
            </div>
          </section>
        ))}
      </div>
    </div>
  );
};
</file>

<file path="admin/src/components/orders/UpdateOrderStatusForm.tsx">
"use client";

import { useFormState } from "react-dom";
import { SubmitButton } from "@/components/forms/SubmitButton";
import {
  type OrderActionState,
  updateOrderStatusAction,
} from "@/lib/data/orders-actions";
import type { OrderStatus } from "@/lib/types";

type Props = {
  orderId: string;
  currentStatus: OrderStatus;
};

const initialState: OrderActionState = {};
const STATUSES: OrderStatus[] = [
  "pending",
  "processing",
  "completed",
  "cancelled",
];

export const UpdateOrderStatusForm = ({ orderId, currentStatus }: Props) => {
  const [state, formAction] = useFormState(
    updateOrderStatusAction,
    initialState,
  );

  return (
    <form action={formAction} className="space-y-2 text-sm text-slate-200">
      <input type="hidden" name="orderId" value={orderId} />
      <label className="space-y-1 text-xs uppercase tracking-[0.3em] text-slate-500">
        Status
        <select
          name="status"
          defaultValue={currentStatus}
          className="mt-1 w-full rounded-lg border border-white/10 bg-slate-900/60 px-3 py-2 text-white outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-400/40"
        >
          {STATUSES.map((status) => (
            <option key={status} value={status}>
              {status}
            </option>
          ))}
        </select>
      </label>

      {state.error ? (
        <p className="text-xs text-rose-400">{state.error}</p>
      ) : null}
      {state.success ? (
        <p className="text-xs text-emerald-400">{state.success}</p>
      ) : null}

      <SubmitButton
        label="Update status"
        loadingLabel="Updating..."
        className="bg-slate-800 px-3 py-2 text-xs"
      />
    </form>
  );
};
</file>

<file path="admin/src/lib/auth/actions.ts">
"use server";

import { redirect } from "next/navigation";
import { createSupabaseServerClient } from "@/lib/supabase/server";
import { fetchAdminProfileWithClient } from "./session";
import type { AuthActionState } from "./types";
import type { Database } from "@/lib/database.types";

const sanitize = (value: FormDataEntryValue | null) =>
  String(value ?? "").trim();

export async function loginAction(
  _prevState: AuthActionState,
  formData: FormData,
): Promise<AuthActionState> {
  const email = sanitize(formData.get("email")).toLowerCase();
  const password = sanitize(formData.get("password"));
  const redirectTo = sanitize(formData.get("redirectTo")) || "/dashboard";

  if (!email || !password) {
    return { error: "Email and password are required." };
  }

  const supabase = await createSupabaseServerClient();
  const { error } = await supabase.auth.signInWithPassword({
    email,
    password,
  });

  if (error) {
    return { error: error.message };
  }

  const profile = await fetchAdminProfileWithClient(supabase);

  if (!profile) {
    await supabase.auth.signOut();
    return { error: "You do not have admin access." };
  }

  redirect(redirectTo || "/dashboard");
}

export async function registerAction(
  _prevState: AuthActionState,
  formData: FormData,
): Promise<AuthActionState> {
  const email = sanitize(formData.get("email")).toLowerCase();
  const password = sanitize(formData.get("password"));
  const fullName = sanitize(formData.get("fullName")) || undefined;
  const inviteCode = sanitize(formData.get("inviteCode"));

  if (!email || !password) {
    return { error: "Email and password are required." };
  }

  const requiredInvite = process.env.ADMIN_INVITE_CODE;
  if (requiredInvite && inviteCode !== requiredInvite) {
    return { error: "Invalid invite code." };
  }

  const supabase = await createSupabaseServerClient();
  const { data, error } = await supabase.auth.signUp({
    email,
    password,
    options: {
      data: {
        role: "admin",
        full_name: fullName,
      },
    },
  });

  if (error) {
    return { error: error.message };
  }

  if (data.user) {
    const profileData: Database["public"]["Tables"]["profiles"]["Insert"] = {
      id: data.user.id,
      email,
      full_name: fullName,
      role: "admin",
    };
    // @ts-expect-error - Supabase type inference issue with Database types
    await supabase.from("profiles").upsert(profileData);
  }

  redirect("/login?registered=1");
}

export async function logoutAction() {
  const supabase = await createSupabaseServerClient();
  await supabase.auth.signOut();
  redirect("/login");
}
</file>

<file path="admin/src/lib/auth/index.ts">
// Export actions and types (safe for client components)
export * from "./actions";
export * from "./types";

// Session functions are server-only - import directly from "./session" in server components
</file>

<file path="admin/src/lib/auth/session.ts">
import type { User } from "@supabase/supabase-js";
import { redirect } from "next/navigation";
import { cache } from "react";
import type { SupabaseServerClient } from "@/lib/supabase/server";
import { createSupabaseServerClient } from "@/lib/supabase/server";
import type { AdminProfileSummary } from "@/lib/types";

const PROFILE_COLUMNS = "id,email,full_name,role";

async function fetchProfile(
  client: SupabaseServerClient,
): Promise<AdminProfileSummary | null> {
  const {
    data: { user },
    error: authError,
  } = await client.auth.getUser();

  if (authError || !user) {
    return null;
  }

  const { data, error } = await client
    .from("profiles")
    .select(PROFILE_COLUMNS)
    .eq("id", user.id)
    .maybeSingle();

  if (error) {
    console.error("Failed to load admin profile", error);
    return null;
  }

  if (!data || (data as { role: string | null }).role !== "admin") {
    return null;
  }

  return data as AdminProfileSummary;
}

export const getSupabaseUser = cache(async (): Promise<User | null> => {
  const supabase = await createSupabaseServerClient();
  const {
    data: { user },
  } = await supabase.auth.getUser();

  return user;
});

export const getAdminProfile = cache(
  async (): Promise<AdminProfileSummary | null> => {
    const supabase = await createSupabaseServerClient();
    return fetchProfile(supabase);
  },
);

export const requireAdminProfile = async () => {
  const profile = await getAdminProfile();

  if (!profile) {
    redirect("/login?error=not_authorized");
  }

  return profile;
};

export const fetchAdminProfileWithClient = (client: SupabaseServerClient) =>
  fetchProfile(client);
</file>

<file path="admin/src/lib/auth/types.ts">
export type AuthActionState = {
  error?: string;
  message?: string;
};
</file>

<file path="admin/src/lib/data/dashboard.ts">
import { createSupabaseServerClient } from "@/lib/supabase/server";
import type { ProductRecord, SupabaseOrderRecord } from "@/lib/types";

export type RevenuePoint = {
  date: string;
  total: number;
};

export type DashboardStats = {
  totalOrders: number;
  pendingOrders: number;
  fulfillmentRate: number;
  revenue: number;
  productCount: number;
  lowStockCount: number;
};

export type DashboardData = {
  stats: DashboardStats;
  recentOrders: SupabaseOrderRecord[];
  lowInventory: ProductRecord[];
  revenueSeries: RevenuePoint[];
};

const asCurrency = (value: number) =>
  Math.round((value + Number.EPSILON) * 100) / 100;

const buildRevenueSeries = (orders: SupabaseOrderRecord[]): RevenuePoint[] => {
  const buckets = new Map<string, number>();

  orders.forEach((order) => {
    const dateKey = new Date(order.created_at).toISOString().slice(0, 10);
    const total = buckets.get(dateKey) ?? 0;
    buckets.set(dateKey, total + (order.total_price ?? 0));
  });

  return Array.from(buckets.entries())
    .sort(([a], [b]) => (a > b ? 1 : -1))
    .slice(-7)
    .map(([date, total]) => ({
      date,
      total: asCurrency(total),
    }));
};

export const fetchDashboardData = async (): Promise<DashboardData> => {
  const supabase = await createSupabaseServerClient();

  const [
    { data: ordersRaw, error: ordersError },
    { data: productsRaw, count: productCount, error: productsError },
  ] = await Promise.all([
    supabase
      .from("orders")
      .select(
        "id,user_id,items,total_price,total_quantity,status,created_at,updated_at",
      )
      .order("created_at", { ascending: false })
      .limit(50),
    supabase
      .from("products")
      .select("id,name,category,price,stock,image_url,badge,updated_at", {
        count: "exact",
      }),
  ]);

  if (ordersError) {
    console.error("Failed to fetch orders for dashboard", ordersError);
  }

  if (productsError) {
    console.error("Failed to fetch products for dashboard", productsError);
  }

  const orders = (ordersRaw ?? []) as SupabaseOrderRecord[];
  const products = (productsRaw ?? []) as ProductRecord[];

  const totalOrders = orders.length;
  const revenue = asCurrency(
    orders.reduce((sum, order) => sum + (order.total_price ?? 0), 0),
  );
  const pendingOrders = orders.filter(
    (order) => order.status === "pending",
  ).length;
  const completedOrders = orders.filter(
    (order) => order.status === "completed",
  ).length;
  const fulfillmentRate = totalOrders
    ? Math.round((completedOrders / totalOrders) * 100)
    : 0;

  const lowInventory = products
    .filter((product) => (product.stock ?? 0) <= 10)
    .slice(0, 5);

  return {
    stats: {
      totalOrders,
      revenue,
      pendingOrders,
      fulfillmentRate,
      productCount: productCount ?? products.length,
      lowStockCount: lowInventory.length,
    },
    recentOrders: orders.slice(0, 6),
    lowInventory,
    revenueSeries: buildRevenueSeries(orders),
  };
};
</file>

<file path="admin/src/lib/data/orders-actions.ts">
"use server";

import { formatISO } from "date-fns";
import { revalidatePath } from "next/cache";
import { createSupabaseServerClient } from "@/lib/supabase/server";
import type { OrderStatus } from "@/lib/types";
import type { Database } from "@/lib/database.types";

export type OrderActionState = {
  error?: string;
  success?: string;
};

const normalizeStatus = (value: string): OrderStatus | null => {
  const candidates: OrderStatus[] = [
    "pending",
    "processing",
    "completed",
    "cancelled",
  ];
  return candidates.find((candidate) => candidate === value) ?? null;
};

export const updateOrderStatusAction = async (
  _prev: OrderActionState,
  formData: FormData,
): Promise<OrderActionState> => {
  const orderId = String(formData.get("orderId") ?? "").trim();
  const statusValue = String(formData.get("status") ?? "").trim();
  const status = normalizeStatus(statusValue);

  if (!orderId || !status) {
    return { error: "Order ID or status missing." };
  }

  const supabase = await createSupabaseServerClient();
  const updateData: Database["public"]["Tables"]["orders"]["Update"] = {
    status,
    updated_at: formatISO(new Date()),
  };
  const { error } = await supabase
    .from("orders")
    // @ts-ignore - Supabase type inference issue with Database types
    .update(updateData)
    .eq("id", orderId);

  if (error) {
    console.error("Failed to update order status", error);
    return { error: error.message };
  }

  revalidatePath("/orders");
  return { success: `Marked as ${status}.` };
};
</file>

<file path="admin/src/lib/data/orders.ts">
import { createSupabaseServerClient } from "@/lib/supabase/server";
import type { SupabaseOrderRecord } from "@/lib/types";

export type OrdersBoardData = {
  orders: SupabaseOrderRecord[];
};

export const fetchOrdersBoard = async (): Promise<OrdersBoardData> => {
  const supabase = await createSupabaseServerClient();

  const { data, error } = await supabase
    .from("orders")
    .select(
      "id,user_id,total_price,total_quantity,status,items,created_at,updated_at",
    )
    .order("created_at", { ascending: false })
    .limit(80);

  if (error) {
    console.error("Failed to load orders", error);
    return { orders: [] };
  }

  return {
    orders: (data ?? []) as SupabaseOrderRecord[],
  };
};
</file>

<file path="admin/src/lib/data/products-actions.ts">
"use server";

import { revalidatePath } from "next/cache";
import { createSupabaseServerClient } from "@/lib/supabase/server";
import type { Database } from "@/lib/database.types";

export type ProductActionState = {
  error?: string;
  success?: string;
};

const sanitize = (value: FormDataEntryValue | null) =>
  String(value ?? "").trim();

export const createProductAction = async (
  _prev: ProductActionState,
  formData: FormData,
): Promise<ProductActionState> => {
  const name = sanitize(formData.get("name"));
  const category = sanitize(formData.get("category"));
  const description = sanitize(formData.get("description"));
  const badge = sanitize(formData.get("badge")) || null;
  const imageUrl = sanitize(formData.get("image_url")) || null;
  const price = Number(formData.get("price") ?? 0);
  const stock = Number(formData.get("stock") ?? 0);

  if (!name || !category) {
    return { error: "Name and category are required." };
  }

  if (Number.isNaN(price) || price <= 0) {
    return { error: "Price must be greater than zero." };
  }

  const supabase = await createSupabaseServerClient();
  const productData: Database["public"]["Tables"]["products"]["Insert"] = {
    name,
    category,
    description: description || null,
    badge,
    image_url: imageUrl,
    price,
    stock: Number.isNaN(stock) ? 0 : stock,
  };
  // @ts-expect-error - Supabase type inference issue with Database types
  const { error } = await supabase.from("products").insert(productData);

  if (error) {
    console.error("Failed to create product", error);
    return { error: error.message };
  }

  revalidatePath("/menu");
  revalidatePath("/products");
  return { success: `${name} added to menu.` };
};

export const updateProductAction = async (
  _prev: ProductActionState,
  formData: FormData,
): Promise<ProductActionState> => {
  const id = sanitize(formData.get("id"));
  const priceValue = formData.get("price");
  const stockValue = formData.get("stock");
  const badge = sanitize(formData.get("badge")) || null;
  const description = sanitize(formData.get("description")) || null;

  if (!id) {
    return { error: "Missing product identifier." };
  }

  const price = priceValue !== null ? Number(priceValue) : undefined;
  const stock = stockValue !== null ? Number(stockValue) : undefined;

  const payload: Record<string, unknown> = {
    badge,
    description,
  };

  if (price !== undefined && !Number.isNaN(price)) {
    payload.price = price;
  }

  if (stock !== undefined && !Number.isNaN(stock)) {
    payload.stock = stock;
  }

  const supabase = await createSupabaseServerClient();
  const updateData: Database["public"]["Tables"]["products"]["Update"] = {
    ...payload,
  };
  const { error } = await supabase
    .from("products")
    // @ts-ignore - Supabase type inference issue with Database types
    .update(updateData)
    .eq("id", id);

  if (error) {
    console.error("Failed to update product", error);
    return { error: error.message };
  }

  revalidatePath("/menu");
  revalidatePath("/products");
  return { success: "Product updated." };
};
</file>

<file path="admin/src/lib/data/products.ts">
import { createSupabaseServerClient } from "@/lib/supabase/server";
import type { ProductRecord } from "@/lib/types";

export const fetchProductCatalog = async (): Promise<ProductRecord[]> => {
  const supabase = await createSupabaseServerClient();
  const { data, error } = await supabase
    .from("products")
    .select(
      "id,name,category,price,stock,badge,description,image_url,updated_at",
    )
    .order("updated_at", { ascending: false });

  if (error) {
    console.error("Failed to fetch products", error);
    return [];
  }

  return (data ?? []) as ProductRecord[];
};
</file>

<file path="admin/src/lib/supabase/client.ts">
"use client";

import { createBrowserClient } from "@supabase/ssr";
import { getSupabaseConfig } from "./config";

export const createSupabaseBrowserClient = () =>
  createBrowserClient(getSupabaseConfig().url, getSupabaseConfig().anonKey);

export type SupabaseBrowserClient = ReturnType<
  typeof createSupabaseBrowserClient
>;
</file>

<file path="admin/src/lib/supabase/config.ts">
const getEnv = (key: string) => {
  const value = process.env[key];
  if (!value) {
    throw new Error(`Missing required environment variable: ${key}`);
  }
  return value;
};

export const getSupabaseConfig = () => ({
  url: getEnv("NEXT_PUBLIC_SUPABASE_URL"),
  anonKey: getEnv("NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY"),
});
</file>

<file path="admin/src/lib/supabase/index.ts">
export * from "./client";
export * from "./server";
</file>

<file path="admin/src/lib/supabase/server.ts">
import { createServerClient } from "@supabase/ssr";
import { cookies } from "next/headers";
import { getSupabaseConfig } from "./config";
import { Database } from "@/lib/database.types";

export const createSupabaseServerClient = async () => {
  const cookieStore = await cookies();
  const { url, anonKey } = getSupabaseConfig();

  return createServerClient<Database>(url, anonKey, {
    cookies: {
      getAll() {
        return cookieStore.getAll();
      },
      setAll(cookiesToSet) {
        try {
          cookiesToSet.forEach(({ name, value }) => {
            cookieStore.set(name, value);
          });
        } catch {
          // noop: called from a Server Component
        }
      },
    },
  });
};

export type SupabaseServerClient = Awaited<
  ReturnType<typeof createSupabaseServerClient>
>;
</file>

<file path="admin/src/lib/types/base.ts">
export interface Reward {
  name: string;
  pointsrequired: number;
}

export interface Yellowemption {
  name: string;
  date: string;
}

export type PaymentMethod = "instore" | "Cepitec transfer";

// Compatibility aliases that mirror the client naming convention
export type yellowemption = Yellowemption;
export type paymentMethod = PaymentMethod;
</file>

<file path="admin/src/lib/types/index.ts">
export * from "./base";
export * from "./orders";
export * from "./products";
export * from "./users";
</file>

<file path="admin/src/lib/types/orders.ts">
import type { PaymentMethod } from "./base";
import type { Product } from "./products";

export interface OrderItem {
  name: string;
  quantity: number;
}

export type CartItem = Product & {
  quantity: number;
};

export interface OrderDetails {
  userId: string;
  items: CartItem[];
  totalAmount: number;
  shippingAddress: string;
  paymentMethod: PaymentMethod;
}

export type OrderStatus = "pending" | "processing" | "completed" | "cancelled";
export type OrderType = "Takeaway" | "Photo boot" | "Laundry";

export interface Order {
  orderId: string;
  userId?: string;
  orderDate: Date;
  products: CartItem[];
  quantity: number;
  totalAmount: number;
  status: OrderStatus;
  type: OrderType;
  location?: string;
  paymentMethod?: PaymentMethod;
  deliveryAddress?: string;
  shippingAddress?: string;
}

export interface SupabaseOrderRecord {
  id: string;
  user_id: string | null;
  items: CartItem[];
  total_price: number;
  total_quantity: number;
  status: OrderStatus;
  created_at: string;
  updated_at?: string;
}
</file>

<file path="admin/src/lib/types/products.ts">
export interface NutritionalInfo {
  calories: number;
  protein: string;
  carbs: string;
  fat: string;
  fiber: string;
  sugar: string;
}

export interface Product {
  ProductID: string;
  Name: string;
  Description: string[];
  Price: number;
  Image?: string;
  badge?: string;
  rating?: number;
  nutritional?: NutritionalInfo;
  allergens?: string[];
  isVegetarian?: boolean;
  isSpicy?: boolean;
}

export type ProductCategory = {
  id: number;
  Name: string;
  Products: Product[];
  Image?: string;
  Description?: string;
}[];

export interface ProductRecord {
  id: string;
  name: string;
  description?: string;
  category?: string;
  price: number;
  stock?: number;
  image_url?: string;
  badge?: string;
  created_at?: string;
  updated_at?: string;
  is_featured?: boolean;
}
</file>

<file path="admin/src/lib/types/users.ts">
import type { PaymentMethod, Reward, Yellowemption } from "./base";
import type { Order } from "./orders";

export type UserRole =
  | "coFounder"
  | "Ceo"
  | "Manager"
  | "kitchenStaff"
  | "carWashStaff"
  | "Cashier"
  | "Customer"
  | "admin";

export interface UserPreferences {
  dietaryRestrictions: string[];
  favoriteItems: string[];
  preferyellowCarWashServices: string[];
  preferyellowPaymentMethod: PaymentMethod;
  communicationPreferences: {
    email: boolean;
    sms: boolean;
    promotions: boolean;
  };
}

export interface UserProfile {
  uid: string;
  displayName: string | null;
  email: string | null;
  emailVerified: boolean;
  photoURL: string | null;
  phoneNumber: string | null;
  role: UserRole;
  address: string;
  city: string;
  state: string;
  zipCode: string;
  country: string;
  theme: "system" | "light" | "dark";
  orderHistory: Order[];
  loyaltyPointsBalance?: number;
  tierStatus: string;
  rewardsAvailable: Reward[];
  yellowemptionHistory: Yellowemption[];
  personalizedPromotions: string[];
  referralCode: string;
  carWashCount?: number;
  preferences: UserPreferences;
  savedPaymentMethods?: PaymentMethod[];
  createdAt: Date;
  updatedAt: Date;
  lastLogin?: Date;
}

export interface AdminProfileSummary {
  id: string;
  email?: string;
  full_name?: string;
  role: UserRole;
}
</file>

<file path="admin/src/lib/database.types.ts">
export type Json =
  | string
  | number
  | boolean
  | null
  | { [key: string]: Json | undefined }
  | Json[]

export interface Database {
  public: {
    Tables: {
      profiles: {
        Row: {
          id: string
          email: string | null
          display_name: string | null
          full_name: string | null
          phone: string | null
          role: string | null
          metadata: Json | null
          created_at: string
        }
        Insert: {
          id?: string
          email?: string | null
          display_name?: string | null
          full_name?: string | null
          phone?: string | null
          role?: string | null
          metadata?: Json | null
          created_at?: string
        }
        Update: {
          id?: string
          email?: string | null
          display_name?: string | null
          full_name?: string | null
          phone?: string | null
          role?: string | null
          metadata?: Json | null
          created_at?: string
        }
      }
      products: {
        Row: {
          id: string
          name: string
          slug: string | null
          description: string | null
          price: number | null
          category: string | null
          image_url: string | null
          stock: number | null
          likes: number | null
          badge: string | null
          created_at: string
        }
        Insert: {
          id?: string
          name: string
          slug?: string | null
          description?: string | null
          price?: number | null
          category?: string | null
          image_url?: string | null
          stock?: number | null
          likes?: number | null
          badge?: string | null
          created_at?: string
        }
        Update: {
          id?: string
          name?: string
          slug?: string | null
          description?: string | null
          price?: number | null
          category?: string | null
          image_url?: string | null
          stock?: number | null
          likes?: number | null
          badge?: string | null
          created_at?: string
        }
      }
      comments: {
        Row: {
          id: string
          product_id: string | null
          user_id: string | null
          user_name: string | null
          body: string
          created_at: string
        }
        Insert: {
          id?: string
          product_id?: string | null
          user_id?: string | null
          user_name?: string | null
          body: string
          created_at?: string
        }
        Update: {
          id?: string
          product_id?: string | null
          user_id?: string | null
          user_name?: string | null
          body?: string
          created_at?: string
        }
      }
      orders: {
        Row: {
          id: string
          user_id: string | null
          items: Json
          total_price: number
          total_quantity: number
          status: string | null
          created_at: string
          updated_at: string | null
        }
        Insert: {
          id?: string
          user_id?: string | null
          items: Json
          total_price: number
          total_quantity: number
          status?: string | null
          created_at?: string
          updated_at?: string | null
        }
        Update: {
          id?: string
          user_id?: string | null
          items?: Json
          total_price?: number
          total_quantity?: number
          status?: string | null
          created_at?: string
          updated_at?: string | null
        }
      }
      user_favorites: {
        Row: {
          user_id: string
          product_id: string
          created_at: string | null
        }
        Insert: {
          user_id: string
          product_id: string
          created_at?: string | null
        }
        Update: {
          user_id?: string
          product_id?: string
          created_at?: string | null
        }
      }
    }
    Views: {
      [_ in never]: never
    }
    Functions: {
      [_ in never]: never
    }
    Enums: {
      [_ in never]: never
    }
  }
}
</file>

<file path="admin/.gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# env files (can opt-in for committing if needed)
.env*

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts
</file>

<file path="admin/biome.json">
{
  "$schema": "https://biomejs.dev/schemas/2.2.0/schema.json",
  "vcs": {
    "enabled": true,
    "clientKind": "git",
    "useIgnoreFile": true
  },
  "files": {
    "ignoreUnknown": true,
    "includes": ["**", "!node_modules", "!.next", "!dist", "!build"]
  },
  "formatter": {
    "enabled": true,
    "indentStyle": "space",
    "indentWidth": 2
  },
  "linter": {
    "enabled": true,
    "rules": {
      "recommended": true,
      "suspicious": {
        "noUnknownAtRules": "off"
      }
    },
    "domains": {
      "next": "recommended",
      "react": "recommended"
    }
  },
  "assist": {
    "actions": {
      "source": {
        "organizeImports": "on"
      }
    }
  }
}
</file>

<file path="admin/next.config.ts">
import type { NextConfig } from "next";

const nextConfig: NextConfig = {
  /* config options here */
};

export default nextConfig;
</file>

<file path="admin/package.json">
{
  "name": "admin",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "biome check",
    "format": "biome format --write"
  },
  "dependencies": {
    "@supabase/ssr": "^0.7.0",
    "@supabase/supabase-js": "^2.81.1",
    "date-fns": "^4.1.0",
    "next": "16.0.3",
    "react": "19.2.0",
    "react-dom": "19.2.0",
    "react-icons": "^5.5.0"
  },
  "devDependencies": {
    "@biomejs/biome": "2.2.0",
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "tailwindcss": "^4",
    "typescript": "^5"
  }
}
</file>

<file path="admin/postcss.config.mjs">
const config = {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};

export default config;
</file>

<file path="admin/proxy.ts">
import { createServerClient } from "@supabase/ssr";
import { type NextRequest, NextResponse } from "next/server";
import { getSupabaseConfig } from "@/lib/supabase/config";

const AUTH_ROUTES = ["/login", "/register"];

export async function proxy(req: NextRequest) {
  const res = NextResponse.next({
    request: {
      headers: req.headers,
    },
  });

  const { url, anonKey } = getSupabaseConfig();
  const supabase = createServerClient(url, anonKey, {
    cookies: {
      getAll() {
        return req.cookies.getAll();
      },
      setAll(cookiesToSet) {
        cookiesToSet.forEach(({ name, value, options }) => {
          res.cookies.set(name, value, options);
        });
      },
    },
  });

  const {
    data: { user },
  } = await supabase.auth.getUser();

  const pathname = req.nextUrl.pathname;
  const isAuthRoute = AUTH_ROUTES.some((route) => pathname.startsWith(route));

  if (!user && !isAuthRoute) {
    const redirectUrl = req.nextUrl.clone();
    redirectUrl.pathname = "/login";
    redirectUrl.searchParams.set("redirectTo", pathname);
    return NextResponse.redirect(redirectUrl);
  }

  if (user && isAuthRoute) {
    return NextResponse.redirect(new URL("/dashboard", req.url));
  }

  return res;
}

export const config = {
  matcher: ["/((?!_next/static|_next/image|favicon.ico).*)"],
};
</file>

<file path="admin/README.md">
This is the administrative portal for PA Catering, built with the Next.js App Router, Supabase, and Tailwind CSS.

## Prerequisites

1. Create (or reuse) a Supabase project.
2. Copy the public URL and anon key into an `.env.local` file:

```bash
NEXT_PUBLIC_SUPABASE_URL=...
NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY=...
# Optional: require invite code for new admins
ADMIN_INVITE_CODE=super-secure-code
```

## Available scripts

```bash
npm run dev     # Start the local dev server
npm run build   # Create a production build
npm run start   # Run the production build locally
npm run lint    # Biome lint pass
npm run format  # Biome format with write
```

## Directory overview

- `src/app`: App Router routes (auth, dashboard, menu, orders, etc.).
- `src/lib/supabase`: Shared browser/server Supabase clients.
- `src/lib/types`: Product, order, and user domain models used across features.

## Deployment

Deploy like any other Next.js project (Vercel, Render, Docker, etc.). Ensure the Supabase environment variables are provided in the hosting platform.
</file>

<file path="admin/tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2017",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts",
    "**/*.mts"
  ],
  "exclude": ["node_modules"]
}
</file>

<file path="client/public/file.svg">
<svg fill="none" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M14.5 13.5V5.41a1 1 0 0 0-.3-.7L9.8.29A1 1 0 0 0 9.08 0H1.5v13.5A2.5 2.5 0 0 0 4 16h8a2.5 2.5 0 0 0 2.5-2.5m-1.5 0v-7H8v-5H3v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1M9.5 5V2.12L12.38 5zM5.13 5h-.62v1.25h2.12V5zm-.62 3h7.12v1.25H4.5zm.62 3h-.62v1.25h7.12V11z" clip-rule="evenodd" fill="#666" fill-rule="evenodd"/></svg>
</file>

<file path="client/public/globe.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.27 14.1a6.5 6.5 0 0 0 3.67-3.45q-1.24.21-2.7.34-.31 1.83-.97 3.1M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.48-1.52a7 7 0 0 1-.96 0H7.5a4 4 0 0 1-.84-1.32q-.38-.89-.63-2.08a40 40 0 0 0 3.92 0q-.25 1.2-.63 2.08a4 4 0 0 1-.84 1.31zm2.94-4.76q1.66-.15 2.95-.43a7 7 0 0 0 0-2.58q-1.3-.27-2.95-.43a18 18 0 0 1 0 3.44m-1.27-3.54a17 17 0 0 1 0 3.64 39 39 0 0 1-4.3 0 17 17 0 0 1 0-3.64 39 39 0 0 1 4.3 0m1.1-1.17q1.45.13 2.69.34a6.5 6.5 0 0 0-3.67-3.44q.65 1.26.98 3.1M8.48 1.5l.01.02q.41.37.84 1.31.38.89.63 2.08a40 40 0 0 0-3.92 0q.25-1.2.63-2.08a4 4 0 0 1 .85-1.32 7 7 0 0 1 .96 0m-2.75.4a6.5 6.5 0 0 0-3.67 3.44 29 29 0 0 1 2.7-.34q.31-1.83.97-3.1M4.58 6.28q-1.66.16-2.95.43a7 7 0 0 0 0 2.58q1.3.27 2.95.43a18 18 0 0 1 0-3.44m.17 4.71q-1.45-.12-2.69-.34a6.5 6.5 0 0 0 3.67 3.44q-.65-1.27-.98-3.1" fill="#666"/></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"/></clipPath></defs></svg>
</file>

<file path="client/public/next.svg">
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 394 80"><path fill="#000" d="M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z"/><path fill="#000" d="M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z"/></svg>
</file>

<file path="client/public/robots.txt">
# Allow all web crawlers to index the site
User-agent: *
Allow: /

# Sitemap location
Sitemap: https://yourdomain.com/sitemap.xml

# Disallow admin and API routes
Disallow: /admin/
Disallow: /api/

# Allow media files
Allow: /public/

# Crawl-delay: 10  # Uncomment and adjust if needed to limit crawl rate
</file>

<file path="client/public/vercel.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1155 1000"><path d="m577.3 0 577.4 1000H0z" fill="#fff"/></svg>
</file>

<file path="client/public/window.svg">
<svg fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 2.5h13v10a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1zM0 1h16v11.5a2.5 2.5 0 0 1-2.5 2.5h-11A2.5 2.5 0 0 1 0 12.5zm3.75 4.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5M7 4.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0m1.75.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5" fill="#666"/></svg>
</file>

<file path="client/src/app/(auth)/login/loading.tsx">
import Loading from '@/components/ui/Loading';

export default function LoadingPage() {
	return <Loading message='Loading Login Page...' />;
}
</file>

<file path="client/src/app/(auth)/login/page.tsx">
import Main from "@/components/ui/layout/Main";
import LoginForm from "@/lib/forms/LoginForm";


export default function LoginPage() {
	

	return (
		<Main tittle="Log In">
			<LoginForm />
		</Main>
	);
}
</file>

<file path="client/src/app/(auth)/register/loading.tsx">
import Loading from '@/components/ui/Loading';

export default function LoadingPage() {
	return <Loading message='Loading Registration Page...' />;
}
</file>

<file path="client/src/app/(auth)/register/page.tsx">
import Main from '@/components/ui/layout/Main';
import RegisterForm from '@/lib/forms/RegisterForm';

const RegisterPage = () => {

	return (
		<Main tittle='Register'>
			<RegisterForm />
		</Main>
	);
};

export default RegisterPage;
</file>

<file path="client/src/app/about/components/CompanyDescription.tsx">
import React from 'react';
import Icon from '@/components/ui/Icon';
import { IoBusinessSharp } from 'react-icons/io5';
import { VscSymbolStructure } from 'react-icons/vsc';
import { RxValue } from 'react-icons/rx';
import Section from '@/components/ui/layout/Section';
const CompanyDescription: React.FC = () => {
	return (
		<Section
			heading='PA Luxe Creation PTY Ltd was established in 2024 by Precious Nyathi. Precious identified a need
					in Evander for modern, affordable services that combined convenience and quality. This
					led to the concept of a dual-service establishment offering both delicious,
					budget-friendly meals and premium car care.'
			tittle='Company Description'
			Icon={IoBusinessSharp}>
			<article>
				<Icon
					icon={VscSymbolStructure}
					variant='inlineCircular'
					heading='Legal Structure'
				/>
				<p>
					PA Luxe Creation PTY Ltd is registeyellow as a Private Company (PTY) in 2023. This structure
					was chosen to provide limited liability protection to the owners, establish the business
					as a separate legal entity, and offer potential tax advantages. Registration as a PTY also
					enhances the company&apos;s cyellowibility and facilitates future fundraising efforts.
				</p>
			</article>

			<article>
				<Icon
					icon={RxValue}
					heading='Unique Value Proposition'
				/>
				<p className='text-white'>
					&ldquo;PA Luxe Creation delivers unbeatable pricing, premium service quality, and
					cutting-edge convenience through culinary excellence and industrial engineering.&rdquo;
				</p>
			</article>
		</Section>
	);
};

export default CompanyDescription;
</file>

<file path="client/src/app/about/components/CoreValues.tsx">
import { IoBulbOutline, IoShieldCheckmarkOutline, IoPeopleOutline } from 'react-icons/io5';
import Icon from '@/components/ui/Icon';
import Section from '@/components/ui/layout/Section';

const CoreValues: React.FC = () => {
	return (
		<Section tittle='Our Core Values'>
			<div className='mt-6 grid grid-cols-1 md:grid-cols-2 gap-2  text-center'>
				<article>
					<Icon
						icon={IoBulbOutline}
						heading='Innovation'
					/>
					<p>We constantly seek new ways to enhance our services and customer experience.</p>
				</article>
				<article>
					<Icon
						icon={IoShieldCheckmarkOutline}
						heading='Quality'
					/>
					<p>We are committed to providing high-quality food and exceptional Photo boot services.</p>
				</article>
				<article>
					<Icon
						icon={IoPeopleOutline}
						heading='Community Trust'
					/>
					<p>
						We aim to build strong relationships with our customers and contribute positively to the
						Evander community.
					</p>
				</article>
			</div>
		</Section>
	);
};

export default CoreValues;
</file>

<file path="client/src/app/about/components/KeyHighlights.tsx">
// components/KeyHighlights.tsx
import React from 'react';
import { IoBusiness, IoPricetag, IoCalendar } from 'react-icons/io5';
import Icon from '@/components/ui/Icon';
import Section from '@/components/ui/layout/Section';

const KeyHighlights = () => {
	return (
		<Section tittle='Key Highlights of PA Luxe Creation'>
			<div className='grid grid-cols-1 md:grid-cols-2  gap-2 '>
				{/* Highlight 1: Unique Combination of Services */}
				<article>
					<Icon icon={IoBusiness} />
					<h3>Unique Service Combination</h3>
					<p className=' text-center'>
						PA Luxe Creation stands out by offering a convenient combination of a Photo boot and an
						eatery, catering to multiple needs in one stop.
					</p>
				</article>

				{/* Highlight 2: Competitive Photo boot Pricing */}
				<article>
					<Icon icon={IoPricetag} />
					<h3>Competitive Photo boot Pricing</h3>
					<p className=' text-center'>
						We offer attractive and competitive pricing for our Photo boot services, providing
						excellent value for our customers.
					</p>
				</article>

				{/* Highlight 3: Advanced Booking and Modern POS */}
				<article>
					<Icon icon={IoCalendar} />
					<h3>Advanced Systems</h3>
					<p className=' text-center'>
						Utilizing an advanced booking system and modern POS integration for a seamless and
						efficient customer experience.
					</p>
				</article>
			</div>
		</Section>
	);
};

export default KeyHighlights;
</file>

<file path="client/src/app/about/components/KeyLeadership.tsx">
import { IoPeopleOutline, IoCheckmarkCircleOutline } from 'react-icons/io5';
import Icon from '@/components/ui/Icon';
import Section from '@/components/ui/layout/Section';

const KeyLeadership: React.FC = () => {
	return (
		<Section
			tittle='Key Leadership'
			Icon={IoPeopleOutline}
			heading='PA Luxe Creation is driven by a dedicated leadership team with a diverse range of expertise.
					A key asset to our team is A.E.N Nyathi, an accomplished Industrial Engineer and
					Full-Stack Designer.'>
			<article className='leading-relaxed p-4 mt-4 text-base md:text-lg'>
				<p>A.E.N Nyathi brings a wealth of knowledge and skills to PA Luxe Creation, including:</p>
				<div className='grid grid-cols-1 md:grid-cols-2 gap-4 mt-4'>
					{[
						'Graphic Design (Photoshop, Illustrator)',
						'Web Development (full stack)',
						'Accounting & Electrical Systems',
						'Operational Workflow Optimization (Fusion 360)',
						'AI Agents (n8n)',
					].map((skill) => (
						<div
							key={skill}
							className='flex items-center gap-2'>
							<Icon
								icon={IoCheckmarkCircleOutline}
								variant='inline'
								className='text-xl text-yellow-500 flex-shrink-0'
							/>
							<span>{skill}</span>
						</div>
					))}
				</div>
				<p className='mt-4'>
					This unique blend of technical and creative expertise is instrumental in driving Central
					Eatery&apos;s success, from implementing innovative technology solutions to optimizing our
					operational workflows. A.E.N Nyathi&apos;s contributions ensure that PA Luxe Creation
					remains at the forefront of convenience and quality in Evander.
				</p>
			</article>
		</Section>
	);
};

export default KeyLeadership;
</file>

<file path="client/src/app/about/components/MilestonesAndVision.tsx">
import Icon from '@/components/ui/Icon';
import Section from '@/components/ui/layout/Section';
import { IoFlag, IoRocketOutline } from 'react-icons/io5';

const MilestonesAndVision: React.FC = () => {
	return (
		<Section
			heading='Our journey began with a vision to transform convenience in Evander. Here are some key
				moments and our aspirations for the future.'
			tittle='Milestones & Future Vision'>
			<article className='mt-6'>
				<Icon
					icon={IoFlag}
					variant='inlineCircular'
					className='text-3xl text-yellow-500'
					heading='Key Milestones'
				/>

				<ul className='list-disc list-inside '>
					<li>
						<strong>2024:</strong> PA Luxe Creation PTY Ltd was established, bringing together
						affordable, high-quality meals.
					</li>
					<li>
						<strong>2025:</strong> PA Luxe Creation PTY Ltd has established a new building in Evander
						which included luxury Photo boot.
					</li>

					{/* Add future milestones here */}
				</ul>
			</article>

			<article className='mt-6'>
				<Icon
					icon={IoRocketOutline}
					variant='inlineCircular'
					heading='Our Future Vision'
				/>
				<p className='text-center'>
					Our vision is to become Evander&apos;s premier destination for these combined services,
					driven by innovation, quality, and community trust. We aim to continuously innovate,
					expand our offerings, and deepen our connection with the community we serve.
				</p>
			</article>
		</Section>
	);
};

export default MilestonesAndVision;
</file>

<file path="client/src/app/about/components/OurCommitment.tsx">
import Section from '@/components/ui/layout/Section';
import Image from 'next/image';
import { IoShieldCheckmark } from 'react-icons/io5';

const OurCommitment: React.FC = () => {
	return (
		<Section
			Icon={IoShieldCheckmark}
			heading='At PA Luxe Creation PTY Ltd, we are committed to providing a premium experience in both our
					food service and car care offerings. We strive to be your convenient and affordable
					destination, delivering quality meals and luxurious Photo boot. Our goal is to build
					community trust through innovation and exceptional service in Evander.'
			tittle='Our Commitment'>
			<Image
				alt='logo'
				height={300}
				width={300}
				src='/PA_Logo.png'
			/>
		</Section>
	);
};

export default OurCommitment;
</file>

<file path="client/src/app/about/components/OurJourney.tsx">
import Section from '@/components/ui/layout/Section';
import Image from 'next/image';

const OurJourney: React.FC = () => {
	return (
		<Section tittle='Our Journey to PA Luxe Creation'>
			<Image
				src='/PA_Logo.png'
				alt='logo'
				width={150}
				height={150}
				className='float-right'
			/>
			<p className='text-start'>
				PA Luxe Creation PTY Ltd was established in 2024 by Precious Nyathi. Nyathi identified a need in
				Evander for modern, affordable services that combined convenience and quality. This vision
				led to the concept of a dual-service establishment offering both delicious, budget-friendly
				meals and premium car care. Our journey is fueled by a commitment to providing a unique and
				valuable service to our community.
			</p>
		</Section>
	);
};

export default OurJourney;
</file>

<file path="client/src/app/about/components/OurVision.tsx">
import Icon from '@/components/ui/Icon';
import Section from '@/components/ui/layout/Section';
import { IoEye } from 'react-icons/io5';

const OurVision: React.FC = () => {
	return (
		<Section
			Icon={IoEye}
			tittle='Our Vision'>
			<article>
				<p className='text-center '>
					<strong>Our vision</strong> is to become Evander&apos;s premier destination for
					affordable, high-quality meals and competitively priced luxury Photo boot, driven by
					innovation, quality, and community trust.
				</p>
			</article>
		</Section>
	);
};

export default OurVision;
</file>

<file path="client/src/app/about/components/StrengthsAndOpportunities.tsx">
import Icon from '@/components/ui/Icon';
import Section from '@/components/ui/layout/Section';
import React from 'react';
import { GiMuscleUp, GiOppositeHearts } from 'react-icons/gi';

const StrengthsAndOpportunities: React.FC = () => {
	const strengths = [
		'20–30% cheaper Photo boot',
		'multidisciplinary leadership',
		'dual-service convenience.',
	];

	const opportunities = ['Taxi fleet bulk discounts,', 'loyalty program integration.'];

	return (
		<Section tittle='Strengths and Opportunities'>
			<div className='mt-6 grid grid-cols-1 md:grid-cols-2 gap-2   '>
				<article>
					<Icon
						icon={GiMuscleUp}
						heading='Strengths'
					/>
					<ul className='list-disc list-inside '>
						{strengths.map((strength, index) => (
							<li key={index}>{strength}</li>
						))}
					</ul>
				</article>

				<article>
					<Icon
						icon={GiOppositeHearts}
						heading='Opportunities'
					/>
					<ul className='list-disc list-inside '>
						{opportunities.map((opportunity, index) => (
							<li key={index}>{opportunity}</li>
						))}
					</ul>
				</article>
			</div>
		</Section>
	);
};

export default StrengthsAndOpportunities;
</file>

<file path="client/src/app/about/components/WeaknessesAndThreats.tsx">
import Section from '@/components/ui/layout/Section';
import React from 'react';

const WeaknessesAndThreats: React.FC = () => {
	const weaknesses = ['Reliant on local foot traffic.', 'New brand awareness.', 'Limited funding.'];

	const threats = ['Competitor price matching', 'economic downturns', 'supply chain disruptions'];

	return (
		<Section tittle='Weaknesses and Threats'>
			<div className='mt-6 grid grid-cols-1 md:grid-cols-2 gap-2   '>
				<article>
					<h3>Weaknesses</h3>
					<ul className='list-disc list-inside '>
						{weaknesses.map((weakness, index) => (
							<li key={index}>{weakness}</li>
						))}
					</ul>
				</article>
				<article>
					<h3>Threats</h3>
					<ul className='list-disc list-inside '>
						{threats.map((threat, index) => (
							<li key={index}>{threat}</li>
						))}
					</ul>
				</article>
			</div>
		</Section>
	);
};

export default WeaknessesAndThreats;
</file>

<file path="client/src/app/about/components/WhatMakesUsSpecial.tsx">
import { IoSparkles, IoCalendar, IoPeople, IoFastFood } from 'react-icons/io5';
import Icon from '@/components/ui/Icon';
import Section from '@/components/ui/layout/Section';

const WhatMakesUsSpecial: React.FC = () => {
	return (
		<Section tittle='What Makes Us Special?'>
			<div className='grid grid-cols-1 md:grid-cols-2  gap-2 gap-2 '>
				<article>
					<Icon
						icon={IoSparkles}
						heading='Modern Facilities'
					/>
					<p className='text-center'>
						Unlike competitors, PA Luxe Creation boasts up-to-date facilities for both our eatery and
						Photo boot, ensuring a higher standard of service and a more comfortable experience for
						our customers.
					</p>
				</article>
				<article>
					<Icon
						icon={IoCalendar}
						heading='Digital Booking System'
					/>

					<p className='text-center'>
						We offer a convenient digital booking system, allowing you to easily schedule Photo boot
						and potentially food orders, saving you time and providing a seamless experience that
						our competitors don&apos;t.
					</p>
				</article>
				<article>
					<Icon
						icon={IoPeople}
						heading='Multidisciplinary Expertise'
					/>
					<p className='text-center'>
						Our leadership team possesses diverse expertise, from industrial engineering to design
						and business management, enabling us to optimize operations, enhance customer
						experience, and innovate in ways our competitors cannot.
					</p>
				</article>
				<article>
					<Icon
						icon={IoFastFood}
						heading='Dual-Service Convenience'
					/>
					<p className='text-center'>
						We offer the unique convenience of a high-quality eatery and a luxury Photo boot in one
						location, saving you time and effort compayellow to visiting separate establishments.
					</p>
				</article>
			</div>
		</Section>
	);
};

export default WhatMakesUsSpecial;
</file>

<file path="client/src/app/about/loading.tsx">
import Loading from '@/components/ui/Loading';

export default function LoadingPage() {
	return <Loading message='Loading About PA Luxe Creation...' />;
}
</file>

<file path="client/src/app/about/page.tsx">
import OurJourney from './components/OurJourney';
import OurCommitment from './components/OurCommitment';
import WhatMakesUsSpecial from './components/WhatMakesUsSpecial';
import CoreValues from './components/CoreValues';
import OurVision from './components/OurVision';
import KeyLeadership from './components/KeyLeadership';
import CompanyDescription from './components/CompanyDescription';
import KeyHighlights from './components/KeyHighlights';
import StrengthsAndOpportunities from './components/StrengthsAndOpportunities';
import WeaknessesAndThreats from './components/WeaknessesAndThreats';
import MilestonesAndVision from './components/MilestonesAndVision';
import Main from '@/components/ui/layout/Main';
import { IoFastFoodOutline } from 'react-icons/io5';

const AboutPage = () => {
	return (
		<Main
			tittle='About PA Luxe Creation'
			Icon={IoFastFoodOutline}>
			<OurJourney />
			<OurVision />
			<CompanyDescription />
			<OurCommitment />
			<MilestonesAndVision />
			<WhatMakesUsSpecial />
			<KeyHighlights />
			<CoreValues />
			<StrengthsAndOpportunities />
			<WeaknessesAndThreats />
			<KeyLeadership />
		</Main>
	);
};

export default AboutPage;
</file>

<file path="client/src/app/api/seed/route.ts">
import { NextResponse } from 'next/server';
import { createClient } from '@/lib/supabase/server';
import { readFileSync } from 'fs';
import { join } from 'path';

export async function POST() {
  try {
    const supabase = await createClient();
    
    // Check if user is authenticated (optional - you can remove this if you want public seeding)
    const { data: { user }, error: authError } = await supabase.auth.getUser();
    
    // Optional: Only allow seeding if user is authenticated
    // if (authError || !user) {
    //   return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });
    // }

    // Read the SQL file
    const sqlPath = join(process.cwd(), 'supabase_migrations', 'seed_products.sql');
    const sqlContent = readFileSync(sqlPath, 'utf-8');

    // Execute the SQL
    // Note: Supabase client doesn't have a direct execute method for raw SQL
    // We'll need to use the REST API or RPC function, or parse and insert row by row
    // For now, let's parse the INSERT statements and execute them
    
    const insertStatements = sqlContent
      .split(';')
      .map(s => s.trim())
      .filter(s => s.length > 0 && s.toUpperCase().startsWith('INSERT'));

    if (insertStatements.length === 0) {
      return NextResponse.json({ error: 'No INSERT statements found' }, { status: 400 });
    }

    // Parse the first INSERT statement to extract values
    const mainInsert = insertStatements[0];
    const valuesMatch = mainInsert.match(/VALUES\s*([\s\S]+)/i);
    
    if (!valuesMatch) {
      return NextResponse.json({ error: 'Could not parse INSERT statement' }, { status: 400 });
    }

    // Parse values - this is a simplified parser
    const valuesString = valuesMatch[1];
    const rows: Array<{
      name: string;
      category: string;
      description: string | null;
      price: number;
      image_url: string | null;
      badge: string | null;
      stock: number;
    }> = [];

    // Split by rows (each row is in parentheses)
    const rowMatches = valuesString.matchAll(/\(([^)]+)\)/g);
    
    for (const match of rowMatches) {
      const rowValues = match[1].split(',').map(v => v.trim());
      
      if (rowValues.length >= 7) {
        const name = rowValues[0].replace(/^'|'$/g, '');
        const category = rowValues[1].replace(/^'|'$/g, '');
        const description = rowValues[2] === 'NULL' ? null : rowValues[2].replace(/^'|'$/g, '');
        const price = parseFloat(rowValues[3]);
        const image_url = rowValues[4] === 'NULL' ? null : rowValues[4].replace(/^'|'$/g, '');
        const badge = rowValues[5] === 'NULL' ? null : rowValues[5].replace(/^'|'$/g, '');
        const stock = parseInt(rowValues[6], 10);

        rows.push({
          name,
          category,
          description,
          price,
          image_url,
          badge,
          stock,
        });
      }
    }

    // Insert products in batches
    const batchSize = 10;
    let inserted = 0;
    let errors: string[] = [];

    for (let i = 0; i < rows.length; i += batchSize) {
      const batch = rows.slice(i, i + batchSize);
      
      // @ts-ignore - Supabase type inference issue with Database types
      const { error } = await supabase.from('products').insert(batch);
      
      if (error) {
        errors.push(`Batch ${Math.floor(i / batchSize) + 1}: ${error.message}`);
      } else {
        inserted += batch.length;
      }
    }

    if (errors.length > 0) {
      return NextResponse.json(
        { 
          success: false, 
          message: `Inserted ${inserted} products, but encountered errors`,
          errors 
        },
        { status: 207 } // Multi-Status
      );
    }

    return NextResponse.json(
      { 
        success: true, 
        message: `Successfully seeded ${inserted} products` 
      },
      { status: 200 }
    );
  } catch (error) {
    console.error('Seed error:', error);
    return NextResponse.json(
      { 
        success: false, 
        error: error instanceof Error ? error.message : 'Unknown error occurred' 
      },
      { status: 500 }
    );
  }
}
</file>

<file path="client/src/app/blog/components/BlogPostList.tsx">
import React from 'react';

const posts = [
	{
		title: 'The Secret to Our Famous Kota',
		date: 'July 24, 2025',
		excerpt:
			'Discover the fresh ingyellowients and secret spices that make our Kotas the talk of the town...',
	},
	{
		title: '5 Tips for a Sparkling Clean Car',
		date: 'July 20, 2025',
		excerpt: 'Learn our top tips for maintaining a pristine car between professional washes...',
	},
	{
		title: 'Community Day at PA Luxe Creation',
		date: 'July 15, 2025',
		excerpt:
			'A look back at our recent community event, filled with good food and great company...',
	},
];

const BlogPostList: React.FC = () => {
	return (
		<div className='grid grid-cols-1 md:grid-cols-2  gap-6'>
			{posts.map((post, index) => (
				<div
					key={index}
					className='bg-black/50 p-6 rounded-md shadow-lg hover:shadow-yellow-500/50 transition-shadow duration-300'>
					<h3 className='text-xl font-bold mb-2'>{post.title}</h3>
					<p className='text-sm text-white mb-2'>{post.date}</p>
					<p className='text-white'>{post.excerpt}</p>
				</div>
			))}
		</div>
	);
};

export default BlogPostList;
</file>

<file path="client/src/app/blog/loading.tsx">
import Loading from '@/components/ui/Loading';

export default function LoadingPage() {
	return <Loading message='Loading Blog Posts...' />;
}
</file>

<file path="client/src/app/blog/page.tsx">
import React from 'react';
import BlogPostList from '@/app/blog/components/BlogPostList';
import Main from '@/components/ui/layout/Main';
import { FaBlog } from 'react-icons/fa';
import Section from '@/components/ui/layout/Section';

const BlogNewsPage: React.FC = () => {
	return (
		<Main
			tittle='Blog'
			Icon={FaBlog}>
			<Section>
				<BlogPostList />
			</Section>
		</Main>
	);
};

export default BlogNewsPage;
</file>

<file path="client/src/app/contact/components/ContactInfo.tsx">
import Section from '@/components/ui/layout/Section';
import { IoLocationSharp, IoCall, IoMail } from 'react-icons/io5';

const ContactInfo: React.FC = () => {
	return (
		<Section tittle='Contact Information' >
			<div className='md:flex md:flex-wrap md:gap-4'>

				<article className='flex items-center  gap-2 p-4 '>

					<IoLocationSharp className='text-white w-10 h-10  ' />
					<p>
						<strong>Address:</strong> 123 Main Street, Phalaborwa, 1390
					</p>
				</article>
				<article className='flex items-center  gap-2 p-2'>
					<IoCall className='text-white w-10 h-10  ' />
					<p>
						<strong>Phone Number:</strong> (+27) 15 781 1234
					</p>
				</article>
				<article className='flex items-center  gap-2 p-2'>
					<IoMail className='text-white w-10 h-10  ' />
					<p>
						<strong>Email Address:</strong> contact@centraleatery.co.za
					</p>
				</article>
			</div>
		</Section>
	);
};

export default ContactInfo;
</file>

<file path="client/src/app/contact/components/MapEmbed.tsx">
const MapEmbed: React.FC = () => {
  return (
    <div className="w-full h-64 md:h-80 border border-white/50 rounded-md overflow-hidden">
      {/* <iframe
        width="100%"
        height="100%"
        frameBorder="0"
        style={{ border: 0 }}
        referrerPolicy="no-referrer-when-downgrade"
        src={`https://www.google.com/maps/embed/v1/view?key=YOUR_API_KEY&center=-23.9401,31.1437&zoom=15`} // Added zoom level for better view
        allowFullScreen
        aria-hidden="false"
      ></iframe> */}

  <iframe 
src="https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d186.1725268547972!2d31.07656385293001!3d-23.86743878213464!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMjPCsDUyJzAyLjciUyAzMcKwMDQnMzYuMSJF!5e1!3m2!1sen!2sza!4v1748643148484!5m2!1sen!2sza"  width="100%"
  height="100%"
  
  style={{ border: 0 }}
  referrerPolicy="no-referrer-when-downgrade"
  allowFullScreen
        aria-hidden="false"
      ></iframe>
      </div>
  );
};

export default MapEmbed;
</file>

<file path="client/src/app/contact/components/OperatingHours.tsx">
import Section from '@/components/ui/layout/Section';

const OperatingHours: React.FC = () => {
	return (
		<Section tittle='Operating Hours:'>
			<div className='mt-2 space-y-4'>
				<article>
					<h3 className='text-lg font-semibold'>Eatery</h3>
					<ul>
						<li>
							<strong>Monday - Friday:</strong> 8:00 AM - 8:00 PM
						</li>
						<li>
							<strong>Saturday:</strong> 8:00 AM - 9:00 PM
						</li>
						<li>
							<strong>Sunday:</strong> 8:00 AM - 8:00 PM
						</li>
					</ul>
				</article>
				<article>
					<h3 className='text-lg font-semibold'>Photo boot</h3>
					<ul>
						<li>
							<strong>Monday - Friday:</strong> 8:00 AM - 8:00 PM
						</li>
						<li>
							<strong>Saturday:</strong> 8:00 AM - 6:00 PM
						</li>
						<li>
							<strong>Sunday:</strong> Closed
						</li>
					</ul>
				</article>
			</div>
		</Section>
	);
};

export default OperatingHours;
</file>

<file path="client/src/app/contact/loading.tsx">
import Loading from '@/components/ui/Loading';

export default function LoadingPage() {
	return <Loading message='Loading Contact Page...' />;
}
</file>

<file path="client/src/app/contact/page.tsx">
import ContactForm from '@/lib/forms/ContactForm';
import React from 'react';
import { FaMapMarkerAlt, FaClock, FaEnvelope, FaPhone } from 'react-icons/fa';
// import dynamic from 'next/dynamic';

// Dynamically import the ContactForm component to avoid SSR issues with form libraries
// const ContactForm = dynamic(() => import('@/components/ContactForm'), {
//   ssr: false,
// });

const MapEmbed = () => (
  <div className="w-full h-96 rounded-lg overflow-hidden mt-8">
    <iframe
      src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d387193.3059669869!2d-74.25986773715416!3d40.69767006372085!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x89c24fa5d33f083b%3A0xc80b8f06e177fe62!2sNew%20York%2C%20NY%2C%20USA!5e0!3m2!1sen!2s!4v1234567890"
      width="100%"
      height="100%"
      style={{ border: 0 }}
      allowFullScreen
      loading="lazy"
      referrerPolicy="no-referrer-when-downgrade"
      className="rounded-lg"
    />
  </div>
);

const ContactInfo = () => (
  <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
    <div className="flex items-start space-x-4 p-4 bg-white/5 rounded-lg">
      <div className="p-2 bg-yellow-500/10 rounded-full">
        <FaMapMarkerAlt className="text-yellow-500/95 text-xl" />
      </div>
      <div>
        <h3 className="text-lg font-semibold text-white mb-1">Our Location</h3>
        <p className="text-gray-300">123 Restaurant Street, Foodie City, FC 12345</p>
      </div>
    </div>
    
    <div className="flex items-start space-x-4 p-4 bg-white/5 rounded-lg">
      <div className="p-2 bg-yellow-500/10 rounded-full">
        <FaPhone className="text-yellow-500/95 text-xl" />
      </div>
      <div>
        <h3 className="text-lg font-semibold text-white mb-1">Phone</h3>
        <p className="text-gray-300">+1 (555) 123-4567</p>
      </div>
    </div>
    
    <div className="flex items-start space-x-4 p-4 bg-white/5 rounded-lg">
      <div className="p-2 bg-yellow-500/10 rounded-full">
        <FaEnvelope className="text-yellow-500/95 text-xl" />
      </div>
      <div>
        <h3 className="text-lg font-semibold text-white mb-1">Email</h3>
        <p className="text-gray-300">info@centraleatery.com</p>
      </div>
    </div>
    
    <div className="flex items-start space-x-4 p-4 bg-white/5 rounded-lg">
      <div className="p-2 bg-yellow-500/10 rounded-full">
        <FaClock className="text-yellow-500/95 text-xl" />
      </div>
      <div>
        <h3 className="text-lg font-semibold text-white mb-1">Opening Hours</h3>
        <p className="text-gray-300">Mon - Fri: 11:00 AM - 10:00 PM</p>
        <p className="text-gray-300">Sat - Sun: 10:00 AM - 11:00 PM</p>
      </div>
    </div>
  </div>
);

export default function ContactPage() {
  return (
    <div className="py-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
      <div className="text-center mb-12">
        <h1 className="text-4xl font-bold text-white mb-4">Get In Touch</h1>
        <div className="w-24 h-1 bg-yellow-500/95 mx-auto"></div>
        <p className="mt-6 text-lg text-gray-300 max-w-2xl mx-auto">
          Have questions or feedback? We'd love to hear from you. Fill out the form below or reach out to us directly.
        </p>
      </div>
      
      <ContactInfo />
      
      <div className="mt-16">
        <h2 className="text-3xl font-bold text-white mb-8 text-center">Send Us a Message</h2>
        <ContactForm />
      </div>
      
      <div className="mt-16">
        <h2 className="text-3xl font-bold text-white mb-8 text-center">Find Us on the Map</h2>
        <MapEmbed />
      </div>
    </div>
  );
}
</file>

<file path="client/src/app/gallery/components/ImageGallery.tsx">
'use client';
import React, { useState, useRef, useEffect } from 'react';
import { createClient } from '@/lib/supabase/client';

import Image from 'next/image';
import { FaImages } from 'react-icons/fa';
import dynamic from 'next/dynamic';

const ImageModal = dynamic(() => import('./ImageModal'), { ssr: false, loading: () => null });
import Section from '@/components/ui/layout/Section';

type ProductRow = {
	id: string;
	name: string;
	description: string | null;
	price: number | null;
	image_url: string | null;
	badge: string | null;
	likes: number | null;
};

const ImageGallery: React.FC = () => {
	const [modalOpen, setModalOpen] = useState(false);
	const [product, setproduct] = useState<ProductType | null>(null);
	const [allProducts, setAllProducts] = useState<ProductType[]>([]);
	const [loading, setLoading] = useState(true);
	const modalRef = useRef<HTMLDivElement>(null);

	useEffect(() => {
		const fetchProducts = async () => {
			const supabase = createClient();
			const { data, error } = await supabase
				.from('products')
				.select('*');

			if (error) {
				console.error('Error fetching products:', error);
				setLoading(false);
				return;
			}

			const products: ProductType[] = ((data as ProductRow[]) || []).map((p) => ({
				ProductID: p.id,
				Name: p.name,
				Description: [p.description || ''],
				Price: p.price || 0,
				Image: p.image_url || '/Menus/placeholder.png',
				badge: p.badge || undefined,
				rating: p.likes ? 5 : undefined,
			}));

			setAllProducts(products);
			setLoading(false);
		};

		fetchProducts();
	}, []);

	useEffect(() => {
		if (!modalOpen) return;
		const handleKeyDown = (e: KeyboardEvent) => {
			if (e.key === 'Escape') setModalOpen(false);
			if (e.key === 'Tab' && modalRef.current) {
				const focusable = modalRef.current.querySelectorAll<HTMLElement>(
					'button, [tabindex]:not([tabindex="-1"])'
				);
				if (focusable.length === 0) return;
				const first = focusable[0];
				const last = focusable[focusable.length - 1];
				if (!e.shiftKey && document.activeElement === last) {
					e.preventDefault();
					first.focus();
				} else if (e.shiftKey && document.activeElement === first) {
					e.preventDefault();
					last.focus();
				}
			}
		};
		document.addEventListener('keydown', handleKeyDown);
		return () => document.removeEventListener('keydown', handleKeyDown);
	}, [modalOpen]);

	const handleBackdropClick = (e: React.MouseEvent<HTMLDivElement>) => {
		if (e.target === e.currentTarget) setModalOpen(false);
	};

	const openModal = (product: ProductType) => {
		setproduct(product);
		setModalOpen(true);
	};

	if (loading) {
		return (
			<Section Icon={FaImages} tittle='Gallery'>
				<div className='text-center py-10 text-white'>Loading gallery...</div>
			</Section>
		);
	}

	return (
		<Section
			Icon={FaImages}
			tittle='Gallery'>
			<div className='grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 mt-6'>
				{allProducts.map(
					(product) =>
						product.Image && (
							<article
								key={product.Name}
								className='group cursor-pointer rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black/50 focus:ring-yellow-500
								relative w-full aspect-w-1 aspect-h-1 rounded-md overflow-hidden transition-transform duration-300 m-0 p-2 group-hover:scale-105'
								tabIndex={0}
								aria-label={`Show full image of ${product.Name}`}
								onClick={() => openModal(product)}
								onKeyDown={(e) => {
									if (e.key === 'Enter' || e.key === ' ') {
										e.preventDefault();
										openModal(product);
									}
								}}>
								<Image
									src={product.Image}
									alt={`${product.Name} gallery image`}
									className='object-contain transition-all duration-300 group-hover:brightness-110'
									width={500}
									height={500}
									sizes='(max-width: 640px) 50vw, (max-width: 1024px) 33vw, 20vw'
								/>
								<div className='absolute inset-0 bg-gradient-to-t from-black/70 to-transparent'></div>
								<p className='absolute bottom-2 left-2 right-2 truncate text-center bg-black/70 px-2 py-1 rounded-full text-xs font-bold text-white'>
									{product.Name}
								</p>
							</article>
						)
				)}
			</div>
			{modalOpen && product && (
				<ImageModal
					product={product}
					handleBackdropClick={handleBackdropClick}
					setModalOpen={setModalOpen}
				/>
			)}
		</Section>
	);
};

export default ImageGallery;
</file>

<file path="client/src/app/gallery/components/ImageModal.tsx">
import SocialButtons from '@/app/menu/[Products]/components/SocialButtons';

import { NextPage } from 'next';
import Image from 'next/image';

interface Props {
	handleBackdropClick: (e: React.MouseEvent<HTMLDivElement>) => void;
	product: ProductType;
	setModalOpen: React.Dispatch<React.SetStateAction<boolean>>;
}

const ImageModal: NextPage<Props> = ({ handleBackdropClick, setModalOpen, product }) => {
	return (
		<main
			className='fixed inset-0 z-50 flex items-center justify-center bg-black  animate-fadein p-4'
			onClick={handleBackdropClick}
			aria-modal='true'
			role='dialog'>
			<div className='relative max-w-4xl  w-full '>
				<button
					onClick={() => setModalOpen(false)}
					className='absolute top-3 right-3 bg-yellow-600 hover:bg-yellow-700 text-white rounded-full p-2 shadow-lg focus:outline-none focus-visible:ring-2 focus-visible:ring-white z-10'
					aria-label='Close full image'
					autoFocus>
					<svg
						width='24'
						height='24'
						fill='none'
						viewBox='0 0 24 24'>
						<path
							stroke='currentColor'
							strokeWidth='2'
							strokeLinecap='round'
							strokeLinejoin='round'
							d='M6 6l12 12M6 18L18 6'
						/>
					</svg>
				</button>
				<article className='w-full relative m-0 p-0  flex flex-col items-center justify-center'>
					{product?.Image && (
						<div className='relative p-4 w-full max-h-[75vh] '>
							<Image
								src={product.Image}
								alt={`${product.Name} gallery image`}
								layout='responsive'
								width={500}
								height={500}
								className=' rounded-md'
								priority
							/>
						</div>
					)}
					<div className='text-white text-center text-lg font-bold'>{product.Name}</div>
					<SocialButtons product={product} />
				</article>
			</div>
		</main>
	);
};

export default ImageModal;
</file>

<file path="client/src/app/gallery/loading.tsx">
import Loading from '@/components/ui/Loading';

export default function LoadingPage() {
	return <Loading message='Loading Gallery...' />;
}
</file>

<file path="client/src/app/gallery/page.tsx">
import ImageGallery from '@/app/gallery/components/ImageGallery';
import Main from '@/components/ui/layout/Main';
import { FcGallery } from 'react-icons/fc';

export default function Gallery() {
	return (
		<Main
			tittle='Gallery'
			Icon={FcGallery}
			heading='Find Your Convenience'>
			<ImageGallery />
		</Main>
	);
}
</file>

<file path="client/src/app/home-components/AboutUsSnippet.tsx">
import Icon from '@/components/ui/Icon';
import Section from '@/components/ui/layout/Section';
import AppLink from '@/components/ui/Link';
import { IoInformationCircleOutline } from 'react-icons/io5';

const AboutUsSnippet: React.FC = () => {
	return (
		<Section
			Icon={IoInformationCircleOutline}
			tittle='About PA Luxe Creation'
			heading='PA Luxe Creation aims to revolutionize convenience in Evander by offering both affordable, high-quality meals and competitively priced luxury Photo boot under one roof. Founded with a vision to be the premier destination for these combined services, we are driven by innovation, quality, and community trust.'>
			<div className='mt-6'>
				<AppLink
					variant='primary'
					href='/about'>
					Read More About Us...
				</AppLink>
			</div>
		</Section>
	);
};

export default AboutUsSnippet;
</file>

<file path="client/src/app/home-components/ContactSection.tsx">
import MapEmbed from '@/app/contact/components/MapEmbed';
import { IoLocationSharp, IoCall, IoChatbubblesOutline } from 'react-icons/io5';
import Icon from '@/components/ui/Icon';
import ContactInfo from '@/app/contact/components/ContactInfo';
import Section from '@/components/ui/layout/Section';

const ContactSection: React.FC = () => {
	return (
		<>
			<ContactInfo />
			<Section
				Icon={IoChatbubblesOutline}
				tittle='Visit Us Today!'>
				<div className='mt-8'>
					<MapEmbed />
				</div>
			</Section>
		</>
	);
};

export default ContactSection;
</file>

<file path="client/src/app/home-components/FeaturedItemsServices.tsx">
import React from 'react';
import Image from 'next/image';
import { BiSolidHeart, BiSolidComment, BiSolidShare } from 'react-icons/bi';
import Button from '@/components/ui/Button';
import Section from '@/components/ui/layout/Section';

const FeaturedItemsServices: React.FC = () => {
	const featuyellowItems = [
		{
			name: 'Premium Photo boot',
			description: 'Get a luxurious Images with our premium Photo boot package.',
			image: '/PhotoBoot.jpg',
		},
		{
			name: 'Signature Kota',
			description: 'Our famous, delicious Kota filled with tasty ingyellowients.',
			image: '/Menus/KotaMeal.png',
		},
		{
			name: 'Burger Meal',
			description:
				'A satisfying meal with a perfectly cooked burger, a 500ml drink, and extra chips.',
			image: '/Menus/BurgerMeal.png',
		},
	];

	return (
		<Section tittle='Featuyellow Items & Services'>
			<div className='grid grid-cols-1 md:grid-cols-2 gap-2 '>
				{featuyellowItems.map((item, index) => (
					<article
						key={index}
						className='overflow-hidden flex flex-col'>
						{item.image && (
							<Image
								src={item.image}
								alt={item.name}
								width={500}
								height={500}
							/>
						)}
						<div className='p-6 flex-grow text-left'>
							<h3 className='text-xl font-bold'>{item.name}</h3>
							<p className='mt-2 text-white'>{item.description}</p>
						</div>
						<div className='flex justify-around items-center p-4 border-t border-white/20 mt-auto'>
							<Button
								variant='icon'
								aria-label='Like item'>
								<BiSolidHeart
									size={24}
									className='text-white hover:text-yellow-500 transition-colors'
								/>
							</Button>
							<Button
								variant='icon'
								aria-label='Comment on item'>
								<BiSolidComment
									size={24}
									className='text-white hover:text-yellow-500 transition-colors'
								/>
							</Button>
							<Button
								variant='icon'
								aria-label='Share item'>
								<BiSolidShare
									size={24}
									className='text-white hover:text-yellow-500 transition-colors'
								/>
							</Button>
						</div>
					</article>
				))}
			</div>
		</Section>
	);
};

export default FeaturedItemsServices;
</file>

<file path="client/src/app/home-components/FinancialSnapshotTeaser.tsx">
import Section from '@/components/ui/layout/Section';
import Link from '@/components/ui/Link';
import { IoTrendingUpOutline } from 'react-icons/io5';

const FinancialSnapshotTeaser: React.FC = () => {
	return (
		<Section
			Icon={IoTrendingUpOutline}
			tittle='Building a Sustainable Future'
			heading="Since our inception, we've seen promising traction and are on a solid path toward sustainable growth. Our commitment to quality and convenience continues to drive our success.">
			<div className='mt-6'>
				<Link
					variant='button'
					href='/about#financials'>
					View Our Financial Snapshot...
				</Link>
			</div>
		</Section>
	);
};

export default FinancialSnapshotTeaser;
</file>

<file path="client/src/app/home-components/HeroSection.tsx">
import Image from 'next/image';
import Link from '@/components/ui/Link';
import { FaShoppingCart } from 'react-icons/fa';
import Section from '@/components/ui/layout/Section';
import { BiCamera } from 'react-icons/bi';
const HeroSection: React.FC = () => {
	return (
		<Section
			tittle='Ever bite is a delight, ever wash is a luxury'
			className='flex flex-col items-center text-center'>
			<Image
				src='/PA_Logo.png'
				alt='PA Luxe Creation Logo'
				width={200}
				height={200}
				className='mb-6'
				priority
			/>
			<p className='mt-4 text-lg max-w-2xl'>
				Experience the unique convenience of delicious food and a state-of-the-art Photo boot, all in
				one place in Evander.
			</p>
			<div className='flex bg-transparent w-full justify-center gap-6 mt-8'>
				<Link
					variant='button'
					href='/menu'
					className='flex items-center gap-2'>
					<FaShoppingCart />
					<span>Order Food</span>
				</Link>
				<Link
					variant='button'
					href='/photo'
					className='flex items-center gap-2'>
					<BiCamera />
					<span>Book 360 phot boot</span>
				</Link>
			</div>
		</Section>
	);
};

export default HeroSection;
</file>

<file path="client/src/app/home-components/KeyDifferentiators.tsx">
import Icon from '@/components/ui/Icon';
import Section from '@/components/ui/layout/Section';
import React from 'react';
import { GiFoodTruck } from 'react-icons/gi';
import { HiHomeModern } from 'react-icons/hi2';
import { RiMoneyDollarCircleLine } from 'react-icons/ri';

const KeyDifferentiators: React.FC = () => {
	return (
		<Section tittle='What Makes PA Luxe Creation Special?'>
			<div className='grid grid-cols-1 md:grid-cols-2 gap-2'>
				{/* Unique Combination */}
				<article>
					<Icon
						icon={GiFoodTruck}
						heading='Food & Car Care in One'
					/>
					<p className='mt-2'>
						Revolutionizing convenience with delicious, affordable meals and premium Photo boot
						services under one roof.
					</p>
				</article>

				{/* Competitive Pricing */}
				<article>
					<Icon
						icon={RiMoneyDollarCircleLine}
						heading='Unbeatable Value'
					/>
					<p className='mt-2'>
						Enjoy competitively priced Photo boot (20-30% cheaper!) and high-quality,
						budget-friendly meals.
					</p>
				</article>

				{/* Modern Technology */}
				<article>
					<Icon
						icon={HiHomeModern}
						heading='Modern Convenience'
					/>
					<p className='mt-2'>
						Benefit from an advanced booking system for Photo boot and a modern POS system for a
						smooth experience.
					</p>
				</article>
			</div>
		</Section>
	);
};

export default KeyDifferentiators;
</file>

<file path="client/src/app/home-components/KeyHighlights.tsx">
import Section from '@/components/ui/layout/Section';
import { IoSparklesOutline, IoCheckmarkCircle } from 'react-icons/io5';

const KeyHighlights: React.FC = () => {
	const highlights = [
		{
			id: 1,
			text: 'Dual-Service Convenience: Enjoy a tasty meal while your car is being taken care of.',
		},
		{ id: 2, text: "Affordability: Quality food and Photo boot services that won't break the bank." },
		{
			id: 3,
			text: "Community-Centric: We're dedicated to serving and supporting the Evander community.",
		},
	];

	return (
		<Section
			Icon={IoSparklesOutline}
			tittle='The PA Luxe Creation Difference'>
			<div className=' grid md:grid-cols-2 gap-8'>
				{highlights.map((highlight) => (
					<div
						key={highlight.id}
						className='flex flex-col items-center'>
						<IoCheckmarkCircle className='text-4xl text-yellow-500 mb-3' />
						<p>{highlight.text}</p>
					</div>
				))}
			</div>
		</Section>
	);
};

export default KeyHighlights;
</file>

<file path="client/src/app/home-components/TargetMarketCallout.tsx">
import { BiBullseye } from 'react-icons/bi';
import {
	IoHomeOutline,
	IoBriefcaseOutline,
	IoCarSportOutline,
	IoBusinessOutline,
} from 'react-icons/io5';
import Icon from '@/components/ui/Icon';
import Section from '@/components/ui/layout/Section';

const TargetMarketCallout: React.FC = () => {
	const targetMarkets = [
		{
			id: 1,
			title: 'Residents of Evander',
			text: 'Catering to families, professionals, and students seeking convenient, high-quality meals and car care.',
			icon: IoHomeOutline,
		},
		{
			id: 2,
			title: 'People Who Work in the Area',
			text: 'Providing quick meal solutions and efficient Photo boot services for busy professionals and government workers.',
			icon: IoBriefcaseOutline,
		},
		{
			id: 3,
			title: 'Travelers Passing Through',
			text: 'A welcoming stop for travelers to rest and refresh with reliable meals and clean Photo boot services.',
			icon: IoCarSportOutline,
		},
		{
			id: 4,
			title: 'Local Businesses',
			text: 'Partnering with local businesses for catering services and fleet vehicle maintenance programs.',
			icon: IoBusinessOutline,
		},
	];

	return (
		<Section
			Icon={BiBullseye}
			tittle='Our Target Market'
			id='target-market'
			heading='PA Luxe Creation is dedicated to serving the diverse needs of the Evander community and those passing through.'>
			<div className='grid grid-cols-1 md:grid-cols-2  gap-2'>
				{targetMarkets.map((market) => (
					<article
						key={market.id}
						className='flex flex-col items-center'>
						<Icon icon={market.icon} />
						<h3>{market.title}</h3>
						<p className='text-yellow-100 text-center'>{market.text}</p>
					</article>
				))}
			</div>
		</Section>
	);
};

export default TargetMarketCallout;
</file>

<file path="client/src/app/home-components/Testimonials.tsx">
import React from 'react';
import { BiSolidLike, BiSolidComment, BiSolidShare } from 'react-icons/bi';
import { FaQuoteLeft } from 'react-icons/fa';
import Button from '@/components/ui/Button';

import Icon from '@/components/ui/Icon';
import Section from '@/components/ui/layout/Section';

const Testimonials: React.FC = () => {
	const testimonials = [
		{
			id: 1,
			text: "PA Luxe Creation offers the best Kota's in town and their Photo boot service is super convenient!",
			author: 'Happy Customer A',
		},
		{
			id: 2,
			text: 'I love being able to get my Photo booted while grabbing a quick, delicious meal. Great concept!',
			author: 'Satisfied Client B',
		},
		{
			id: 3,
			text: 'The team at PA Luxe Creation is always friendly and the service is top-notch. Highly recommended!',
			author: 'Regular Visitor C',
		},
	];

	return (
		<Section
			Icon={FaQuoteLeft}
			tittle='What Our Customers Say'>
			<div className='grid grid-cols-1 md:grid-cols-2  gap-2 '>
				{testimonials.map((testimonial) => (
					<article key={testimonial.id}>
						<div className='flex-grow'>
							<FaQuoteLeft className='text-2xl text-white/50 mb-4' />
							<p className='italic text-white mb-4'>{testimonial.text}</p>
						</div>
						<div className='mt-auto'>
							<div className='flex items-center mb-4'>
								<span className='flex-shrink-0 w-10 h-10 rounded-full bg-yellow-500 flex items-center justify-center text-white font-bold text-lg'>
									{testimonial.author.charAt(0).toUpperCase()}
								</span>
								<p className='font-semibold text-white ml-3'>{testimonial.author}</p>
							</div>
							<div className='flex justify-around items-center border-t border-white/20 pt-4'>
								<Button
									variant='icon'
									aria-label={`Like testimonial by ${testimonial.author}`}>
									<BiSolidLike
										size={20}
										className='text-white hover:text-yellow-500 transition-colors'
									/>
								</Button>
								<Button
									variant='icon'
									aria-label={`Comment on testimonial by ${testimonial.author}`}>
									<BiSolidComment
										size={20}
										className='text-white hover:text-yellow-500 transition-colors'
									/>
								</Button>
								<Button
									variant='icon'
									aria-label={`Share testimonial by ${testimonial.author}`}>
									<BiSolidShare
										size={20}
										className='text-white hover:text-yellow-500 transition-colors'
									/>
								</Button>
							</div>
						</div>
					</article>
				))}
			</div>
		</Section>
	);
};

export default Testimonials;
</file>

<file path="client/src/app/menu/[Products]/[product]/comments/loading.tsx">
import Loading from '@/components/ui/Loading';

export default function LoadingPage() {
	return <Loading message='Loading Product Comments...' />;
}
</file>

<file path="client/src/app/menu/[Products]/[product]/comments/page.tsx">
import { createClient } from "@/lib/supabase/server";
import CommentsForm from "@/lib/forms/CommentsForm";
import { redirect } from "next/navigation";
interface CommentsProps {
	params: Promise<{ product: string }>;
}
const Comments:React.FC<CommentsProps> = async ({ params }) => {
		const supabase = await createClient();
		const { data: { user }, error } = await supabase.auth.getUser();
	if (error || !user?.id) {
		return redirect('/login');
	}
	const ProductName = (await params).product;
	return (
		<CommentsForm ProductName={ProductName}  />
	);
};

export default Comments;
</file>

<file path="client/src/app/menu/[Products]/[product]/components/AddtoCart.tsx">
'use client';

import { useCart } from '@/lib/context/CartContext';
import { useToast } from '@/lib/context/CartContext';

import Button from '@/components/ui/Button';
import { BiSolidCartAdd } from 'react-icons/bi';
import { useRouter } from 'next/navigation';

interface AddtoCartProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
	product: ProductType;
}

const AddtoCart: React.FC<AddtoCartProps> = ({ product, ...props }) => {
	const { addItem } = useCart();
	const { showToast } = useToast();
	const router = useRouter();
	return (
		<Button
			variant='primary'
			className='w-full'
			size='sm'
			onClick={() => {
				addItem(product);
				showToast(`Added ${product.Name} (R${product.Price.toFixed(2)}) to cart!`);
				router.push('/menu/cart');
			}}
			{...props}>
			<BiSolidCartAdd
				color='white'
				size={24}
			/>
			Add to Cart
		</Button>
	);
};

export default AddtoCart;
</file>

<file path="client/src/app/menu/[Products]/[product]/components/comments.tsx">
import { getCommentsForProduct } from '@/lib/supabase/comments';
import Button from '@/components/ui/Button';
import { BiCommentAdd } from 'react-icons/bi';
import Section from '@/components/ui/layout/Section';

interface CommentsProps {
	product: ProductType;
}

/**
 * Displays comments for a given product.
 * Fetches comments for the specific product from Supabase.
 * Note: Comment submission is handled via client-side components.
 * @param product The product for which to display comments.
 */
const Comments: React.FC<CommentsProps> = async ({ product }) => {
	// Determine product id/key used in this app (fallbacks for different shapes)
	const productKey = (product as any).ProductID || (product as any).id || (product as any).Name || (product as any).slug || (product as any).Slug;
	
	let comments: any[] = [];
	try {
		if (productKey) {
			comments = (await getCommentsForProduct(productKey)) || [];
		}
	} catch (err) {
		console.error('Failed to load comments', err);
	}

	return (
		<Section tittle='Reviews & Comments'>
			{/* Existing Comments */}
			<ul className='space-y-6'>
				{comments.length > 0 ? (
					comments.map((comment) => (
						<li
							key={comment.id}
							className='bg-black/20 border border-white/50 rounded-md p-4'>
							<div className='flex items-start gap-4'>
								<div className='flex-shrink-0 w-10 h-10 bg-yellow-600 rounded-full flex items-center justify-center text-white font-bold text-lg'>
									{(comment.user_name || 'U').charAt(0).toUpperCase()}
								</div>
								<div className='flex-1'>
									<div className='flex justify-between items-center mb-1'>
										<span className='font-bold text-white'>{comment.user_name || 'Anonymous'}</span>
										<span className='text-xs text-white/70'>
											{new Date(comment.created_at).toLocaleDateString()}
										</span>
									</div>
									<p className='text-white'>{comment.body}</p>
									<button className='mt-3 px-3 py-1 bg-yellow-600 text-white text-xs font-semibold rounded-md hover:bg-yellow-600/100 transition-colors duration-200'>
										Reply
									</button>
								</div>
							</div>
						</li>
					))
				) : (
					<li className='text-center text-white/70 py-4'>
						No comments yet. Be the first to review!
					</li>
				)}
			</ul>
		</Section>
	);
};

export default Comments;
</file>

<file path="client/src/app/menu/[Products]/[product]/components/FavoriteButton.tsx">
'use client';

import React, { useState, useEffect } from 'react';
import { FaHeart, FaRegHeart } from 'react-icons/fa';
import { useAuth } from '@/lib/supabase/auth/useAuth';
import { getUserFavorites, toggleFavorite } from '@/lib/supabase/favorites';

import Button from '@/components/ui/Button';

interface FavoriteButtonProps {
	product: ProductType;
}

const FavoriteButton: React.FC<FavoriteButtonProps> = ({ product }) => {
	const [isFavorite, setIsFavorite] = useState(false);
	const [isLoading, setIsLoading] = useState(false);
	const { user } = useAuth();
	const userId = (user as any)?.id || (user as any)?.uid || null;

	// Determine product id/key used in this app (fallbacks for different shapes)
	const productKey = (product as any).ProductID || (product as any).id || (product as any).Name || (product as any).slug || (product as any).Slug;

	useEffect(() => {
		if (!userId || !productKey) return;

		const checkFavoriteStatus = async () => {
			try {
				const favorites = await getUserFavorites(userId);
				setIsFavorite(favorites.includes(productKey));
			} catch (error) {
				console.error('Error checking favorite status:', error);
			}
		};

		checkFavoriteStatus();
	}, [userId, productKey]);

	const handleToggleFavorite = async () => {
		if (!userId) {
			alert('Please log in to save favorites');
			return;
		}

		setIsLoading(true);
		try {
			const result = await toggleFavorite(userId, productKey);
			setIsFavorite(result.added);
		} catch (error) {
			console.error('Error toggling favorite:', error);
			alert('Failed to update favorites');
		} finally {
			setIsLoading(false);
		}
	};

	return (
		<Button
			onClick={handleToggleFavorite}
			disabled={isLoading || !userId}
			className={`flex items-center justify-center gap-2 px-4 py-2 rounded-md border border-transparent font-semibold text-white transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black/50 focus:ring-white ${
				isLoading || !userId ? 'bg-yellow-900/50 cursor-not-allowed' : 'bg-yellow-600 hover:bg-yellow-700'
			}`}
			aria-live='polite'>
			{isLoading ? (
				<>
					<div className='w-4 h-4 border-2 border-white/50 border-t-white rounded-full animate-spin'></div>
					<span>Updating...</span>
				</>
			) : (
				<>
					{isFavorite ? <FaHeart /> : <FaRegHeart />}
					<span>{isFavorite ? 'Saved' : 'Save to Favorites'}</span>
				</>
			)}
		</Button>
	);
};

export default FavoriteButton;
</file>

<file path="client/src/app/menu/[Products]/[product]/components/ProductInfo.tsx">
import React from 'react';
import { FaExclamationTriangle, FaLeaf, FaFire } from 'react-icons/fa';

interface ProductInfoProps {
	product: ProductType;
}

const ProductInfo: React.FC<ProductInfoProps> = ({ product }) => {
	// Mock nutritional data - can be replaced with real data from product
	const nutritionalInfo = {
		calories: product?.nutritional?.calories || 450,
		protein: product?.nutritional?.protein || '12g',
		carbs: product?.nutritional?.carbs || '45g',
		fat: product?.nutritional?.fat || '18g',
		fiber: product?.nutritional?.fiber || '3g',
		sugar: product?.nutritional?.sugar || '8g',
	};

	// Mock allergen info - can be replaced with real data from product
	const allergens = product?.allergens || ['Gluten', 'Dairy', 'Eggs'];
	const isVegetarian = product?.isVegetarian || true;
	const isSpicy = product?.isSpicy || true;

	return (
		<div className=' p-2 rounded-md text-white space-y-8'>
			{/* Product Name and Price */}
			<article>
				<h1 className='text-4xl font-extrabold'>{product.Name}</h1>
				<p className='text-3xl text-center text-yellow-500 font-bold text-white mt-2'>
					R{product.Price.toFixed(2)}
				</p>
			</article>

			{/* Description & Dietary Tags */}
			<article>
				<h2 className='text-2xl font-bold text-white mb-3'>Description</h2>
				<ul className='list-disc list-inside space-y-1.5 text-white'>
					{product.Description.map((d: string, index: number) => (
						<li key={index}>{d}</li>
					))}
				</ul>
				<div className='flex flex-wrap gap-3 mt-4'>
					{isVegetarian && (
						<span className='flex items-center gap-2 px-3 py-1 bg-yellow-600 text-white rounded-full text-sm font-semibold'>
							<FaLeaf /> Vegetarian
						</span>
					)}
					{isSpicy && (
						<span className='flex items-center gap-2 px-3 py-1 bg-yellow-600 text-white rounded-full text-sm font-semibold'>
							<FaFire /> Spicy
						</span>
					)}
				</div>
			</article>

			{/* Allergen Warnings Card */}
			{allergens.length > 0 && (
				<article className='bg-yellow-500/20 border border-yellow-500/50 rounded-md p-4'>
					<div className='flex items-center gap-3 mb-3'>
						<FaExclamationTriangle className='text-yellow-400 text-xl' />
						<h3 className='text-xl font-bold text-white'>Allergen Information</h3>
					</div>
					<p className='text-white text-sm mb-3'>This product contains the following allergens:</p>
					<div className='flex flex-wrap gap-2'>
						{allergens.map((allergen: string, index: number) => (
							<span
								key={index}
								className='px-2.5 py-1 bg-yellow-600 text-white rounded-md text-xs font-medium'>
								{allergen}
							</span>
						))}
					</div>
				</article>
			)}

			{/* Nutritional Information Card */}
			<div className='bg-black/20 rounded-md p-4'>
				<h3 className='text-xl font-bold text-white mb-4 text-center'>Nutritional Information</h3>
				<div className='grid grid-cols-2 sm:grid-cols-3 gap-4'>
					{Object.entries(nutritionalInfo).map(([key, value]) => (
						<div
							key={key}
							className='text-center bg-yellow-500/20 p-3 rounded-md'>
							<div className='text-2xl font-bold text-white'>{value}</div>
							<div className='text-sm text-white capitalize'>{key}</div>
						</div>
					))}
				</div>
			</div>
		</div>
	);
};

export default ProductInfo;
</file>

<file path="client/src/app/menu/[Products]/[product]/components/RelatedProducts.tsx">
import React from 'react';
import Image from 'next/image';
import Link from 'next/link';


import Section from '@/components/ui/layout/Section';

interface RelatedProductsProps {
	currentProduct: ProductType;
	categoryName: string;
	products: ProductType[];
}

const RelatedProducts: React.FC<RelatedProductsProps> = ({ currentProduct, categoryName, products }) => {
	if (products.length === 0) {
		return null;
	}

	return (
		<Section tittle='You Might Also Like'>
			<div className='grid grid-cols-3 sm:grid-cols-2 md:grid-cols-4 gap-2'>
				{products.map((product) => (
					<Link
						key={product.ProductID}
						href={`/menu/${categoryName}/${product.Name.toLowerCase().replace(/\s+/g, '-')}`}
						className='group relative bg-yellow-700  rounded-md p-2 pt-6  flex flex-col transition-transform duration-300 hover:scale-105 hover:border-white'>
						{product.Image && (
							<div className='relative w-full aspect-square  overflow-hidden rounded-md'>
								<Image
									src={product.Image}
									alt={product.Name}
									fill
									className=' transition-transform duration-300 group-hover:scale-110'
								/>
							</div>
						)}
						<div className='flex-grow  flex flex-col'>
							<h1 className='font-semibold text-white text-base mb-2 line-clamp-2 flex-grow'>
								{product.Name}
							</h1>
							<p className='text-white font-bold text-md mt-auto'>R{product.Price.toFixed(2)}</p>
							{product.badge && (
								<span className='absolute w-full top-0 right-0 px-2 py-1 rounded-t-md text-xs font-bold bg-yellow-600 text-white'>
									{product.badge}
								</span>
							)}
						</div>
					</Link>
				))}
			</div>
		</Section>
	);
};

export default RelatedProducts;
</file>

<file path="client/src/app/menu/[Products]/[product]/loading.tsx">
import Loading from '@/components/ui/Loading';

export default function LoadingPage() {
	return <Loading message='Loading Product Details...' />;
}
</file>

<file path="client/src/app/menu/[Products]/[product]/page.tsx">
import Image from 'next/image';
import SocialButtons from '../components/SocialButtons';
import Comments from './components/comments';
import ProductInfo from './components/ProductInfo';
import RelatedProducts from './components/RelatedProducts';
import FavoriteButton from './components/FavoriteButton';
import AddtoCart from '@/app/menu/[Products]/[product]/components/AddtoCart';
import Main from '@/components/ui/layout/Main';
import Section from '@/components/ui/layout/Section';
import { createClient } from '@/lib/supabase/server';

async function ProductPage({ params }: { params: Promise<{ product: string; Products: string }> }) {
	const { product: productId, Products: categorySlug } = await params;
	const supabase = await createClient();

	// Reconstruct name from slug - handle both hyphens and spaces
	// The slug might be "coca-cola" but the DB has "Coca-Cola" or "Coca Cola"
	// We'll try multiple patterns to match both hyphens and spaces
	const productNameSlug = productId.replace(/-/g, ' ');
	const categoryName = categorySlug.replace(/-/g, ' ');

	// Fetch product
	type ProductRow = {
		id: string;
		name: string;
		description: string | null;
		price: number | null;
		image_url: string | null;
		badge: string | null;
		likes: number | null;
	};

	// Try multiple search patterns to handle hyphens in product names
	// PostgreSQL ilike uses SQL LIKE patterns, so we use % wildcards
	let productData = null;
	let error = null;

	// Strategy: Split slug into words and create flexible pattern
	// "coca-cola" -> ["coca", "cola"] -> pattern "%coca%cola%" 
	// This matches "Coca-Cola", "Coca Cola", "coca cola", etc.
	const words = productId.split('-').filter(w => w.length > 0);
	const flexiblePattern = words.length > 1 
		? `%${words.join('%')}%`  // "%coca%cola%" matches both hyphens and spaces
		: `%${productId}%`;        // Single word, just use wildcards

	// Try flexible pattern first (handles hyphens, spaces, and case)
	const { data: patternMatch, error: patternError } = await supabase
		.from('products')
		.select('*')
		.ilike('name', flexiblePattern)
		.limit(10); // Get multiple matches to find the best one

	if (patternMatch && patternMatch.length > 0 && !patternError) {
		// If multiple matches, prefer exact match (with spaces or hyphens)
		const typedMatches = patternMatch as ProductRow[];
		const exactWithSpaces = typedMatches.find(p => 
			p.name.toLowerCase().replace(/[-\s]/g, ' ') === productNameSlug.toLowerCase()
		);
		const exactWithHyphens = typedMatches.find(p => 
			p.name.toLowerCase().replace(/[-\s]/g, '-') === productId.toLowerCase()
		);
		
		productData = exactWithSpaces || exactWithHyphens || typedMatches[0];
	} else {
		// Fallback: try exact match with spaces
		const { data: exactMatch, error: exactError } = await supabase
			.from('products')
			.select('*')
			.ilike('name', productNameSlug)
		.single();

		if (exactMatch && !exactError) {
			productData = exactMatch as ProductRow;
		} else {
			error = exactError || patternError;
		}
	}

	if (error || !productData) {
		return <div>Product not found</div>;
	}

	const product = productData as ProductRow;

	// Map to UI ProductType
	const productUI: ProductType = {
		ProductID: product.id,
		Name: product.name,
		Description: [product.description || ''],
		Price: product.price || 0,
		Image: product.image_url || '/Menus/placeholder.png',
		badge: product.badge || undefined,
		rating: product.likes ? 5 : undefined,
	};

	// Fetch related products (same category, exclude current)
	const { data: relatedData } = await supabase
		.from('products')
		.select('*')
		.ilike('category', categoryName)
		.neq('id', productUI.ProductID)
		.limit(4);

	const relatedProducts: ProductType[] = ((relatedData as ProductRow[]) || []).map((p) => ({
		ProductID: p.id,
		Name: p.name,
		Description: [p.description || ''],
		Price: p.price || 0,
		Image: p.image_url || '/Menus/placeholder.png',
		badge: p.badge || undefined,
		rating: p.likes ? 5 : undefined,
	}));

	return (
		<Main>
			{/* Main Product Section */}
			<Section>
				{/* Product Image */}
				{productUI.Image && (
					<div className='lg:w-1/2 flex justify-center items-start'>
						<div className='relative w-full max-w-md aspect-square bg-black/20 rounded-md shadow-lg overflow-hidden'>
							<Image
								src={productUI.Image}
								alt={productUI.Name}
								fill
								style={{ objectFit: 'contain' }}
								className='rounded-md'
							/>
						</div>
					</div>
				)}

				{/* Product Information */}
				<div className='lg:w-1/2'>
					<ProductInfo product={productUI} />

					{/* Action Buttons */}
					<div className='flex flex-wrap gap-4 mt-8'>
						<AddtoCart
							product={productUI}
							className='bg-black/50 hover:bg-yellow-500'>
							Add to Cart
						</AddtoCart>
						<FavoriteButton product={productUI} />
						<SocialButtons product={productUI} />
					</div>
				</div>
			</Section>

			{/* Related Products */}
			<RelatedProducts
				currentProduct={productUI}
				categoryName={categorySlug}
				products={relatedProducts}
			/>

			{/* Comments Section */}

			<Comments product={productUI} />
		</Main>
	);
}

export default ProductPage;
</file>

<file path="client/src/app/menu/[Products]/components/CommentModal.tsx">
import { useState } from 'react';
import { createClient } from '@/lib/supabase/client';

import { useAuth } from '@/lib/supabase/auth/useAuth';
import { useParams, useRouter } from 'next/navigation';
interface CommentModalProps {
	product: ProductType;
	handleCloseCommentModal: () => void;
}
const CommentModal: React.FC<CommentModalProps> = ({ product, handleCloseCommentModal }) => {
	const [commentText, setCommentText] = useState('');
	const { user } = useAuth();
	const route = useRouter();
	const params = useParams() as { Products: string };
	const handleSubmitComment = async () => {
		if (!product?.Name || !commentText.trim() || !user?.id) {
			handleCloseCommentModal();
			return;
		}
		try {
			const supabase = createClient();
			// @ts-ignore - Supabase type inference issue with Database types
			await supabase.from('comments').insert({
				product_id: product.ProductID || product.Name,
				user_id: user?.id || null,
				user_name: (user as any)?.user_metadata?.full_name || (user as any)?.email || 'Anonymous',
				body: commentText.trim(),
				created_at: new Date().toISOString(),
			});
			setCommentText('');
			handleCloseCommentModal();
			route.push(`/menu/${params.Products}/${product.Name.toLowerCase().replace(/\s+/g, '-')}`);
		} catch (error) {
			console.error('Error adding comment:', error);
			alert('Failed to add comment. Please try again.');
		}
	};
	return (
		<main className='fixed inset-0 bg-black flex items-center justify-center z-50 p-4'>
			<div className='bg-black/50 p-6 rounded-md shadow-lg w-full max-w-md text-white'>
				<h2>Add a Comment</h2>
				<textarea
					className='w-full p-3 bg-transparent border border-white rounded-md mb-4 focus:outline-none focus:ring-2 focus:ring-white text-white placeholder-white/70'
					rows={4}
					placeholder='Enter your comment...'
					value={commentText}
					onChange={(e) => setCommentText(e.target.value)}></textarea>
				<div className='flex justify-end gap-2'>
					<button
						className='px-4 py-2 bg-yellow-700 rounded-md hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-white'
						onClick={handleCloseCommentModal}>
						Cancel
					</button>
					<button
						className='px-4 py-2 bg-yellow-700 text-white rounded-md hover:bg-yellow-800 focus:outline-none focus:ring-2 focus:ring-white'
						onClick={handleSubmitComment}>
						Submit Comment
					</button>
				</div>
			</div>
		</main>
	);
};

export default CommentModal;
</file>

<file path="client/src/app/menu/[Products]/components/CommentsButton.tsx">
'use client';

import React, { useState, useEffect } from 'react';
import { BiSolidComment } from 'react-icons/bi';
import Button from '@/components/ui/Button';
import { useAuth } from '@/lib/supabase/auth/useAuth';
import { getCommentsForProduct } from '@/lib/supabase/comments';

import CommentModal from './CommentModal';

interface CommentsButtonsProps {
	product: ProductType;
}

const CommentsButton: React.FC<CommentsButtonsProps> = ({ product }) => {
	const [commentCount, setCommentCount] = useState(0);
	const [showCommentModal, setShowCommentModal] = useState(false);
	const [loading, setLoading] = useState(true);
	const { user } = useAuth();

	// Determine product id/key used in this app (fallbacks for different shapes)
	const productKey = (product as any).ProductID || (product as any).id || (product as any).Name || (product as any).slug || (product as any).Slug;

	const handleCommentClick = () => {
		const userId = (user as any)?.id || (user as any)?.uid || null;
		if (!userId) {
			alert('Please login to comment');
			return;
		}
		setShowCommentModal(true);
	};

	const handleCloseCommentModal = () => {
		setShowCommentModal(false);
	};

	useEffect(() => {
		let mounted = true;
		const load = async () => {
			setLoading(true);
			try {
				if (!productKey) {
					setCommentCount(0);
					setLoading(false);
					return;
				}
				const comments = await getCommentsForProduct(productKey);
				if (!mounted) return;
				setCommentCount(Array.isArray(comments) ? comments.length : 0);
			} catch (err) {
				console.error('Failed to load comments', err);
			}
			setLoading(false);
		};
		load();
		return () => {
			mounted = false;
		};
	}, [productKey]);

	if (showCommentModal) {
		return (
			<CommentModal
				handleCloseCommentModal={handleCloseCommentModal}
				product={product}
			/>
		);
	}

	return (
		<Button
			disabled={loading}
			loading={loading}
			variant='icon'
			onClick={handleCommentClick}
			className='text-white'>
			<BiSolidComment size={20} />
			<span className='text-xs text-center truncate'>
				{commentCount} Comment{commentCount !== 1 ? 's' : ''}
			</span>
		</Button>
	);
};

export default CommentsButton;
</file>

<file path="client/src/app/menu/[Products]/components/FilterSortBar.tsx">
'use client';

import React, { useState, useEffect } from 'react';
import { FaSort, FaFilter } from 'react-icons/fa';
import Button from '@/components/ui/Button';
import { useRouter, useSearchParams, usePathname } from 'next/navigation';

const FilterSortBar: React.FC = () => {
	const router = useRouter();
	const searchParams = useSearchParams();
	const pathname = usePathname();

	const currentSort = searchParams.get('sort') || 'default';
	const currentMinPrice = Number(searchParams.get('minPrice')) || 0;
	const currentMaxPrice = Number(searchParams.get('maxPrice')) || 1000;

	const [showFilters, setShowFilters] = useState(false);
	const [localMinPrice, setLocalMinPrice] = useState(currentMinPrice);
	const [localMaxPrice, setLocalMaxPrice] = useState(currentMaxPrice);

	useEffect(() => {
		setLocalMinPrice(currentMinPrice);
		setLocalMaxPrice(currentMaxPrice);
	}, [currentMinPrice, currentMaxPrice]);

	const updateParams = (updates: Record<string, string | number | null>) => {
		const params = new URLSearchParams(searchParams.toString());
		Object.entries(updates).forEach(([key, value]) => {
			if (value === null) {
				params.delete(key);
			} else {
				params.set(key, String(value));
			}
		});
		router.replace(`${pathname}?${params.toString()}`, { scroll: false });
	};

	const handleSortChange = (sortType: string) => {
		updateParams({ sort: sortType });
	};

	const handleApplyFilters = () => {
		updateParams({
			minPrice: localMinPrice,
			maxPrice: localMaxPrice,
		});
		setShowFilters(false);
	};

	const handleResetFilters = () => {
		setLocalMinPrice(0);
		setLocalMaxPrice(1000);
		updateParams({
			minPrice: null,
			maxPrice: null,
			sort: null,
		});
		setShowFilters(false);
	};

	const inputStyles =
		'w-24 p-2 border border-white/50 rounded-md bg-black/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200';

	return (
		<div className='bg-black/50 blur-[0.1px] backdrop-blur-md p-2  sticky top-9 z-20 col-span-full mt-0'>
			<div className='flex flex-col md:flex-row gap-4 items-center justify-between'>
				{/* Sort Options */}
				<div className='flex items-center gap-3'>
					<FaSort size={20} />
					<label
						htmlFor='sort-select'
						className='font-semibold'>
						Sort by:
					</label>
					<select
						id='sort-select'
						value={currentSort}
						onChange={(e) => handleSortChange(e.target.value)}
						className='bg-black/20 text-white border border-white/50 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all duration-200'>
						<option value='default'>Default</option>
						<option value='price-low'>Price: Low to High</option>
						<option value='price-high'>Price: High to Low</option>
						<option value='popularity'>Most Popular</option>
						<option value='name'>Name: A-Z</option>
					</select>
				</div>

				{/* Filter Toggle */}
				<Button
					variant='primary'
					onClick={() => setShowFilters(!showFilters)}
					className='flex items-center gap-2'>
					<FaFilter />
					<span>{showFilters ? 'Hide' : 'Show'} Filters</span>
				</Button>
			</div>

			{/* Filter Panel */}
			{showFilters && (
				<article className=' p-4 space-y-4'>
					<h3 className='text-lg font-semibold mb-2'>Price Range</h3>
					<div className='flex flex-col md:flex-row flex-wrap gap-4 items-center'>
						<div className='flex items-center gap-2'>
							<label
								htmlFor='min-price'
								className='text-sm'>
								Min:
							</label>
							<input
								id='min-price'
								type='number'
								value={localMinPrice}
								onChange={(e) => setLocalMinPrice(Number(e.target.value))}
								className={inputStyles}
								placeholder='0'
							/>
						</div>
						<div className='flex items-center gap-2'>
							<label
								htmlFor='max-price'
								className='text-sm'>
								Max:
							</label>
							<input
								id='max-price'
								type='number'
								value={localMaxPrice}
								onChange={(e) => setLocalMaxPrice(Number(e.target.value))}
								className={inputStyles}
								placeholder='1000'
							/>
						</div>
						<div className='flex gap-2 ml-auto'>
							<Button
								variant='primary'
								onClick={handleResetFilters}>
								Reset
							</Button>
							<Button
								variant='primary'
								onClick={handleApplyFilters}>
								Apply
							</Button>
						</div>
					</div>
				</article>
			)}
		</div>
	);
};

export default FilterSortBar;
</file>

<file path="client/src/app/menu/[Products]/components/LikesButton.tsx">
'use client';

import React, { useState, useEffect } from 'react';
import { BiSolidLike } from 'react-icons/bi';
import Button from '@/components/ui/Button';
import { createClient } from '@/lib/supabase/client';
import { useAuth } from '@/lib/supabase/auth/useAuth';

interface SocialButtonsProps {
	product: ProductType;
}

const LikesButton: React.FC<SocialButtonsProps> = ({ product }) => {
	const [likes, setLikes] = useState<{ likes: number; likedBy: string[] }>({
		likes: 0,
		likedBy: [],
	});
	const [isLiked, setIsLiked] = useState(false);
	const [loading, setLoading] = useState(true);
	const { user } = useAuth();
	const userId = (user as any)?.id;
	useEffect(() => {
		let mounted = true;
		const load = async () => {
			const supabase = createClient();
			const { data, error } = await supabase
				.from('products')
				.select('likes, liked_by')
				.eq('id', product.ProductID || product.Name)
				.single();
			if (error) {
				// If product row doesn't exist, initialize it
				// @ts-ignore - Supabase type inference issue with Database types
				await supabase.from('products').upsert({
					id: product.ProductID || product.Name,
					name: product.Name,
					price: product.Price,
					image_url: product.Image || null,
					likes: 0,
					liked_by: [],
				});
				if (mounted) {
					setLikes({ likes: 0, likedBy: [] });
					setIsLiked(false);
					setLoading(false);
				}
				return;
			}
			if (mounted) {
				// @ts-ignore - Supabase type inference issue with Database types
				setLikes({ likes: data.likes || 0, likedBy: (data.liked_by as string[]) || [] });
				// @ts-ignore - Supabase type inference issue with Database types
				setIsLiked(((data.liked_by as string[]) || []).includes(userId || ''));
				setLoading(false);
			}
		};
		load();
		return () => {
			mounted = false;
		};
	}, [product.ProductID, userId]);

	const handleLike = async () => {
		const supabase = createClient();
		const liked = likes.likedBy.includes(userId || '') || false;
		const newLikes = liked ? Math.max(0, likes.likes - 1) : likes.likes + 1;
		const newLikedBy = liked
			? likes.likedBy.filter((id) => id !== userId)
			: [...likes.likedBy, userId];

		// Optimistic UI
		setLikes({ likes: newLikes, likedBy: newLikedBy });
		setIsLiked(!liked);

		// Persist
		await supabase
			.from('products')
			// @ts-ignore - Supabase type inference issue with Database types
			.update({ likes: newLikes, liked_by: newLikedBy })
			.eq('id', product.ProductID || product.Name);
	};

	return (
		<Button
			disabled={loading}
			loading={loading}
			variant='icon'
			onClick={handleLike}
			className={likes.likedBy.includes(userId || '') ? 'text-yellow-700' : 'text-white'}
			aria-label={isLiked ? 'Unlike product' : 'Like product'}>
			<BiSolidLike
				size={20}
				className={isLiked ? 'text-yellow-200' : 'text-white'}
			/>
			<span className='text-xs text-center font-thin truncate font-sans'>
				{likes.likes} <span className='hidden md:inline-flex'>Likes</span>
			</span>
		</Button>
	);
};

export default LikesButton;
</file>

<file path="client/src/app/menu/[Products]/components/SocialButtons.tsx">
'use client';

import { BiSolidShare } from 'react-icons/bi';
import LikesButton from './LikesButton';

import CommentsButton from './CommentsButton';

interface SocialButtonsProps {
	product: ProductType;
}

const SocialButtons: React.FC<SocialButtonsProps> = ({ product }) => {
	const handleShare = () => {
		if (navigator.share) {
			navigator
				.share({
					title: product.Name,
					text: `Check out this product: ${product.Name}`,
					url: window.location.href, // Or the specific product URL
				})
				.catch((error) => console.error('Error sharing:', error));
		} else {
			// Fallback for browsers that don't support Web Share API
			alert('Sharing is not supported in this browser.');
			// You could also provide a copy-to-clipboard option here
		}
	};

	return (
		<div className=' grid grid-cols-3 w-full border-t-2 py-1 border-yellow-500 bg-black/50 hover:bg-yellow-500 gap-2'>
			<LikesButton product={product} />
			<CommentsButton product={product} />
			{/* Share Button */}
			<span
				className='flex items-center justify-center gap-1 truncate text-center py-0.5 cursor-pointer text-white font-bold'
				onClick={handleShare}>
				<BiSolidShare size={20} />
				<span className='text-xs text-center truncate'>Share</span>
			</span>
		</div>
	);
};

export default SocialButtons;
</file>

<file path="client/src/app/menu/[Products]/utils/likesUtils.ts">
import { createClient } from '@/lib/supabase/client';

export interface ProductLikes {
  [productKey: string]: {
    likes: number;
  };
}

export const fetchAllProductLikes = async (productKeys: string[]): Promise<ProductLikes> => {
  const likesData: ProductLikes = {};
  const supabase = createClient();
  
  try {
    // Fetch likes data for each product from Supabase
    const promises = productKeys.map(async (productKey) => {
      try {
        const { data, error } = await supabase
          .from('products')
          .select('likes')
          .eq('id', productKey)
          .single();
        
        if (!error && data) {
          // @ts-ignore - Supabase type inference issue with Database types
          likesData[productKey] = { likes: data.likes || 0 };
        } else {
          likesData[productKey] = { likes: 0 };
        }
      } catch (err) {
        likesData[productKey] = { likes: 0 };
      }
    });
    
    await Promise.all(promises);
    return likesData;
  } catch (error) {
    console.error('Error fetching product likes:', error);
    // Return default values if there's an error
    productKeys.forEach(productKey => {
      likesData[productKey] = { likes: 0 };
    });
    return likesData;
  }
};
</file>

<file path="client/src/app/menu/[Products]/loading.tsx">
import Loading from '@/components/ui/Loading';

export default function LoadingPage() {
	return <Loading message='Loading Products...' />;
}
</file>

<file path="client/src/app/menu/[Products]/page.tsx">
import { Suspense } from 'react';
import Loading from '@/components/ui/Loading';
import FilterSortBar from '@/app/menu/[Products]/components/FilterSortBar';
import Main from '@/components/ui/layout/Main';
import ProductCard from '../components/ProductCard';
import { createClient } from '@/lib/supabase/server';

export default async function Page({
	params,
	searchParams,
}: {
	params: Promise<{ Products: string }>;
	searchParams: Promise<{ sort?: string; minPrice?: string; maxPrice?: string }>;
}) {
	const { Products: categorySlug } = await params;
	const { sort = 'default', minPrice = '0', maxPrice = '1000' } = await searchParams;
	const supabase = await createClient();

	// Reconstruct category name from slug (e.g., "kota-meals" -> "kota meals")
	// This is a simple heuristic. For robust matching, we might need a slug column in DB.
	const categoryName = categorySlug.replace(/-/g, ' ');

	// Fetch products matching the category (case-insensitive)
	const { data: productsData, error } = await supabase
		.from('products')
		.select('*')
		.ilike('category', categoryName);

	if (error) {
		console.error('Error fetching products:', error);
	}

	type ProductRow = {
		id: string;
		name: string;
		description: string | null;
		price: number | null;
		image_url: string | null;
		badge: string | null;
		likes: number | null;
	};

	let products: ProductRow[] = (productsData as ProductRow[]) || [];

	// Map to UI ProductType
	let uiProducts: ProductType[] = products.map((p) => ({
		ProductID: p.id,
		Name: p.name,
		Description: [p.description || ''],
		Price: p.price || 0,
		Image: p.image_url || '/Menus/placeholder.png',
		badge: p.badge || undefined,
		rating: p.likes ? 5 : undefined,
	}));

	// Filter by price
	const min = Number(minPrice);
	const max = Number(maxPrice);
	uiProducts = uiProducts.filter((p) => p.Price >= min && p.Price <= max);

	// Sort products
	switch (sort) {
		case 'price-low':
			uiProducts.sort((a, b) => a.Price - b.Price);
			break;
		case 'price-high':
			uiProducts.sort((a, b) => b.Price - a.Price);
			break;
		case 'popularity':
			// Ideally fetch likes count from DB and sort there, or sort here if we have the data
			// For now, we can't easily sort by popularity without likes data joined.
			// Assuming 'likes' column in products table is the count.
			// If we mapped it to rating, we can use that, or fetch likes separately.
			// Let's assume p.likes is the count.
			uiProducts.sort((a, b) => {
				const likesA = products.find((p: ProductRow) => p.id === a.ProductID)?.likes || 0;
				const likesB = products.find((p: ProductRow) => p.id === b.ProductID)?.likes || 0;
				return likesB - likesA;
			});
			break;
		case 'name':
			uiProducts.sort((a, b) => a.Name.localeCompare(b.Name));
			break;
		default:
			break;
	}

	return (
		<>
			<Suspense fallback={<div className="h-12" />}>
				<FilterSortBar />
			</Suspense>
			<Main>
				<div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 content-stretch gap-2'>
					<Suspense fallback={<Loading message='Loading Products...' />}>
						{uiProducts.length > 0 ? (
							uiProducts.map((product) => (
								<ProductCard
									product={product}
									categoryName={categorySlug} // Use slug for links
									key={product.ProductID}
								/>
							))
						) : (
							<div className="col-span-full text-center py-10 text-white">
								<p>No products found in this category.</p>
							</div>
						)}
					</Suspense>
				</div>
			</Main>
		</>
	);
}
</file>

<file path="client/src/app/menu/cart/components/CartFooter.tsx">
'use client';
import Button from '@/components/ui/Button';
import { useCart } from '@/lib/context/CartContext';
import { addOrder } from '@/lib/supabase/orders/orders';
import { useRouter } from 'next/navigation';
import { useState } from 'react';
import { IoAddCircle } from 'react-icons/io5';
import { TbCancel, TbMenuOrder } from 'react-icons/tb';

function CartFooter() {
	const router = useRouter();
	const { cartItems, clearCart, totalPrice, totalQuantity } = useCart();
	const [isPlacingOrder, setIsPlacingOrder] = useState(false);

	const handlePlaceOrder = async () => {
		if (isPlacingOrder) return;
		setIsPlacingOrder(true);
		try {
			const userId = 'anonymous';
			// If you have user from context, pass real user id here
			await addOrder(userId, cartItems, totalPrice, totalQuantity);
			router.push('/orders');
			clearCart();
		} catch (error) {
			console.error('Failed to place order: ', error);
			alert('There was an issue placing your order. Please try again.');
		} finally {
			setIsPlacingOrder(false);
		}
	};

	const handleCancelOrder = () => {
		clearCart();
		router.back();
	};



	return (
		
			<div className='bg-black/50 fixed bottom-0 pb-4  flex flex-col md:flex-row items-center justify-between gap-2'>
				{/* Order Summary */}
				<div className='text-center md:text-left'>
					<p className='text-lg font-bold'>
						Total Items: <span className='font-extrabold'>{totalQuantity}</span>
					</p>
					<p
						className='text-xl font-bold'
						style={{ filter: 'drop-shadow(0 0 2px #000000)' }}>
						Total Price: <span className='font-extrabold'>R{totalPrice.toFixed(2)}</span>
					</p>
				</div>

				{/* Action Buttons */}
				<nav className='flex gap-3 px-2 w-full md:w-auto'>
					{/* Button to add more items (goes back to menu) */}
					<Button onClick={() => router.back()}>
						<IoAddCircle size={25} /> Add Items
					</Button>
					
					{cartItems.length > 0 && (
						<Button
							onClick={handlePlaceOrder}
							// className={buttonStyle}
							disabled={isPlacingOrder}>
							{isPlacingOrder ? (
								<div className='w-5 h-5 border-2 border-white/50 border-t-white rounded-full animate-spin'></div>
							) : (
								<TbMenuOrder size={22} />
							)}
							<span>{isPlacingOrder ? 'Placing Order...' : 'Place Order'}</span>
						</Button>
					)}

					<Button
						onClick={handleCancelOrder}
                    // className={buttonStyle}
                >
						<TbCancel size={22} />
						<span>Cancel Order</span>
					</Button>
				</nav>
			</div>
	
	);
}

export default CartFooter;
</file>

<file path="client/src/app/menu/cart/loading.tsx">
import Loading from '@/components/ui/Loading';

export default function LoadingPage() {
	return <Loading message='Loading Cart...' />;
}
</file>

<file path="client/src/app/menu/cart/page.tsx">
import React, { Suspense } from 'react';
import Loading from '@/components/ui/Loading';
import { IoClose } from 'react-icons/io5';
import CartProductForm from '@/lib/forms/CartProductForm';
import CartFooter from '@/app/menu/cart/components/CartFooter';
import AppLink from '@/components/ui/Link';
import Main from '@/components/ui/layout/Main';


const CartPage: React.FC = () => {
	return (
		<Main >
			<AppLink className="mb-2" href="/menu" >
				<IoClose /> Close Cart
			</AppLink>
			<Suspense fallback={<Loading message="Loading Cart..." />}>
				<CartProductForm />
			</Suspense>
			<Suspense fallback={<Loading message="Loading Cart footer..." />}>
				{/* Fixed footer section for total summary and action buttons */}
				<CartFooter />
			</Suspense>
			</Main>
	
	);
};

export default CartPage;
</file>

<file path="client/src/app/menu/components/CategoryCard.tsx">
import React from 'react';
import Image from 'next/image';
import AppLink from '@/components/ui/Link';

import Section from '@/components/ui/layout/Section';

interface CategoryCardProps {
	group: {
		Name: string;
		Products: ProductType[];
		Image?: string;
		Description?: string;
	};
}

const CategoryCard: React.FC<CategoryCardProps> = ({ group }) => (
	<AppLink
		href={`/menu/${group.Name.toLowerCase().replace(/\s+/g, '-')}`}
		aria-label={`View ${group.Name} menu`}
		className='block p-0 m-0 group rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black/50 focus:ring-yellow-500'>
		<Section>
			{group.Image && (
				<div className='relative w-full aspect-[4/3] mb-4 bg-black/20 rounded-md overflow-hidden'>
					<Image
						src={group.Image}
						alt={group.Name}
						fill
						className='object-contain rounded-md transition-transform duration-300 group-hover:scale-110'
					/>
				</div>
			)}
			<div className='flex-grow flex flex-col'>
				<h3 className='text-xl font-bold text-white mb-2'>{group.Name}</h3>
				{group.Description && <p>{group.Description}</p>}
			</div>
			<span className='bg-yellow-700 text-xs font-bold px-3 py-1 rounded-full text-white self-center mt-auto'>
				{group.Products.length} items
			</span>
		</Section>
	</AppLink>
);

export default CategoryCard;
</file>

<file path="client/src/app/menu/components/MenuSections.tsx">
'use client';

import React from 'react';

import CategoryCard from '@/app/menu/components/CategoryCard';
import NoResults from '@/app/menu/components/NoResults';
import ProductCard from './ProductCard';

interface MenuSectionsProps {
	categories: ProductsType;
	matchingProducts: ProductType[];
	productCategoryMap?: Map<string, string>; // Map of ProductID -> category slug
	isSearching: boolean;
}

const MenuSections: React.FC<MenuSectionsProps> = ({ categories, matchingProducts, productCategoryMap, isSearching }) => {
	const showSearchResults = isSearching;

	return (
		<>
			{showSearchResults ? (
				<div className='flex flex-col gap-6'>
					{categories.length > 0 || matchingProducts.length > 0 ? (
						<div className='flex flex-col gap-6'>
							{/* Categories Section */}
							{categories.length > 0 && (
								<div className='space-y-4'>
									<h2 className='text-2xl font-bold text-white border-b border-yellow-500 pb-2'>
										Matching Categories
									</h2>
									<div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4'>
										{categories.map((category) => (
											<CategoryCard
												key={category.Name}
												group={category}
											/>
										))}
									</div>
								</div>
							)}

							{/* Products Section */}
							{matchingProducts.length > 0 && (
								<div className='space-y-4'>
									<h2 className='text-2xl font-bold text-white border-b border-yellow-500 pb-2'>
										Matching Products
									</h2>
									<div className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4'>
										{matchingProducts.map((product) => {
											// Get category slug from map, fallback to 'menu' if not found
											const categorySlug = productCategoryMap?.get(product.ProductID) || 'menu';
											return (
												<ProductCard
													key={product.ProductID}
													product={product}
													categoryName={categorySlug}
												/>
											);
										})}
									</div>
								</div>
							)}
						</div>
					) : (
						<NoResults />
					)}
				</div>
			) : (
				// Default: show all categories
				<ul className='grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4'>
					{categories.map((group: ProductsType[number]) => {
						return (
							<CategoryCard
								key={group.Name}
								group={group}
							/>
						);
					})}
				</ul>
			)}
		</>
	);
};

export default MenuSections;
</file>

<file path="client/src/app/menu/components/NoResults.tsx">
import React from 'react';
import { FaRegSadTear } from 'react-icons/fa';

const NoResults: React.FC = () => (
	<div className='col-span-full flex flex-col items-center justify-center text-center text-white p-8'>
		<div className='bg-black/50 border border-white/50 rounded-md p-8 max-w-md w-full'>
			<FaRegSadTear className='text-6xl mb-4 text-yellow-500 mx-auto' />
			<h3 className='text-2xl font-bold'>No Results Found</h3>
			<p className='text-white mt-2'>
				We couldn&apos;t find any matches for your search. Please try different keywords or browse
				our menu categories.
			</p>
		</div>
	</div>
);

export default NoResults;
</file>

<file path="client/src/app/menu/components/ProductCard.tsx">
import React from 'react';
import Image from 'next/image';
import AppLink from '@/components/ui/Link';
import LikesButton from '@/app/menu/[Products]/components/LikesButton';
import { FaStar } from 'react-icons/fa';

import AddtoCart from '@/app/menu/[Products]/[product]/components/AddtoCart';

interface ProductCardProps {
	product: ProductType;
	categoryName: string;
}

const ProductCard: React.FC<ProductCardProps> = ({ product, categoryName }) => (
	<article className='m-0 group flex flex-col h-full bg-white/10 backdrop-blur-md border border-yellow-500 rounded-md p-4 transition-shadow duration-300 hover:shadow-lg hover:shadow-yellow-500/20'>
		<span className='flex items-center justify-between gap-2'>
			{product.badge && (
				<span className='px-2 py-1 rounded-full text-xs font-bold z-10 shadow-lg bg-yellow-700 text-white'>
					{product.badge}
				</span>
			)}
			<LikesButton product={product} />
		</span>

		<div className='flex flex-col flex-grow'>
			<AppLink
				href={`/menu/${categoryName}/${product.Name.toLowerCase().replace(/\s+/g, '-')}`}
				className='flex flex-col items-center text-center flex-grow rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black/50 focus:ring-yellow-500'>
				{product.Image && (
					<div className='relative w-full aspect-[4/3] mb-4 bg-black/20 rounded-md overflow-hidden'>
						<Image
							src={product.Image}
							alt={product.Name}
							fill
							className='object-contain rounded-md transition-transform duration-300 group-hover:scale-110'
						/>
					</div>
				)}
				<h2 className='text-base font-bold text-white mb-2 line-clamp-2 flex-grow'>
					{product.Name}
				</h2>
				<p className='text-xl font-extrabold text-white mb-2'>R{product.Price.toFixed(2)}</p>
				<div className='flex items-center justify-center gap-1 mb-4'>
					<FaStar className='text-yellow-500' />
					<FaStar className='text-yellow-500' />
					<FaStar className='text-yellow-500' />
					<FaStar className='text-yellow-500' />
					<FaStar className='text-white/50' />
					<span className='text-xs text-white font-semibold ml-2'>(4.5)</span>
				</div>
			</AppLink>
		</div>

		<div className='mt-auto'>
			<AddtoCart product={product}>Add to Cart</AddtoCart>
		</div>
	</article>
);

export default ProductCard;
</file>

<file path="client/src/app/menu/components/ProductDetails.tsx">
import Image from 'next/image';
import React from 'react';

function ProductDetails({ item }: { item: CartItem }) {
	return (
		<div className='flex items-center gap-4 w-full text-white bg-black/20  rounded-md p-4'>
			{item.Image && (
				<div className=' w-20 h-20 sm:w-24 sm:h-24  flex-shrink-0'>
					<Image
						src={item.Image}
						alt={item.Name}
						height={100}
						width={100}
						className='w-full rounded-md  '
					/>
				</div>
			)}
			<div className='flex-grow flex flex-col justify-between h-full'>
				<h4>{item.Name}</h4>
				<div className='space-y-1 text-sm'>
					<div className='flex justify-between'>
						<span className='text-white'>Quantity:</span>
						<span className='font-semibold'>{item.quantity}</span>
					</div>
					<div className='flex justify-between'>
						<span className='text-white'>Price:</span>
						<span className='font-semibold'>R{item.Price.toFixed(2)}</span>
					</div>
					{item.quantity > 1 && (
						<div className='flex justify-between font-bold border-t border-white/20 pt-1 mt-1'>
							<span className='text-white'>Total:</span>
							<span>R{(item.Price * item.quantity).toFixed(2)}</span>
						</div>
					)}
				</div>
			</div>
		</div>
	);
}

export default ProductDetails;
</file>

<file path="client/src/app/menu/components/PromotionsBanner.tsx">
'use client';
import React, { useState, useEffect } from 'react';
import { FaGift, FaCar, FaHamburger } from 'react-icons/fa';

const promotions = [
	{
		icon: <FaGift className='text-4xl text-white drop-shadow-lg' />,
		title: 'Weekend Special!',
		message: "Free pork plate with every Photo boot (Sat/Sun). Don't miss out!",
	},
	{
		icon: <FaCar className='text-4xl text-white drop-shadow-lg' />,
		title: 'Taxi Fleet Discount',
		message: 'Bulk taxi washes: Buy 10, get 1 free! Perfect for operators.',
	},
	{
		icon: <FaHamburger className='text-4xl text-white drop-shadow-lg' />,
		title: 'Meal Loyalty',
		message: 'Buy 10 meals, get a free Photo boot. Ask for your digital loyalty card!',
	},
];

const PromotionsBanner: React.FC = () => {
	const [index, setIndex] = useState(0);
	const [fade, setFade] = useState(true);

	useEffect(() => {
		const timer = setTimeout(() => {
			setFade(false);
			setTimeout(() => {
				setIndex((prev) => (prev + 1) % promotions.length);
				setFade(true);
			}, 500); // Corresponds to transition duration
		}, 6000);
		return () => clearTimeout(timer);
	}, [index]);

	const promo = promotions[index];

	const handleNavClick = (i: number) => {
		if (i === index) return;
		setFade(false);
		setTimeout(() => {
			setIndex(i);
			setFade(true);
		}, 500);
	};

	return (
		<div className='bg-black/50 blur-[0.1px] backdrop-blur-md p-4 sticky bottom-0 left-0 w-full z-10 border-t border-white/20'>
			<div className='w-full max-w-3xl mx-auto flex flex-col items-center'>
				<div
					className={`transition-opacity duration-500 ${fade ? 'opacity-100' : 'opacity-0'}`}
					key={index}>
					<div className='flex flex-col sm:flex-row items-center text-center sm:text-left gap-4'>
						<div className='flex-shrink-0'>{promo.icon}</div>
						<div>
							<h3
								className='text-xl font-bold text-white'
								style={{ filter: 'drop-shadow(0 0 3px #f0b100)' }}>
								{promo.title}
							</h3>
							<p className='text-white mt-1 text-sm sm:text-base'>{promo.message}</p>
						</div>
					</div>
				</div>
				<div className='flex justify-center w-full mt-3'>
					<div className='flex gap-2.5'>
						{promotions.map((_, i) => (
							<button
								key={i}
								className={`w-2.5 h-2.5 rounded-full border border-white/50 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black focus:ring-yellow-500 ${
									i === index ? 'bg-white scale-110' : 'bg-transparent hover:bg-white/30'
								}`}
								aria-label={`Show promotion ${i + 1}`}
								onClick={() => handleNavClick(i)}
							/>
						))}
					</div>
				</div>
			</div>
		</div>
	);
};

export default PromotionsBanner;
</file>

<file path="client/src/app/menu/components/SearchBar.tsx">
'use client';
import React, { useState } from 'react';
import { FaSearch } from 'react-icons/fa';
import TextInput from '@/components/ui/TextInput';
import { useRouter, useSearchParams, usePathname } from 'next/navigation';


const SearchBar: React.FC = () => {
	const searchParams = useSearchParams();
	const router = useRouter();
	const pathname = usePathname();
	const [term, setTerm] = useState(searchParams.get('search') || '');

	const handleSearch = (value: string) => {
		setTerm(value);
		const params = new URLSearchParams(searchParams);
		if (value) {
			params.set('search', value);
		} else {
			params.delete('search');
		}
		router.replace(`${pathname}?${params.toString()}`);
	};

	return (
		<article className='sticky bg-black/50 blur-[0.1px] backdrop-blur-md top-9 m-0 shadow-none p-4 rounded-none z-20'>
			<div className='relative w-full'>
				<TextInput
					id='menu-search'
					className='bg-yellow-700/20'
					type='text'
					placeholder='Search for food or categories...'
					value={term}
					onChange={(e) => handleSearch(e.target.value)}
					aria-label='Search for food or categories'
					autoComplete='off'
					icon={
						<FaSearch
							className='text-white/70'
							aria-hidden='true'
						/>
					}
				/>
			</div>
		</article>
	);
};

export default SearchBar;
</file>

<file path="client/src/app/menu/components/SpecialOffers.tsx">
import Section from '@/components/ui/layout/Section';

const SpecialOffers: React.FC = () => {
	return (
		<Section tittle='	Special Offers'>
			<article>
				<div className='grid grid-cols-1 md:grid-cols-2 gap-6'>
					{/* Offer 1 */}
					<div className='bg-black/50 border border-yellow-500 rounded-md p-2 flex flex-col'>
						<div className='bg-yellow-700 rounded-md p-6 flex flex-col h-full'>
							<h3
								className='text-xl font-bold text-white mb-2'
								style={{ filter: 'drop-shadow(0 0 2px #f0b100)' }}>
								Weekend Promotion
							</h3>
							<p className='text-white flex-grow'>
								Get a Free Pork Plate with Every Photo boot on Saturdays and Sundays!
							</p>
						</div>
					</div>
					{/* Offer 2 */}
					<div className='bg-black/50 border border-yellow-500 rounded-md p-2 flex flex-col'>
						<div className='bg-yellow-700 rounded-md p-6 flex flex-col h-full'>
							<h3
								className='text-xl font-bold text-white mb-2'
								style={{ filter: 'drop-shadow(0 0 2px #f0b100)' }}>
								Taxi Partnerships
							</h3>
							<p className='text-white flex-grow'>
								Bulk discounts available for taxi associations. For example, 10 washes = 1 free!
							</p>
						</div>
					</div>
				</div>
			</article>
		</Section>
	);
};

export default SpecialOffers;
</file>

<file path="client/src/app/menu/layout.tsx">
'use client';

import { CartProvider } from '@/lib/context/CartContext';
import { ToastProvider } from '@/lib/context/CartContext';

import React, { ReactNode } from 'react';

interface LayoutProps {
	children: ReactNode;
}

const Layout: React.FC<LayoutProps> = ({ children }) => {
	return (
		<ToastProvider>
			<CartProvider>{children}</CartProvider>
		</ToastProvider>
	);
};

export default Layout;
</file>

<file path="client/src/app/menu/loading.tsx">
import Loading from '@/components/ui/Loading';

export default function LoadingPage() {
	return <Loading message='Loading Menu...' />;
}
</file>

<file path="client/src/app/menu/page.tsx">
import { Suspense } from 'react';
import ImageGallery from '@/app/gallery/components/ImageGallery';
import Loading from '@/components/ui/Loading';
import PromotionsBanner from '@/app/menu/components/PromotionsBanner';
import MenuSections from '@/app/menu/components/MenuSections';
import Main from '@/components/ui/layout/Main';
import { CgMenuCheese } from 'react-icons/cg';
import SearchBar from './components/SearchBar';
import { createClient } from '@/lib/supabase/server';
import { Database } from '@/lib/database.types';

// Category metadata mapping to preserve UI richness
const CATEGORY_METADATA: Record<string, { Image: string; Description: string; id: number }> = {
	'Meals': { id: 1, Image: "/Menus/BurgerMeal.png", Description: "Wholesome combo meals including flavorful mains, crispy sides, and refreshing drinks." },
	'Kota Meals': { id: 2, Image: "/Menus/KotaMeal.png", Description: "Our most loved Kota creations, packed with bold local flavor." },
	'Kota': { id: 3, Image: "/Menus/Kota.png", Description: "Traditional South African bread rolls stuffed with savory toppings." },
	'Chips': { id: 4, Image: "/Menus/Chips.png", Description: "Perfectly fried golden chips, available in three sizes." },
	'Beverages': { id: 5, Image: "/Menus/Drinks.png", Description: "A curated selection of cold beverages to quench your thirst." },
	'Pizza': { id: 6, Image: "/Menus/mexicanChilli.png", Description: "Oven-baked pizzas topped with rich sauces and generous layers of cheese." },
	'Salads': { id: 7, Image: "/Menus/salad1.jpg", Description: "Fresh and healthy salads." },
	'Burgers': { id: 8, Image: "/Menus/burger1.jpg", Description: "Juicy burgers with premium ingredients." },
};

export default async function HomePage({
	searchParams,
}: {
	searchParams: Promise<{ search?: string }>;
}) {
	const params = await searchParams;
	const search = params.search || '';
	const supabase = await createClient();

	const { data: productsData, error } = await supabase
		.from('products')
		.select('*')
		.order('category', { ascending: true });

	if (error) {
		console.error('Error fetching products:', error);
		// Handle error appropriately, maybe show error message
	}

	const allProducts: Database['public']['Tables']['products']['Row'][] = productsData || [];

	// Filter products based on search
	const filteredProducts = search
		? allProducts.filter((p) =>
			p.name.toLowerCase().includes(search.toLowerCase()) ||
			p.category?.toLowerCase().includes(search.toLowerCase())
		)
		: allProducts;

	// Get unique category names from all products (for metadata lookup)
	const allCategories = new Set(allProducts.map(p => p.category || 'Other'));

	// Group products by category
	const groupedProducts: ProductsType = [];
	const categoriesMap = new Map<string, ProductType[]>();

	filteredProducts.forEach((product) => {
		const category = product.category || 'Other';
		if (!categoriesMap.has(category)) {
			categoriesMap.set(category, []);
		}

		// Map Supabase product to UI ProductType
		const uiProduct: ProductType = {
			ProductID: product.id, // Assuming Supabase ID is UUID, but UI uses string
			Name: product.name,
			Description: [product.description || ''], // UI expects array of strings
			Price: product.price || 0,
			Image: product.image_url || '/Menus/placeholder.png', // Fallback image
			badge: product.badge || undefined, // Add badge logic if needed
			rating: product.likes ? 5 : undefined, // Placeholder rating logic
		};

		categoriesMap.get(category)?.push(uiProduct);
	});

	// When searching, only include categories that:
	// 1. Have matching products, OR
	// 2. Have a category name that matches the search term
	const searchLower = search.toLowerCase();
	const matchingCategoryNames = search
		? Array.from(allCategories).filter(catName =>
			catName.toLowerCase().includes(searchLower)
		)
		: [];

	// Construct ProductsType array - only include matching categories when searching
	const categoriesToShow = search
		? new Set([...categoriesMap.keys(), ...matchingCategoryNames])
		: allCategories;

	categoriesToShow.forEach((categoryName) => {
		const products = categoriesMap.get(categoryName) || [];
		
		// When searching, only show categories that have matching products or match by name
		if (search && products.length === 0 && !matchingCategoryNames.includes(categoryName)) {
			return;
		}

		const metadata = CATEGORY_METADATA[categoryName] || {
			id: 99,
			Image: '/Menus/placeholder.png',
			Description: 'Delicious food category',
		};

		groupedProducts.push({
			id: metadata.id,
			Name: categoryName,
			Image: metadata.Image,
			Description: metadata.Description,
			Products: products,
		});
	});

	// Sort categories by ID if available to maintain order
	groupedProducts.sort((a, b) => a.id - b.id);

	// Create a map of product ID to category slug for search results
	const productCategoryMap = new Map<string, string>();
	if (search) {
		filteredProducts.forEach((product) => {
			const category = product.category || 'Other';
			// Convert category name to slug (e.g., "Kota Meals" -> "kota-meals")
			const categorySlug = category.toLowerCase().replace(/\s+/g, '-');
			productCategoryMap.set(product.id, categorySlug);
		});
	}

	return (
		<>
			<Suspense fallback={<div className="h-12" />}>
				<SearchBar />
			</Suspense>
			<Main
				tittle='Menu'
				Icon={CgMenuCheese}
				heading='Every Bite Matters'>
				<Suspense fallback={<Loading message='Loading Menu Sections...' />}>
					<MenuSections
						categories={groupedProducts}
						matchingProducts={search ? filteredProducts.map(p => ({
							ProductID: p.id,
							Name: p.name,
							Description: [p.description || ''],
							Price: p.price || 0,
							Image: p.image_url || '/Menus/placeholder.png',
							badge: p.badge || undefined,
							rating: undefined
						})) : []}
						productCategoryMap={search ? productCategoryMap : undefined}
						isSearching={!!search}
					/>
				</Suspense>
				<Suspense fallback={<Loading message='Loading Image Gallery Sections...' />}>
					<ImageGallery />
				</Suspense>
			</Main>
			<PromotionsBanner />
		</>
	);
}
</file>

<file path="client/src/app/orders/[State]/page.tsx">
import React from 'react';
import { createClient } from '@/lib/supabase/server';
import Image from 'next/image';
import { redirect } from 'next/navigation';

import Main from '@/components/ui/layout/Main';
import Section from '@/components/ui/layout/Section';
import { getOrdersByUser } from '@/lib/supabase/orders/orders';


const StateOrderPage = async () => {
	const supabase = await createClient();
	const { data: { user }, error } = await supabase.auth.getUser();

	if (error || !user?.id) {
		return redirect('/login');
	}

	const orders = await getOrdersByUser(user.id);

	if (orders.length === 0) {
		return (
			<main className='p-4'>
				<p className='text-white text-center'>You have no orders yet.</p>
			</main>
		);
	}

	return (
		<Main>
			{orders.map((order: any) => (
				<Section
					tittle={`Order on ${new Date(order.created_at).toLocaleDateString()}`}
					key={order.id}>
					<ul className='text-white'>
						<li>
							<p>
								<b>Order Number:</b> {order.id}
							</p>
							<p>
								<b>Date:</b> {new Date(order.created_at).toLocaleDateString()}
							</p>
							<p className='mt-2'>
								<b>Total Price:</b> R{order.total_price?.toFixed(2) || '0.00'}
							</p>
							<p>
								<b>Total Quantity:</b> {order.total_quantity || 0}
							</p>
							<p>
								<b>Status:</b> {order.status || 'pending'}
							</p>
						</li>
					</ul>
				</Section>
			))}
		</Main>
	);
};

export default StateOrderPage;
</file>

<file path="client/src/app/orders/components/OrderItem.tsx">
import React from 'react';

import ProductDetails from '@/app/menu/components/ProductDetails';
import Section from '@/components/ui/layout/Section';

const OrderItem: React.FC<{ order: any }> = ({ order }) => {
	return (
		<Section key={order.id}>
			<h2>{new Date(order.created_at).toLocaleDateString()}</h2>
			<ul>
				<li>
					<p className='border border-white/50 bg-yellow-700 text-center py-2 rounded-md'>
						<b>Order ID:</b> {order.id}
					</p>
					<p className='mt-2'>
						<b>Total Price:</b> R{order.total_price?.toFixed(2) || '0.00'}
					</p>
					<p>
						<b>Total Quantity:</b> {order.total_quantity || 0}
					</p>
				<p>
					<b>Status:</b> {order.status || 'pending'}
				</p>
			</li>
		</ul>
	</Section>
	);
};

export default OrderItem;
</file>

<file path="client/src/app/orders/layout.tsx">
'use client';

import { CartProvider } from '@/lib/context/CartContext';
import React, { ReactNode } from 'react';
import Link from 'next/link';
import { GiMeal } from 'react-icons/gi';

interface LayoutProps {
	children: ReactNode;
}

const Layout: React.FC<LayoutProps> = ({ children }) => {
	return (
		<CartProvider>
			<nav className='sticky bg-black/75 z-10 p-2 grid grid-cols-3 gap-2 top-9 '>
				<Link href='/menu'>Main menu</Link>

				<Link
					className=' text-sm flex items-center justify-center gap-1 truncate text-center bg-[yellow] py-0.5 px-5 rounded-md border-none cursor-pointer text-white font-bold'
					href={'orders/pending'}>
					<GiMeal />
					pending
				</Link>
				<Link
					className=' text-sm flex items-center justify-center gap-1 truncate text-center bg-[yellow] py-0.5 px-5 rounded-md border-none cursor-pointer text-white font-bold'
					href={'orders/processing'}>
					<GiMeal />
					processing
				</Link>
				<Link
					className=' text-sm flex items-center justify-center gap-1 truncate text-center bg-[yellow] py-0.5 px-5 rounded-md border-none cursor-pointer text-white font-bold'
					href={'orders/completed'}>
					<GiMeal />
					completed
				</Link>
			</nav>
			{children}
		</CartProvider>
	);
};

export default Layout;
</file>

<file path="client/src/app/orders/page.tsx">
export const dynamic = 'force-dynamic';
import { createClient } from '@/lib/supabase/server';
import { getOrdersByUser } from '@/lib/supabase/orders/orders';
import OrderItem from '@/app/orders/components/OrderItem';
import Main from '@/components/ui/layout/Main';
import { FaHistory } from 'react-icons/fa';
import { redirect } from 'next/navigation';

const OrderHistory: React.FC = async () => {
	const supabase = await createClient();
	const { data: { user }, error } = await supabase.auth.getUser();

	if (error || !user?.id) {
		return redirect('/login');
	}

	const orders = await getOrdersByUser(user.id);

	if (orders.length === 0) {
		return (
			<Main
				tittle='Order History'
				Icon={FaHistory}
				className='p-4'>
				<p className='text-white text-center'>You have no orders yet.</p>
			</Main>
		);
	}

	return (
		<Main
			tittle='Order History'
			Icon={FaHistory}
			className='p-4 space-y-4'>
			{orders.map((order) => (
				<OrderItem
					key={order.id}
					order={order}
				/>
			))}
		</Main>
	);
};

export default OrderHistory;
</file>

<file path="client/src/app/photo/page.tsx">
import Image from 'next/image';
import Link from '@/components/ui/Link';
import Section from '@/components/ui/layout/Section';
import Main from '@/components/ui/layout/Main';
import Button from '@/components/ui/Button';
import { BiCamera, BiCheckCircle } from 'react-icons/bi';
import { FiFilm } from 'react-icons/fi';
import { PlaceHolderImages } from './placeholderImages';

const getImage = (id: string) => PlaceHolderImages.find(img => img.id === id);

interface PricingPackage {
	hours: number | string;
	price: number | string;
	features: string[];
}

interface EventType {
	name: string;
	imageId: string;
	description: string;
}

const PhotoBoothPage = () => {
	const heroImage = getImage('hero');
	const service360Image = getImage('service-360-booth');
	const serviceRedCarpetImage = getImage('service-red-carpet');

	const eventTypes: EventType[] = [
		{
			name: 'Graduations',
			imageId: 'event-graduations',
			description: 'Graduates celebrating at a party.',
		},
		{
			name: 'Weddings',
			imageId: 'event-weddings',
			description: 'A wedding reception with guests dancing.',
		},
		{
			name: 'Baby Showers',
			imageId: 'event-baby-showers',
			description: 'Decorations at a baby shower.',
		},
		{
			name: 'School Events',
			imageId: 'event-school-events',
			description: 'Students at a school dance.',
		},
		{
			name: 'Birthdays',
			imageId: 'event-birthdays',
			description: 'A lively birthday party.',
		},
	];

	const pricingPackages: PricingPackage[] = [
		{
			hours: 2,
			price: 2500,
			features: [
				'2 Hours rental',
				'Unlimited videos',
				'Online gallery',
				'On-site attendant',
			],
		},
		{
			hours: 3,
			price: 3500,
			features: ['3 Hours rental', 'Everything in 2hr', 'Custom overlay', 'Fun props'],
		},
		{
			hours: 4,
			price: 4500,
			features: [
				'4 Hours rental',
				'Everything in 3hr',
				'VIP red carpet',
				'Stanchions',
			],
		},
		{
			hours: '8+',
			price: 'Custom',
			features: ['Full day coverage', 'All features included', 'Custom branding', 'Priority support'],
		},
	];

	return (
		<Main>
			{/* Hero Section */}
			<Section tittle='Capture Every Angle in Style' className='flex flex-col items-center text-center'>
				{heroImage && (
					<div className='relative w-full h-64 md:h-80 mb-6 rounded-lg overflow-hidden'>
						<Image
							src={heroImage.imageUrl}
							alt={heroImage.description}
							fill
							className='object-cover'
							priority
							data-ai-hint={heroImage.imageHint}
						/>
					</div>
				)}
				<p className='mt-4 text-lg max-w-2xl text-white/80'>
					The ultimate 360° photo booth and red carpet experience for unforgettable events.
				</p>
				<Link variant='button' href='#services' className='mt-6 flex items-center gap-2'>
					<BiCamera />
					<span>Explore Our Services</span>
				</Link>
			</Section>

			{/* Services Section */}
			<Section tittle='Our Premium Services' heading='Professional rental services to make your event unforgettable'>
				<div className='grid gap-6 md:grid-cols-2 mt-8'>
					<div className='bg-black/30 border border-yellow-500/20 rounded-md overflow-hidden hover:shadow-lg hover:shadow-yellow-500/10 transition-all duration-300'>
						{service360Image && (
							<div className='relative w-full h-48 md:h-64'>
								<Image
									src={service360Image.imageUrl}
									alt={service360Image.description}
									fill
									className='object-cover'
									data-ai-hint={service360Image.imageHint}
								/>
							</div>
						)}
						<div className='p-6'>
							<h3 className='flex items-center gap-3 text-2xl font-semibold text-yellow-500'>
								<BiCamera className='text-white' /> 360 Photo Booth
							</h3>
							<p className='mt-3 text-white/80'>
								Our state-of-the-art 360 photo booth captures slow-motion videos from every angle. Guests
								stand on a platform while a revolving camera spins around them, creating stunning, shareable
								content.
							</p>
						</div>
					</div>

					<div className='bg-black/30 border border-yellow-500/20 rounded-md overflow-hidden hover:shadow-lg hover:shadow-yellow-500/10 transition-all duration-300'>
						{serviceRedCarpetImage && (
							<div className='relative w-full h-48 md:h-64'>
								<Image
									src={serviceRedCarpetImage.imageUrl}
									alt={serviceRedCarpetImage.description}
									fill
									className='object-cover'
									data-ai-hint={serviceRedCarpetImage.imageHint}
								/>
							</div>
						)}
						<div className='p-6'>
							<h3 className='flex items-center gap-3 text-2xl font-semibold text-yellow-500'>
								<FiFilm className='text-white' /> Red Carpet & Stanchions
							</h3>
							<p className='mt-3 text-white/80'>
								Give your guests the full VIP treatment. Our red carpet and stanchion rentals create a
								glamorous entrance for any event, making everyone feel like a star.
							</p>
						</div>
					</div>
				</div>
			</Section>

			{/* Event Types Section */}
			<Section tittle='Perfect for Any Occasion' heading='From elegant weddings to hype birthday bashes, we bring the fun'>
				<div className='grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 md:gap-4 mt-8'>
					{eventTypes.map(event => {
						const image = getImage(event.imageId);
						return (
							<div
								key={event.name}
								className='relative group overflow-hidden rounded-lg shadow-md h-32 md:h-40'>
								{image && (
									<Image
										src={image.imageUrl}
										alt={event.description}
										fill
										className='object-cover w-full h-full transform transition-transform duration-300 group-hover:scale-110'
										data-ai-hint={image.imageHint}
									/>
								)}
								<div className='absolute inset-0 bg-black/50 group-hover:bg-black/70 transition-colors duration-300 flex items-center justify-center p-2'>
									<h3 className='text-white text-sm md:text-base font-bold text-center'>{event.name}</h3>
								</div>
							</div>
						);
					})}
				</div>
			</Section>

			{/* Pricing Section */}
			<Section tittle='Packages & Pricing' heading='Choose the perfect package for your event. All prices in South African Rand (R)'>
				<div className='grid gap-4 sm:grid-cols-2 lg:grid-cols-4 mt-8'>
					{pricingPackages.map((pkg, index) => (
						<div
							key={index}
							className={`flex flex-col bg-black/30 border rounded-md p-6 transform transition-transform hover:-translate-y-2 ${
								index === 2
									? 'border-yellow-500 shadow-lg shadow-yellow-500/20'
									: 'border-yellow-500/20'
							}`}>
							<div className='text-center mb-6'>
								<h3 className='text-xl font-semibold text-white'>{pkg.hours} Hours</h3>
								<p className='text-3xl font-bold text-yellow-500 pt-2'>
									{typeof pkg.price === 'number' ? `R${pkg.price.toLocaleString()}` : pkg.price}
								</p>
							</div>
							<ul className='space-y-3 text-white/80 flex-grow mb-6'>
								{pkg.features.map(feature => (
									<li key={feature} className='flex items-start gap-3'>
										<BiCheckCircle className='h-5 w-5 text-yellow-500 mt-0.5 shrink-0' />
										<span className='text-sm'>{feature}</span>
									</li>
								))}
							</ul>
							<Button
								className='w-full'
								variant={index === 2 ? 'primary' : 'secondary'}>
								<a href='#contact'>Book Now</a>
							</Button>
						</div>
					))}
				</div>
			</Section>
		</Main>
	);
};

export default PhotoBoothPage;
</file>

<file path="client/src/app/photo/placeholder-images.json">
{
  "placeholderImages": [
    {
      "id": "hero",
      "description": "A glamorous party scene with people celebrating.",
      "imageUrl": "https://images.unsplash.com/photo-1425421598808-4a22ce59cc97?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw2fHxwYXJ0eSUyMGV2ZW50fGVufDB8fHx8MTc2MTE0Mjk4MHww&ixlib=rb-4.1.0&q=80&w=1080",
      "imageHint": "party event"
    },
    {
      "id": "service-360-booth",
      "description": "A 360 photo booth in action at an event.",
      "imageUrl": "https://images.unsplash.com/photo-1727892349109-54d06e3478ee?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw3fHxwaG90byUyMGJvb3RofGVufDB8fHx8MTc2MTEzOTcxOHww&ixlib=rb-4.1.0&q=80&w=1080",
      "imageHint": "photo booth"
    },
    {
      "id": "service-red-carpet",
      "description": "A red carpet entrance with stanchions.",
      "imageUrl": "https://images.unsplash.com/photo-1614115866447-c9a299154650?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwzfHxyZWQlMjBjYXJwZXR8ZW58MHx8fHwxNzYxMTQyOTgwfDA&ixlib=rb-4.1.0&q=80&w=1080",
      "imageHint": "red carpet"
    },
    {
      "id": "event-graduations",
      "description": "Graduates celebrating at a party.",
      "imageUrl": "https://images.unsplash.com/photo-1533120921505-7f40f5237ee1?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw3fHxncmFkdWF0aW9uJTIwcGFydHl8ZW58MHx8fHwxNzYxMTQyOTgwfDA&ixlib=rb-4.1.0&q=80&w=1080",
      "imageHint": "graduation party"
    },
    {
      "id": "event-weddings",
      "description": "A wedding reception with guests dancing.",
      "imageUrl": "https://images.unsplash.com/photo-1723832348105-2e69f948135a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw1fHx3ZWRkaW5nJTIwcmVjZXB0aW9ufGVufDB8fHx8MTc2MTEyMTEyOXww&ixlib=rb-4.1.0&q=80&w=1080",
      "imageHint": "wedding reception"
    },
    {
      "id": "event-baby-showers",
      "description": "Decorations at a baby shower.",
      "imageUrl": "https://images.unsplash.com/photo-1594150878496-a921e5af8907?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw2fHxiYWJ5JTIwc2hvd2VyfGVufDB8fHx8MTc2MTA1NjI3OHww&ixlib=rb-4.1.0&q=80&w=1080",
      "imageHint": "baby shower"
    },
    {
      "id": "event-school-events",
      "description": "Students at a school dance.",
      "imageUrl": "https://images.unsplash.com/photo-1504609813442-a8924e83f76e?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHwyfHxzY2hvb2wlMjBkYW5jZXxlbnwwfHx8fDE3NjExNDI5ODN8MA&ixlib=rb-4.1.0&q=80&w=1080",
      "imageHint": "school dance"
    },
    {
      "id": "event-birthdays",
      "description": "A lively birthday party.",
      "imageUrl": "https://images.unsplash.com/photo-1556125574-d7f27ec36a06?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3NDE5ODJ8MHwxfHNlYXJjaHw5fHxiaXJ0aGRheSUyMHBhcnR5fGVufDB8fHx8MTc2MTA0MTM0N3ww&ixlib=rb-4.1.0&q=80&w=1080",
      "imageHint": "birthday party"
    }
  ]
}
</file>

<file path="client/src/app/photo/placeholderImages.ts">
import data from './placeholder-images.json';

export type ImagePlaceholder = {
  id: string;
  description: string;
  imageUrl: string;
  imageHint: string;
};

export const PlaceHolderImages: ImagePlaceholder[] = data.placeholderImages;
</file>

<file path="client/src/app/privacy/components/PrivacyContent.tsx">
import Section from '@/components/ui/layout/Section';

const PrivacyContent: React.FC = () => {
	return (
		<Section tittle='Privacy policy '>
			<article>
				<div className='space-y-4'>
					<p>Privacy policy details will be listed here.</p>
				</div>
			</article>
		</Section>
	);
};

export default PrivacyContent;
</file>

<file path="client/src/app/privacy/loading.tsx">
const Loading: React.FC = () => {
  return (
    <main>
      Loading Privacy Policy...
    </main>
  );
};

export default Loading;
</file>

<file path="client/src/app/privacy/page.tsx">
import Main from '@/components/ui/layout/Main';
import Section from '@/components/ui/layout/Section';

const PrivacyPolicyPage: React.FC = () => {
	return (
		<Main tittle='Privacy Policy'>
			<Section>
				<div className='space-y-6'>
					<p>Effective Date: 26 July 2024</p>

					<article>
						<h2 className='text-2xl font-semibold mb-2'>1. Introduction</h2>
						<p>
							Welcome to PA Luxe Creation PTY Ltd. We are committed to protecting your privacy and
							ensuring that your personal information is handled in a safe and responsible manner.
							This Privacy Policy outlines how we collect, use, disclose, and safeguard your
							information when you use our services, including our website and digital booking
							system.
						</p>
					</article>

					<article>
						<h2 className='text-2xl font-semibold mb-2'>2. Information We Collect</h2>
						<p>
							We may collect information about you in a variety of ways. The information we may
							collect includes:
						</p>
						<h3 className='text-xl font-semibold mt-4 mb-2'>Personal Data</h3>
						<p>
							Personally identifiable information, such as your name, email address, and telephone
							number, that you voluntarily give to us when you use our digital booking system or
							contact us.
						</p>
						<h3 className='text-xl font-semibold mt-4 mb-2'>Usage Data</h3>
						<p>
							Information that our servers automatically collect when you access our website, such
							as your IP address, browser type, operating system, access times, and the pages you
							have viewed directly before and after accessing the site.
						</p>
					</article>

					<article>
						<h2 className='text-2xl font-semibold mb-2'>3. How We Use Your Information</h2>
						<p>
							Having accurate information about you permits us to provide you with a smooth,
							efficient, and customized experience. Specifically, we may use information collected
							about you to:
						</p>
						<ul className='list-disc list-inside ml-4 mt-2'>
							<li>Manage your bookings and appointments for our Photo boot services.</li>
							<li>Send you confirmations, reminders, and updates regarding your bookings.</li>
							<li>Respond to your comments and questions and provide customer service.</li>
							<li>
								Monitor and analyze usage and trends to improve your experience with our services.
							</li>
							<li>Notify you of updates to our services.</li>
						</ul>
					</article>

					<article>
						<h2 className='text-2xl font-semibold mb-2'>4. Data Sharing and Disclosure</h2>
						<p>
							We do not share, sell, rent, or trade your personal information with third parties for
							their commercial purposes. We may share information we have collected about you in
							certain situations, such as:
						</p>
						<ul className='list-disc list-inside ml-4 mt-2'>
							<li>
								<strong>By Law or to Protect Rights:</strong> If we believe the release of
								information about you is necessary to respond to legal process, to investigate or
								remedy potential violations of our policies, or to protect the rights, property, and
								safety of others, we may share your information as permitted or required by any
								applicable law, rule, or regulation.
							</li>
							<li>
								<strong>Service Providers:</strong> We may share your information with third parties
								that perform services for us or on our behalf, including payment processing, data
								analysis, email delivery, hosting services, and customer service.
							</li>
						</ul>
					</article>

					<article>
						<h2 className='text-2xl font-semibold mb-2'>5. Data Security</h2>
						<p>
							We use administrative, technical, and physical security measures to help protect your
							personal information. While we have taken reasonable steps to secure the personal
							information you provide to us, please be aware that despite our efforts, no security
							measures are perfect or impenetrable, and no method of data transmission can be
							guaranteed against any interception or other type of misuse.
						</p>
					</article>

					<article>
						<h2 className='text-2xl font-semibold mb-2'>6. Your Rights</h2>
						<p>
							You have the right to access, correct, or delete your personal information. You may
							also have the right to object to or restrict certain processing of your data. To
							exercise these rights, please contact us using the contact information provided below.
						</p>
					</article>

					<article>
						<h2 className='text-2xl font-semibold mb-2'>7. Changes to This Privacy Policy</h2>
						<p>
							We may update this Privacy Policy from time to time in order to reflect, for example,
							changes to our practices or for other operational, legal, or regulatory reasons. We
							will notify you of any changes by posting the new Privacy Policy on this page.
						</p>
					</article>

					<article>
						<h2 className='text-2xl font-semibold mb-2'>8. Contact Us</h2>
						<p>
							If you have questions or comments about this Privacy Policy, please contact us at:
							<br />
							PA Luxe Creation PTY Ltd
							<br />
							[Your Address Here]
							<br />
							Email: [Your Email Here]
							<br />
							Phone: [Your Phone Number Here]
						</p>
					</article>
				</div>
			</Section>
		</Main>
	);
};
export default PrivacyPolicyPage;
</file>

<file path="client/src/app/profile/components/AccountManagement.delete.client.tsx">
'use client';
import Button from '@/components/ui/Button';
import { FaTrash } from 'react-icons/fa';

const AccountManagementDeleteButton: React.FC = () => {
	const handleDeleteAccount = (e: React.MouseEvent<HTMLButtonElement>) => {
		e.preventDefault();
		if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
			console.log('Account deletion initiated...');
			   // TODO: Implement Supabase function to delete user account.
		}
	};

	return (
		<Button
			onClick={handleDeleteAccount}
			variant='danger'
			className='w-full flex items-center justify-center gap-2'>
			<FaTrash /> Delete Account
		</Button>
	);
};

export default AccountManagementDeleteButton;
</file>

<file path="client/src/app/profile/components/AccountManagement.server.tsx">
import AppLink from '@/components/ui/Link';
import Button from '@/components/ui/Button';
import Icon from '@/components/ui/Icon';
import { FaShieldAlt, FaFileContract, FaUserSecret, FaKey, FaTrash } from 'react-icons/fa';
import Section from '@/components/ui/layout/Section';

const AccountManagementServer: React.FC = () => {
	return (
		<Section
			Icon={FaShieldAlt}
			tittle='Account & Security'>
			<div className='mt-6 space-y-4'>
				{/* Legal Links */}
				<article className='bg-black/20 p-4 rounded-md border border-white/10 space-y-3'>
					<Icon
						icon={FaFileContract}
						heading='Legal'
						variant='inlineCircular'
					/>
					<AppLink
						href='/terms'
						variant='secondary'>
						<FaFileContract className='mr-2' /> View Terms and Conditions
					</AppLink>
					<AppLink
						href='/privacy'
						variant='secondary'>
						<FaUserSecret className='mr-2' /> View Privacy Policy
					</AppLink>
				</article>

				{/* Security Actions */}
				<article className='bg-black/20 p-4 rounded-md border border-white/10 space-y-3'>
					<Icon
						icon={FaKey}
						heading='Security'
						variant='inlineCircular'
					/>
					<AppLink
						href='/Authentication/change-password'
						variant='secondary'>
						<FaKey className='mr-2' /> Change Password
					</AppLink>
					<AccountManagementDeleteButton />
				</article>
			</div>
		</Section>
	);
};

// Import the client-side delete button separately
import AccountManagementDeleteButton from './AccountManagement.delete.client';

export default AccountManagementServer;
</file>

<file path="client/src/app/profile/components/AccountManagement.tsx">
// Re-export the server component (now server-rendered with thin client delete button)
export { default } from './AccountManagement.server';
</file>

<file path="client/src/app/profile/components/LoyaltyProgramInfo.client.tsx">
'use client';
import LoyaltyProgramInfoServer from './LoyaltyProgramInfo.server';
import { useAuth } from '@/lib/supabase/auth/useAuth';

const LoyaltyProgramInfo: React.FC = () => {
	const { user } = useAuth();

	return <LoyaltyProgramInfoServer userUid={user?.id} />;
};

export default LoyaltyProgramInfo;
</file>

<file path="client/src/app/profile/components/LoyaltyProgramInfo.server.tsx">
import Icon from '@/components/ui/Icon';
import { FaGift } from 'react-icons/fa';
import ReferralCodeCopier from './ReferralCodeCopier';
import Section from '@/components/ui/layout/Section';

// Server component that will receive user data from client wrapper
interface LoyaltyProgramInfoServerProps {
	userUid?: string;
}

const LoyaltyProgramInfoServer: React.FC<LoyaltyProgramInfoServerProps> = ({ userUid }) => {
	if (!userUid) {
		return null;
	}

	return (
		<Section
			Icon={FaGift}
			heading='Loyalty Program'>
			<article className='mt-8'>
				<h3 className='text-lg font-semibold text-white mb-4'>Refer a Friend & Earn More!</h3>
				<p className='text-white mb-4'>
					Share your referral code with friends. When they sign up, you both get bonus points!
				</p>
				<ReferralCodeCopier code={userUid.slice(0, 8)} />
			</article>
		</Section>
	);
};

export default LoyaltyProgramInfoServer;
</file>

<file path="client/src/app/profile/components/LoyaltyProgramInfo.tsx">
// Re-export the client wrapper to maintain the same import path
export { default } from './LoyaltyProgramInfo.client';
</file>

<file path="client/src/app/profile/components/PaymentInformation.tsx">
'use client';
import React from 'react';
import Icon from '@/components/ui/Icon';
import Button from '@/components/ui/Button';
import { FaCreditCard, FaPlus } from 'react-icons/fa';

import { useAuth } from '@/lib/supabase/auth/useAuth';
import { useRouter } from 'next/navigation';
import Section from '@/components/ui/layout/Section';

const PaymentInformation: React.FC = () => {
	const { user } = useAuth();
	if (!user) {
		return null;
	}
	return (
		<Section
			Icon={FaCreditCard}
			tittle='Payment Information'>
			<article className='mt-6 space-y-4'>
				<p className='text-white/60 italic'>Payment method management coming soon.</p>
				<Button
					variant='primary'
					className='w-full flex items-center justify-center'>
					<FaPlus className='mr-2' />
					Add New Card
				</Button>
			</article>
		</Section>
	);
};

export default PaymentInformation;
</file>

<file path="client/src/app/profile/components/PersonalInformation.tsx">
'use client';

import Icon from '@/components/ui/Icon';
import { FaUserCircle } from 'react-icons/fa';
import UserAddress from '../../../lib/forms/UserAddressForm';
import AppLink from '@/components/ui/Link';
import Section from '@/components/ui/layout/Section';

interface PersonalInformationProps {
	user: UserProfile;
}

const InfoRow: React.FC<{ label: string; value: string | null | undefined }> = ({
	label,
	value,
}) => (
	<div className='py-3 sm:grid sm:grid-cols-3 sm:gap-4'>
		<dt className='text-sm font-medium text-white/70'>{label}</dt>
		<dd className='mt-1 text-sm text-white sm:mt-0 sm:col-span-2'>{value || 'Not set'}</dd>
	</div>
);

const PersonalInformation: React.FC<PersonalInformationProps> = ({ user }) => {
	return (
		<Section
			Icon={FaUserCircle}
			tittle='Personal Information'>
			<article className='mt-6 border-t border-white/20'>
				<dl className='divide-y divide-white/20'>
					<InfoRow
						label='Full Name'
						value={user.displayName || user.email || 'Not set'}
					/>
					<InfoRow
						label='Email address'
						value={user.email}
					/>
					<InfoRow
						label='Phone number'
						value={user.phoneNumber || 'Not set'}
					/>
					<InfoRow
						label='Role'
						value={user.role || 'User'}
					/>
				</dl>
			</article>
			<UserAddress />
			<AppLink
				href='/profile/edit'
				className='underline'>
				Edit Profile
			</AppLink>
		</Section>
	);
};

export default PersonalInformation;
</file>

<file path="client/src/app/profile/components/Preferences.client.tsx">
'use client';
import PreferencesServer from './Preferences.server';
import { useAuth } from '@/lib/supabase/auth/useAuth';

const Preferences: React.FC = () => {
	const { user } = useAuth();
	return <PreferencesServer preferences={user?.user_metadata?.preferences} />;
};

export default Preferences;
</file>

<file path="client/src/app/profile/components/Preferences.server.tsx">
import Icon from '@/components/ui/Icon';
import Button from '@/components/ui/Button';
import { FaCog, FaLeaf, FaHeart, FaCar, FaEnvelope } from 'react-icons/fa';
import Section from '@/components/ui/layout/Section';

// User preferences type
interface UserPreferences {
	dietaryRestrictions?: string[];
	favoriteItems?: string[];
	preferyellowCarWashServices?: string[];
}

interface PreferencesServerProps {
	preferences?: UserPreferences;
}

const PreferenceItem: React.FC<{
	icon: React.ElementType;
	title: string;
	children: React.ReactNode;
}> = ({ icon, title, children }) => (
	<article>
		<Icon
			icon={icon}
			heading={title}
			variant='inlineCircular'
		/>
		<div className='mt-4'>{children}</div>
	</article>
);

const ListRenderer: React.FC<{ items: string[] | undefined; emptyText: string }> = ({
	items,
	emptyText,
}) => {
	if (!items || items.length === 0) {
		return <p className='text-white/60 italic'>{emptyText}</p>;
	}
	return (
		<ul className='space-y-2'>
			{items.map((item, index) => (
				<li
					key={index}
					className='text-sm text-white'>
					- {item}
				</li>
			))}
		</ul>
	);
};

const PreferencesServer: React.FC<PreferencesServerProps> = ({ preferences }) => {
	if (!preferences) {
		return null;
	}

	return (
		<Section
			Icon={FaCog}
			tittle='User Preferences'>
			<div className='mt-6 grid gap-6 md:grid-cols-2'>
				<PreferenceItem
					icon={FaLeaf}
					title='Dietary Needs'>
					<ListRenderer
						items={preferences?.dietaryRestrictions}
						emptyText='No dietary restrictions specified.'
					/>
				</PreferenceItem>

				<PreferenceItem
					icon={FaHeart}
					title='Favorite Items'>
					<ListRenderer
						items={preferences?.favoriteItems}
						emptyText='No favorite items added yet.'
					/>
				</PreferenceItem>

				<PreferenceItem
					icon={FaCar}
					title='Preferyellow Photo boot'>
					<ListRenderer
						items={preferences?.preferyellowCarWashServices}
						emptyText='No preferyellow services selected.'
					/>
				</PreferenceItem>

				<PreferenceItem
					icon={FaEnvelope}
					title='Communication'>
					<p className='text-white/60 italic'>Communication settings coming soon.</p>
				</PreferenceItem>
			</div>
			<div className='mt-8 text-right'>
				<Button variant='primary'>Update Preferences</Button>
			</div>
		</Section>
	);
};

export default PreferencesServer;
</file>

<file path="client/src/app/profile/components/Preferences.tsx">
// Re-export the client wrapper to maintain the same import path
export { default } from './Preferences.client';
</file>

<file path="client/src/app/profile/components/ReferralCodeCopier.tsx">
'use client';

import { useState } from 'react';
import { FaCopy, FaCheck } from 'react-icons/fa';
import Button from '@/components/ui/Button';

interface ReferralCodeCopierProps {
  code: string;
}

const ReferralCodeCopier: React.FC<ReferralCodeCopierProps> = ({ code }) => {
  const [isCopied, setIsCopied] = useState(false);

  const handleCopy = () => {
    navigator.clipboard.writeText(code).then(() => {
      setIsCopied(true);
      setTimeout(() => {
        setIsCopied(false);
      }, 2000); // Reset after 2 seconds
    });
  };

  return (
    <div className='flex items-center gap-4'>
      <p className='font-semibold text-white text-lg bg-black/30 p-2 rounded-md'>{code}</p>
      <Button onClick={handleCopy} variant='secondary' size='sm' className='w-32'>
        {isCopied ? (
          <>
            <FaCheck />
            Copied!
          </>
        ) : (
          <>
            <FaCopy />
            Copy Code
          </>
        )}
      </Button>
    </div>
  );
};

export default ReferralCodeCopier;
</file>

<file path="client/src/app/profile/edit/page.tsx">
import Main from "@/components/ui/layout/Main";
import EditProfileForm from "@/lib/forms/EditProfileForm";


const EditProfilePage: React.FC = () => {

	return (
		<Main tittle="Edit Profile">
			<EditProfileForm />
		</Main>
	);
};

export default EditProfilePage;
</file>

<file path="client/src/app/profile/loading.tsx">
import Loading from '@/components/ui/Loading';

export default function LoadingPage() {
	return <Loading message='Loading Profile...' />;
}
</file>

<file path="client/src/app/profile/page.tsx">
import PersonalInformation from './components/PersonalInformation';
import LoyaltyProgramInfo from './components/LoyaltyProgramInfo';
import Preferences from './components/Preferences';
import PaymentInformation from './components/PaymentInformation';
import AccountManagement from './components/AccountManagement';
import { FaUserCircle } from 'react-icons/fa';
import Main from '@/components/ui/layout/Main';

import { createClient } from "@/lib/supabase/server";
import { redirect } from "next/navigation";

const CustomerProfilePage: React.FC = async () => {
	const supabase = await createClient();
	const { data: { user } } = await supabase.auth.getUser();

	if (!user) {
		redirect("/login");
	}

	const { data: profileData } = await supabase
		.from("profiles")
		.select("*")
		.eq("id", user.id)
		.single();

	if (!profileData) {
		// Handle case where profile doesn't exist (shouldn't happen if auth works)
		return <div>Profile not found</div>;
	}

	const profile = profileData as any;

	// Map DB profile (snake_case) to UserProfile (camelCase)
	const userProfile: UserProfile = {
		uid: profile.uid || profile.id,
		displayName: profile.display_name,
		email: profile.email,
		emailVerified: profile.email_verified || false,
		photoURL: profile.photo_url,
		phoneNumber: profile.phone,
		role: (profile.role as UserRole) || 'Customer',
		address: profile.address || '',
		city: profile.city || '',
		state: profile.state || '',
		zipCode: profile.zip_code || '',
		country: profile.country || '',
		theme: (profile.theme as 'system' | 'light' | 'dark') || 'system',
		orderHistory: (profile.order_history as any) || [],
		loyaltyPointsBalance: profile.loyalty_points_balance || 0,
		tierStatus: profile.tier_status || 'Bronze',
		rewardsAvailable: (profile.rewards_available as any) || [],
		yellowemptionHistory: (profile.redemption_history as any) || [],
		personalizedPromotions: (profile.personalized_promotions as any) || [],
		referralCode: profile.referral_code || '',
		carWashCount: profile.car_wash_count || 0,
		preferences: (profile.preferences as any) || {
			dietaryRestrictions: [],
			favoriteItems: [],
			preferyellowCarWashServices: [],
			preferyellowPaymentMethod: 'credit_card',
			communicationPreferences: { email: true, sms: false, promotions: true }
		},
		savedPaymentMethods: (profile.saved_payment_methods as any) || [],
		createdAt: new Date(profile.created_at),
		updatedAt: profile.updated_at ? new Date(profile.updated_at) : new Date(),
		lastLogin: profile.last_login ? new Date(profile.last_login) : undefined,
	};

	return (
		<Main
			tittle='Profile'
			Icon={FaUserCircle}
			heading='Manage your personal information, preferences, and account security.'>
			<div className='grid grid-cols-1  gap-8'>
				<div className='lg:col-span-2 space-y-8'>
					<PersonalInformation user={userProfile} />
					<PaymentInformation />
				</div>

				<div className='space-y-8'>
					<LoyaltyProgramInfo />
					<Preferences />
					<AccountManagement />
				</div>
			</div>
		</Main>
	);
};

export default CustomerProfilePage;
</file>

<file path="client/src/app/terms/components/TermsContent.tsx">
import Section from '@/components/ui/layout/Section';

const TermsContent: React.FC = () => {
	return (
		<Section>
			<div className='bg-yellow-700 p-6 sm:p-8 rounded-md text-white'>
				<header className='text-center mb-8'>
					<h1
						className='text-3xl sm:text-4xl font-bold'
						style={{ filter: 'drop-shadow(0 0 4px #f0b100)' }}>
						Terms and Conditions
					</h1>
					<p className='text-white mt-2'>Last updated: July 24, 2024</p>
				</header>

				<div className='space-y-6'>
					<div className='bg-black/20 p-4 rounded-md'>
						<h2 className='text-xl font-semibold mb-3'>1. Introduction</h2>
						<p className='text-white'>
							Welcome to PA Luxe Creation. These terms and conditions outline the rules and
							regulations for the use of our services. By accessing this website and using our
							services, you accept these terms and conditions in full.
						</p>
					</div>

					<div className='bg-black/20 p-4 rounded-md'>
						<h2 className='text-xl font-semibold mb-3'>2. User Responsibilities</h2>
						<p className='text-white mb-2'>
							You are responsible for ensuring that your account information is accurate and for
							maintaining the confidentiality of your password. You agree to accept responsibility
							for all activities that occur under your account.
						</p>
						<ul className='list-disc list-inside space-y-1 text-white pl-2'>
							<li>You must not misuse our services.</li>
							<li>You must not attempt to gain unauthorized access to our systems.</li>
							<li>You must comply with all applicable laws and regulations.</li>
						</ul>
					</div>

					<div className='bg-black/20 p-4 rounded-md'>
						<h2 className='text-xl font-semibold mb-3'>3. Limitation of Liability</h2>
						<p className='text-white'>
							In no event shall PA Luxe Creation, nor any of its officers, directors, and employees,
							be liable to you for anything arising out of or in any way connected with your use of
							this website, whether such liability is under contract, tort or otherwise.
						</p>
					</div>

					<div className='bg-black/20 p-4 rounded-md'>
						<h2 className='text-xl font-semibold mb-3'>4. Governing Law</h2>
						<p className='text-white'>
							These Terms will be governed by and construed in accordance with the laws of South
							Africa, and you submit to the non-exclusive jurisdiction of the state and federal
							courts located in Limpopo for the resolution of any disputes.
						</p>
					</div>
				</div>
			</div>
		</Section>
	);
};

export default TermsContent;
</file>

<file path="client/src/app/terms/loading.tsx">
const Loading: React.FC = () => {
	return <div>Loading Terms and Conditions...</div>;
};

export default Loading;
</file>

<file path="client/src/app/terms/page.tsx">
import { Suspense } from 'react';
import Loading from '@/components/ui/Loading';
import Main from '@/components/ui/layout/Main';
import { FaUserCircle } from 'react-icons/fa';
import Image from 'next/image';
import Link from 'next/link';
import AppLink from '@/components/ui/Link';
import Section from '@/components/ui/layout/Section';
import { BiX } from 'react-icons/bi';

export default function TermsAndConditionsPage() {
	const team = [
		{
			name: 'Ntsako Nyath',
			role: 'Maneger (Industrial Engineering)',
			image: '/users/Abram.jpg',
			bio: 'My name is Abram Elton Ntsako Nyathi and I live in Phalaborwa Evander. I’m passionate about chess and enjoy playing it in my free time. I’m also interested in entrepreneurship and my goal is to have and run my own company. I have experience in coding (HTML, CSS, JavaScript), CAD (Fusion 360), and editing (Photoshop, Illustrator, After Effects). I’m proficient in Microsoft Word, Excel, and PowerPoint. I’m currently a student at Vaal University of Technology studying Industrial Engineering. Here are some of the subjects I’ve taken so far:',
			link: {
				Link: 'http://abrameltonntsako.web.app',
				Name: 'abrameltonntsako.web.app',
			},
		},
	];
	return (
		<Main
			tittle='Terms and Conditions'
			Icon={FaUserCircle}
			heading='Our Centarl Eatery Terms and Conditions'>
			<Section className='grid md:grid-cols-2 gap-12'>
				{team.map((member, index) => (
					<div
						key={member.name}
						className='group'>
						<div className='relative w-[300]    rounded-2xl overflow-hidden p-0 mb-8 border border-[var(--glass-border)] shadow-xl'>
							<Image
								src={member.image}
								alt={member.name}
								width={300}
								height={300}
								className=' rounded-md transition-all duration-500 group-hover:scale-110'
							/>
							<div className='absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300' />
						</div>
						<div className='text-center'>
							<h3 className='text-2xl font-bold mb-3 text-high-contrast group-hover:text-[var(--color-yellow-light)] transition-colors duration-300 drop-shadow-text'>
								{member.name}
							</h3>
							<p className='text-lg font-medium text-[var(--color-yellow)] mb-4 drop-shadow'>
								{member.role}
							</p>
							<p className='text-high-contrast leading-relaxed'>{member.bio}</p>
							<AppLink
								variant='primary'
								href={member.link.Link}>
								{member.link.Name}
							</AppLink>
						</div>
						<div className='mt-6 flex justify-center space-x-4'>
							<a
								href='#'
								className='text-high-contrast/70 hover:text-[var(--color-yellow-light)] transition-colors duration-300 hover:drop-shadow-glow'>
								<BiX />
								<svg
									className='w-6 h-6'
									fill='currentColor'
									viewBox='0 0 24 24'>
									<path d='M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z' />
								</svg>
							</a>
							<a
								href='#'
								className='text-high-contrast/70 hover:text-[var(--color-yellow-light)] transition-colors duration-300 hover:drop-shadow-glow'>
								<svg
									className='w-6 h-6'
									fill='currentColor'
									viewBox='0 0 24 24'>
									<path d='M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z' />
								</svg>
							</a>
						</div>
					</div>
				))}
			</Section>
		</Main>
	);
}
</file>

<file path="client/src/app/globals.css">
@import 'tailwindcss';
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));
@theme inline {
	--color-background: #000000;
	--color-foreground: #ffffff;
	--font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
		'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
		'Segoe UI Symbol', 'Noto Color Emoji'; /* Modern sans-serif stack */
	--font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono',
		'Courier New', monospace;
	--color-sidebar-ring: var(--sidebar-ring);
	--color-sidebar-border: var(--sidebar-border);
	--color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
	--color-sidebar-accent: var(--sidebar-accent);
	--color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
	--color-sidebar-primary: var(--sidebar-primary);
	--color-sidebar-foreground: var(--sidebar-foreground);
	--color-sidebar: var(--sidebar);
	--color-chart-5: var(--chart-5);
	--color-chart-4: var(--chart-4);
	--color-chart-3: var(--chart-3);
	--color-chart-2: var(--chart-2);
	--color-chart-1: var(--chart-1);
	--color-ring: var(--ring);
	--color-input: var(--input);
	--color-border: var(--border);
	--color-destructive: var(--destructive);
	--color-accent-foreground: var(--accent-foreground);
	--color-accent: var(--accent);
	--color-muted-foreground: var(--muted-foreground);
	--color-muted: var(--muted);
	--color-secondary-foreground: var(--secondary-foreground);
	--color-secondary: var(--secondary);
	--color-primary-foreground: var(--primary-foreground);
	--color-primary: var(--primary);
	--color-popover-foreground: var(--popover-foreground);
	--color-popover: var(--popover);
	--color-card-foreground: var(--card-foreground);
	--color-card: var(--card); /* Default mono */ --radius-sm: calc(var(--radius) - 4px); --radius-md: calc(var(--radius) - 2px); --radius-lg: var(--radius); --radius-xl: calc(var(--radius) + 4px);
}

@layer base {
	select {
		width: 100%;
		padding-left: 0.75rem;
		padding-right: 0.75rem;
		padding-top: 0.5rem;
		padding-bottom: 0.5rem;
		border: 1px solid #d1d5db;
		border-radius: 0.375rem;
		outline: none;
	}


	h1 {
		filter: drop-shadow(0 0 3px #f0b100);
		@apply text-4xl md:text-5xl font-bold;
	}

	h2 {
		@apply text-2xl md:text-4xl font-bold  border-b-2 p-2 border-yellow-500 mb-4;
		filter: drop-shadow(0 0 3px #f0b100);
	}
	h3 {
		@apply text-xl md:text-2xl font-semibold;
	}
	strong {
		@apply text-yellow-100 font-bold;
	}

	h4 {
		@apply text-lg md:text-xl font-semibold;
		filter: drop-shadow(0 0 3px #f0b100);
	}

	h5 {
		@apply text-base md:text-lg font-semibold;
		filter: drop-shadow(0 0 3px #f0b100);
	}
	h6 {
		@apply text-sm md:text-base font-semibold;
		filter: drop-shadow(0 0 3px #f0b100);
	}
	p {
		@apply text-balance text-base md:text-lg font-normal;
	}

	body,
	html {
		color: white;
	}

	h1 {
		@apply text-4xl md:text-5xl font-bold;
		filter: drop-shadow(0 0 3px #f0b100);
	}

	/* All other heading tags remain white for consistency */
	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		@apply text-white font-bold text-center my-2 text-shadow-sm text-shadow-black;
	}
	img {
		object-fit: contain;
	}
	label {
		color: white;
		line-height: 1.625;
		font-weight: bold;
	}
	@media (min-width: 768px) {
		label {
			font-size: 1.125rem;
		}
	}

	@media (min-width: 768px) {
		p {
			font-size: 1.125rem;
		}
	}
	li {
		color: white;
		line-height: 1.625;
		font-size: 1rem;
	}
	@media (min-width: 768px) {
		li {
			font-size: 1.125rem;
		}
	}
}

:root {
	--radius: 0.625rem;
	--background: oklch(1 0 0);
	--foreground: oklch(0.145 0 0);
	--card: oklch(1 0 0);
	--card-foreground: oklch(0.145 0 0);
	--popover: oklch(1 0 0);
	--popover-foreground: oklch(0.145 0 0);
	--primary: oklch(0.205 0 0);
	--primary-foreground: oklch(0.985 0 0);
	--secondary: oklch(0.97 0 0);
	--secondary-foreground: oklch(0.205 0 0);
	--muted: oklch(0.97 0 0);
	--muted-foreground: oklch(0.556 0 0);
	--accent: oklch(0.97 0 0);
	--accent-foreground: oklch(0.205 0 0);
	--destructive: oklch(0.577 0.245 27.325);
	--border: oklch(0.922 0 0);
	--input: oklch(0.922 0 0);
	--ring: oklch(0.708 0 0);
	--chart-1: oklch(0.646 0.222 41.116);
	--chart-2: oklch(0.6 0.118 184.704);
	--chart-3: oklch(0.398 0.07 227.392);
	--chart-4: oklch(0.828 0.189 84.429);
	--chart-5: oklch(0.769 0.188 70.08);
	--sidebar: oklch(0.985 0 0);
	--sidebar-foreground: oklch(0.145 0 0);
	--sidebar-primary: oklch(0.205 0 0);
	--sidebar-primary-foreground: oklch(0.985 0 0);
	--sidebar-accent: oklch(0.97 0 0);
	--sidebar-accent-foreground: oklch(0.205 0 0);
	--sidebar-border: oklch(0.922 0 0);
	--sidebar-ring: oklch(0.708 0 0);
}

.dark {
	--background: oklch(0.145 0 0);
	--foreground: oklch(0.985 0 0);
	--card: oklch(0.205 0 0);
	--card-foreground: oklch(0.985 0 0);
	--popover: oklch(0.205 0 0);
	--popover-foreground: oklch(0.985 0 0);
	--primary: oklch(0.922 0 0);
	--primary-foreground: oklch(0.205 0 0);
	--secondary: oklch(0.269 0 0);
	--secondary-foreground: oklch(0.985 0 0);
	--muted: oklch(0.269 0 0);
	--muted-foreground: oklch(0.708 0 0);
	--accent: oklch(0.269 0 0);
	--accent-foreground: oklch(0.985 0 0);
	--destructive: oklch(0.704 0.191 22.216);
	--border: oklch(1 0 0 / 10%);
	--input: oklch(1 0 0 / 15%);
	--ring: oklch(0.556 0 0);
	--chart-1: oklch(0.488 0.243 264.376);
	--chart-2: oklch(0.696 0.17 162.48);
	--chart-3: oklch(0.769 0.188 70.08);
	--chart-4: oklch(0.627 0.265 303.9);
	--chart-5: oklch(0.645 0.246 16.439);
	--sidebar: oklch(0.205 0 0);
	--sidebar-foreground: oklch(0.985 0 0);
	--sidebar-primary: oklch(0.488 0.243 264.376);
	--sidebar-primary-foreground: oklch(0.985 0 0);
	--sidebar-accent: oklch(0.269 0 0);
	--sidebar-accent-foreground: oklch(0.985 0 0);
	--sidebar-border: oklch(1 0 0 / 10%);
	--sidebar-ring: oklch(0.556 0 0);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
	}
  body {
    @apply bg-background text-foreground;
	}
}
</file>

<file path="client/src/app/layout.css">
@import 'tailwindcss';
@import './globals.css';

@layer base {
	body {
		@apply m-0 p-0 text-white bg-black  bg-fixed h-full relative;
		font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
			'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
			'Segoe UI Symbol', 'Noto Color Emoji';
		background-image: url('/BackGround.png');
		background-size: cover;
		background-repeat: no-repeat;
		color: white;
	}

	article {
		@apply bg-yellow-700 rounded-md py-2 md:p-6 my-3 mt-6 mb-6 px-8 shadow-sm shadow-black;
	}
	nav {
		@apply m-0 p-0 md:p-6;
	}
	footer {
		@apply w-full bg-white/10 border border-yellow-500 rounded-md p-6 my-3 mt-6 mb-6 px-8;
	}
}
</file>

<file path="client/src/app/layout.tsx">
import type { Metadata } from 'next';
import './globals.css';
import './layout.css';

import Navbar from '@/components/Navbar/Navbar';
import { Analytics } from '@vercel/analytics/next';

export default function RootLayout({
	children,
}: Readonly<{
	children: React.ReactNode;
}>) {
	return (
		<html lang='en'>
			<body className={` antialiased min-h-screen`}>
				       <Navbar />
		
					       {children}
				     
				<Analytics />
			</body>
		</html>
	);
}
</file>

<file path="client/src/app/loading.tsx">
import Loading from '@/components/ui/Loading';

export default function LoadingPage() {
	return <Loading message='Loading Home page...' />;
}
</file>

<file path="client/src/app/page.tsx">
import AboutUsSnippet from '@/app/home-components/AboutUsSnippet';
import ContactSection from '@/app/home-components/ContactSection';
import FeaturedItemsServices from '@/app/home-components/FeaturedItemsServices';

import HeroSection from '@/app/home-components/HeroSection';
import KeyDifferentiators from '@/app/home-components/KeyDifferentiators';
import TargetMarketCallout from '@/app/home-components/TargetMarketCallout';
import Testimonials from '@/app/home-components/Testimonials';
import Main from '@/components/ui/layout/Main';
const HomePage = () => {
	return (
		<Main>
			<HeroSection />
			<AboutUsSnippet />
			<KeyDifferentiators />
			<FeaturedItemsServices />
			<TargetMarketCallout />
			<Testimonials />
			<ContactSection />
		</Main>
	);
};
export default HomePage;
</file>

<file path="client/src/components/Navbar/AuthButton.tsx">
'use client';
import AppLink from '@/components/ui/Link';
import Button from '@/components/ui/Button';

import { FaSignInAlt, FaUserCircle } from 'react-icons/fa';
import { User } from '@supabase/supabase-js';

const AuthButton: React.FC<{ setMenubar: (path: 'mobile' | 'profile') => void; user: User | null }> = ({
	setMenubar,
	user,
}) => {
	if (user)
		return (
			<Button
				variant='icon'
				onClick={() => setMenubar('profile')}
				aria-label='Open profile menu'>
				<FaUserCircle size={28} />
			</Button>
		);
	return (
		<AppLink
			variant='button'
			className='my-1'
			href='/login'>
			<FaSignInAlt /> Log in
		</AppLink>
	);
};

export default AuthButton;
</file>

<file path="client/src/components/Navbar/DesktopNavbar.tsx">
'use client';
import AppLink from '@/components/ui/Link';
import Image from 'next/image';
import {
	FaUserCircle,
	FaShoppingCart,
	FaClipboardList,
	FaSignOutAlt,
	FaHome,
	FaInfoCircle,
	FaCar,
	FaEnvelope,
	FaUtensils,
	FaImages,
} from 'react-icons/fa';
import React, { useState, useRef, useEffect } from 'react';
import Button from '@/components/ui/Button';
const publicPaths = ['/', '/contact', '/about', '/gallery', '/terms', '/blog','/photo'];
import { useAuth } from '@/lib/supabase/auth/useAuth';
import { FaBlog } from 'react-icons/fa6';

const DesktopNavbar: React.FC = () => {
	const { user } = useAuth();
	const [profileOpen, setProfileOpen] = useState(false);
	const profileRef = useRef<HTMLLIElement>(null);

	useEffect(() => {
		const handleClickOutside = (event: MouseEvent) => {
			if (profileRef.current && !profileRef.current.contains(event.target as Node)) {
				setProfileOpen(false);
			}
		};
		document.addEventListener('mousedown', handleClickOutside);
		return () => {
			document.removeEventListener('mousedown', handleClickOutside);
		};
	}, []);

	return (
		<nav className='md:flex gap-2 hidden justify-between items-center p-0 m-0 w-full'>
			<Image
				src='/PA_Logo.png'
				alt='Logo'
				width={64}
				height={64}
				className='h-16'
				priority
			/>
			<ul className='flex space-x-4 items-center'>
				{publicPaths.map((path) => (
					<li key={path}>
						<AppLink
							href={path}
							variant='secondary'>
							<span className='flex items-center gap-2'>
								{path === '/' && (
									<span className='flex items-center gap-2'>
										<FaHome /> Home
									</span>
								)}
								{path === '/about' && <FaInfoCircle />}
								{path === '/gallery' && <FaImages />}
								{path === '/carwash' && <FaCar />}
								{path === '/contact' && <FaEnvelope />}
								{path === '/blog' && <FaBlog />}
								{path.replace('/', '').charAt(0).toUpperCase() + path.replace('/', '').slice(1)}
							</span>
						</AppLink>
					</li>
				))}
			</ul>
		</nav>
	);
};

export default DesktopNavbar;
</file>

<file path="client/src/components/Navbar/MobileMenu.tsx">
import AppLink from '../ui/Link';
import { FaHome, FaInfoCircle, FaCar, FaEnvelope, FaImages } from 'react-icons/fa';
const publicPaths = ['/', '/contact', '/about', '/gallery', '/terms', '/blog','/photo'];
import { Dispatch, SetStateAction, useEffect, useRef } from 'react';
const MobileMenu: React.FC<{
	setMenubar: (path: 'mobile' | 'profile') => void;
}> = ({ setMenubar }) => {
	const navRef = useRef<HTMLUListElement>(null);
	// useEffect(() => {
	// 	const handleClickOutside = (event: MouseEvent) => {
	// 		if (navRef.current && !navRef.current.contains(event.target as Node)) {
	// 			setMenubar('mobile');
	// 		}
	// 	};
	// 	document.addEventListener('mousedown', handleClickOutside);
	// 	return () => {
	// 		document.removeEventListener('mousedown', handleClickOutside);
	// 	};
	// }, []);
	return (
		<nav className='md:hidden  top-full m-0 left-0 w-full transition-all duration-300 z-50 h-screen '>
			<ul
				ref={navRef}
				className='flex flex-col items-start p-4 gap-4'>
				{publicPaths.map((path) => (
					<li key={path}>
						<AppLink
							href={path}
							variant='primary'
							onClick={() => setMenubar('mobile')}>
							<span className='flex items-center gap-2'>
								{path === '/' && (
									<span className='flex items-center gap-2'>
										<FaHome /> Home
									</span>
								)}
								{path === '/about' && <FaInfoCircle />}
								{path === '/gallery' && <FaImages />}
								{path === '/carwash' && <FaCar />}
								{path === '/contact' && <FaEnvelope />}
								{path === '/terms' && 'Terms'}
								{path === '/blog' && 'Blog'}
								{path.replace('/', '').charAt(0).toUpperCase() + path.replace('/', '').slice(1)}
							</span>
						</AppLink>
					</li>
				))}
			</ul>
		</nav>
	);
};
export default MobileMenu;
</file>

<file path="client/src/components/Navbar/MobileNavbar.tsx">
'use client';
import React, { useState, useRef, useEffect, Dispatch, SetStateAction } from 'react';
import Button from '@/components/ui/Button';

const MobileNavbar: React.FC<{
	setMenubar: (path: 'mobile' | 'profile') => void;
	mobileOpen: boolean;
}> = ({ mobileOpen, setMenubar }) => {
	return (
		<nav className='md:hidden w-full m-0 z-50 p-0'>
			<div className='flex flex-row items-center justify-between w-full '>
				<Button
					variant='icon'
					onClick={() => {
						setMenubar('mobile');
					}}
					title={mobileOpen ? 'Close menu' : 'Open menu'}
					aria-label={mobileOpen ? 'Close menu' : 'Open menu'}>
					<svg
						className='h-6 w-6'
						fill='none'
						stroke='currentColor'
						viewBox='0 0 24 24'
						xmlns='http://www.w3.org/2000/svg'>
						{mobileOpen ? (
							<path
								strokeLinecap='round'
								strokeLinejoin='round'
								strokeWidth='2'
								d='M6 18L18 6M6 6l12 12'
							/>
						) : (
							<path
								strokeLinecap='round'
								strokeLinejoin='round'
								strokeWidth='2'
								d='M4 6h16M4 12h16m-7 6h7'
							/>
						)}
					</svg>
				</Button>
			</div>
		</nav>
	);
};

export default MobileNavbar;
</file>

<file path="client/src/components/Navbar/Navbar.tsx">
import { createClient } from '@/lib/supabase/server';
import NavbarClient from './NavbarClient';

const Navbar = async () => {
	const supabase = await createClient();
	const {
		data: { user },
	} = await supabase.auth.getUser();

	return <NavbarClient user={user} />;
};

export default Navbar;
</file>

<file path="client/src/components/Navbar/NavbarClient.tsx">
'use client';
import React from 'react';
import DesktopNavbar from './DesktopNavbar';
import MobileNavbar from './MobileNavbar';
import ProfileMenu from './ProfileMenu';
import AuthButton from './AuthButton';
import MobileMenu from './MobileMenu';
import { useMenubarToggle } from './useMenubarToggle';
import { User } from '@supabase/supabase-js';

interface NavbarClientProps {
    user: User | null;
}

const NavbarClient: React.FC<NavbarClientProps> = ({ user }) => {
    const { profileOpen, mobileOpen, setMenubar } = useMenubarToggle();

    return (
        <header className='sticky bg-white/10 backdrop-blur-md top-0 left-0 m-0 p-0 w-full px-2 z-50 border-b border-yellow-500/20'>
            <div className='flex justify-between w-full'>
                <MobileNavbar
                    setMenubar={setMenubar}
                    mobileOpen={mobileOpen}
                />
                <DesktopNavbar />
                <AuthButton setMenubar={setMenubar} user={user} />
            </div>
            {profileOpen ? <ProfileMenu setMenubar={setMenubar} user={user} /> : null}
            {mobileOpen ? <MobileMenu setMenubar={setMenubar} /> : null}
        </header>
    );
};
export default NavbarClient;
</file>

<file path="client/src/components/Navbar/ProfileMenu.tsx">
const protectedPaths = ['/profile', '/orders', '/carwash/booking', '/menu'];
import AppLink from '../ui/Link';
import { FaCar, FaClipboardList, FaSignOutAlt, FaUserCircle, FaUtensils } from 'react-icons/fa';
import Button from '../ui/Button';
import { useEffect, useRef } from 'react';


import { User } from '@supabase/supabase-js';

const ProfileMenu: React.FC<{ setMenubar: (path: 'mobile' | 'profile') => void; user: User | null }> = ({
	setMenubar,
	user,
}) => {
	const navRef = useRef<HTMLUListElement>(null);
	if (!user) return null;

	// useEffect(() => {
	// 	const handleClickOutside = (event: MouseEvent) => {
	// 		if (navRef.current && !navRef.current.contains(event.target as Node)) {
	// 			setMenubar('profile');
	// 		}
	// 	};
	// 	document.addEventListener('mousedown', handleClickOutside);
	// 	return () => {
	// 		document.removeEventListener('mousedown', handleClickOutside);
	// 	};
	// }, []);
	return (
		<nav className=' top-full m-0 left-0 w-full transition-all duration-300 z-50 h-screen'>
			<ul
				ref={navRef}
				className='flex flex-col items-start p-4 gap-4'>
				{protectedPaths.map((path) => (
					<li key={path}>
						<AppLink
							href={path}
							variant='primary'
							onClick={() => setMenubar('profile')}>
							<span className='flex items-center gap-2'>
								{path === '/menu' && <FaUtensils />}
								{path === '/profile' && <FaUserCircle />}
								{path === '/orders' && <FaClipboardList />}
								{path === '/carwash/booking' && <FaCar />}
								{path.replace('/', '').charAt(0).toUpperCase() + path.replace('/', '').slice(1)}
							</span>
						</AppLink>
					</li>
				))}
			</ul>

			<Button
				variant='primary'
				onClick={async () => {
					const { createClient } = await import('@/lib/supabase/client');
					const supabase = createClient();
					await supabase.auth.signOut();
					setMenubar('profile');
				}}
				className='flex items-center justify-between gap-2 px-4 py-2 w-full text-left'>
				<span className='flex items-center gap-2'>
					<FaSignOutAlt /> Log Out
				</span>
			</Button>
		</nav>
	);
};
export default ProfileMenu;
</file>

<file path="client/src/components/Navbar/useMenubarToggle.ts">
import { useState } from 'react';

type MenuPath = 'mobile' | 'profile';

export const useMenubarToggle = () => {
  const [profileOpen, setProfileOpen] = useState(false);
  const [mobileOpen, setMobileOpen] = useState(false);

  const setMenubar = (path: MenuPath) => {
    if (path === 'mobile') {
      setMobileOpen(prev => !prev);
      setProfileOpen(false);
    } else if (path === 'profile') {
      setProfileOpen(prev => !prev);
      setMobileOpen(false);
    }
  };

  return {
    profileOpen,
    mobileOpen,
    setMenubar,
  };
};
</file>

<file path="client/src/components/ui/layout/FormField.tsx">
import React from 'react';

interface FormFieldProps {
	label: string;
	name: string;
	type?: 'text' | 'date' | 'time' | 'select';
	value?: string;
	onChange?: (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => void;
	required?: boolean;
	placeholder?: string;
	className?: string;
	children?: React.ReactNode;
	min?: string;
	id?: string;
}

const formInputStyle =
	'w-full p-3 rounded-md bg-black/30 border border-white/20 focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 outline-none';

const FormField: React.FC<FormFieldProps> = ({
	label,
	name,
	type = 'text',
	value,
	onChange,
	required = false,
	placeholder,
	className = '',
	children,
	min,
	id,
}) => (
	<div className={className}>
		<label
			htmlFor={id || name}
			className='block mb-2 font-semibold text-white'>
			{label}
		</label>
		{type === 'select' ? (
			<select
				name={name}
				id={id || name}
				value={value}
				onChange={onChange}
				required={required}
				className={formInputStyle}>
				{children}
			</select>
		) : (
			<input
				type={type}
				name={name}
				id={id || name}
				value={value}
				onChange={onChange}
				required={required}
				placeholder={placeholder}
				className={formInputStyle}
				min={min}
			/>
		)}
	</div>
);

export default FormField;
</file>

<file path="client/src/components/ui/layout/Main.tsx">
interface MainProps {
	Icon?: React.ElementType;
	className?: string;
	heading?: string;
	tittle?: string;
	children: React.ReactNode;
}
export default function Main({ children, Icon, heading, tittle, className }: MainProps) {
	return (
		<main
			className={
				className
					? className
					: 'relative flex flex-col items-center justify-start w-full min-h-screen p-2 md:px-4 bg-white/10 backdrop-blur-md'
			}>
			<header>
				<span className='flex items-center justify-center gap-3'>
					{Icon && <Icon className='text-3xl text-yellow-500' />}
					{tittle && <h1>{tittle}</h1>}
				</span>
				<p className='text-white/70 text-center mt-2 flex-grow'>{heading}</p>
			</header>
			{children}
		</main>
	);
}
</file>

<file path="client/src/components/ui/layout/Section.tsx">
import { Suspense } from 'react';
import Loading from '../Loading';

interface SectionProps extends React.HTMLProps<HTMLElement> {
	Icon?: React.ElementType;
	heading?: string;
	tittle?: string;
	className?: string;
	children: React.ReactNode;
}
export default function Section({
	children,
	Icon,
	heading,
	tittle,
	className,
	...props
}: SectionProps) {
	return (
		<section
			{...props}
			className={
				className ? className : 'bg-white/10 backdrop-blur-md border border-yellow-500/20 rounded-md p-2 my-4'
			}>
			<header>
				{Icon ? (
					<div className='flex flex-col items-center text-center'>
						<span className='flex items-center justify-center w-12 h-12 bg-yellow-500 mx-auto text-white rounded-full shadow-sm shadow-black/50 '>
							<Icon className='text-3xl' />
						</span>
						{tittle && <h3 className='mt-4 text-shadow-sm text-shadow-black/50'>{tittle}</h3>}
					</div>
				) : (
					tittle && <h2 className='text-shadow-sm text-shadow-black/50'>{tittle}</h2>
				)}
				<p className='text-white/70 text-center mt-2 flex-grow'>{heading}</p>
			</header>
			{children}
		</section>
	);
}
</file>

<file path="client/src/components/ui/AddOnSelector.tsx">
import React from 'react';

const carWashAddOns = [
	{ id: 'interior-detailing', label: 'Interior Detailing', price: '150' },
	{ id: 'wax-polish', label: 'Wax and Polish', price: '100' },
	{ id: 'engine-wash', label: 'Engine Wash', price: '80' },
	{ id: 'tire-shine', label: 'Tire Shine', price: '50' },
];

interface AddOnSelectorProps {
	selectedAddOns: string[];
	onChange: (addOns: string[]) => void;
}

const AddOnSelector: React.FC<AddOnSelectorProps> = ({ selectedAddOns, onChange }) => {
	const handleAddOnChange = (addOn: string) => {
		const newSelection = selectedAddOns.includes(addOn)
			? selectedAddOns.filter((item) => item !== addOn)
			: [...selectedAddOns, addOn];
		onChange(newSelection);
	};

	return (
		<div className='space-y-4'>
			<h3 className='text-lg font-semibold text-white'>Additional Services</h3>
			<div className='grid grid-cols-1 md:grid-cols-2 gap-4'>
				{carWashAddOns.map(({ id, label, price }) => (
					<div
						key={id}
						className='flex items-center space-x-3 p-3 rounded-md bg-black/30 border border-white/20'>
						<input
							type='checkbox'
							id={id}
							checked={selectedAddOns.includes(label)}
							onChange={() => handleAddOnChange(label)}
							className='h-5 w-5 text-yellow-500 rounded focus:ring-yellow-500 bg-black/30 border-white/20'
						/>
						<label
							htmlFor={id}
							className='flex-1 cursor-pointer'>
							<span className='block text-white'>{label}</span>
							<span className='block text-sm text-white/60'>R{price}</span>
						</label>
					</div>
				))}
			</div>
		</div>
	);
};

export default AddOnSelector;
</file>

<file path="client/src/components/ui/Alert.tsx">
import React from 'react';
import { FaCheckCircle, FaExclamationTriangle, FaTimes } from 'react-icons/fa';

interface AlertProps {
  variant: 'success' | 'danger';
  onClose?: () => void;
  className?: string;
  children?: React.ReactNode;
  message?: string; // Keeping for backward compatibility
}

const Alert: React.FC<AlertProps> = ({
  variant,
  onClose,
  className = '',
  children,
  message,
}) => {
  const styles = {
    success: 'bg-green-500/20 text-white',
    danger: 'bg-yellow-500/20 text-white',
  };

  const displayMessage = children || message;

  return (
    <div
      className={`mt-4 p-3 rounded-md flex items-center gap-2 relative ${
        styles[variant]
      } ${className}`}
    >
      {variant === 'success' ? <FaCheckCircle /> : <FaExclamationTriangle />}
      <span className='flex-1'>{displayMessage}</span>
      {onClose && (
        <button
          onClick={onClose}
          className='text-white hover:opacity-75 transition-opacity'
          aria-label='Close alert'
        >
          <FaTimes />
        </button>
      )}
    </div>
  );
};

export default Alert;
</file>

<file path="client/src/components/ui/Avatar.tsx">
import React from 'react';
import classNames from 'classnames'; // Import classNames
import Image from 'next/image';

interface AvatarProps {
	src: string | null | undefined;
	alt: string;
	size?: 'small' | 'medium' | 'large';
	className?: string; // Existing className for external styles
}

// Define size classes as an object for better readability and maintainability
const sizeClassesMap = {
	small: 'w-8 h-8 text-sm', // Added text-sm for initial/fallback text size
	medium: 'w-10 h-10 text-base', // Added text-base
	large: 'w-16 h-16 text-xl', // Added text-xl
};

const Avatar: React.FC<AvatarProps> = ({ src, alt, size = 'medium', className }) => {
	// Get the size-specific classes from the map, defaulting to 'medium'
	const currentSizeClasses = sizeClassesMap[size];

	return (
		<div
			className={classNames(
				'relative flex items-center justify-center rounded-full bg-yellow-200 overflow-hidden',
				currentSizeClasses, // Apply the size-specific classes
				className // Apply any additional classes passed from parent
			)}>
			{src ? (
				<Image
					src={src}
					alt={alt}
					className='absolute inset-0 w-full h-full object-cover'
				/>
			) : (
				// Fallback for no image: display first letter of alt text
				<span className='text-yellow-600 font-bold uppercase flex items-center justify-center h-full w-full'>
					{alt.charAt(0)}
				</span>
			)}
		</div>
	);
};

export default Avatar;
</file>

<file path="client/src/components/ui/Button.tsx">
import React from 'react';
import classNames from 'classnames';

export type ButtonVariant = 'primary' | 'secondary' | 'danger' | 'icon' | 'suggestion';
export type ButtonSize = 'sm' | 'md' | 'lg';

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
	variant?: ButtonVariant;
	size?: ButtonSize;
	loading?: boolean;
}

const baseClasses =
	'rounded-md flex gap-2 items-center justify-center font-semibold transition-colors duration-200 focus:outline-none focus-visible:ring-4  focus-visible:ring-yellow-400 text-nowrap';
const variantClasses = {
	primary: 'bg-yellow-600 text-white hover:bg-yellow-700 shadow-sm shadow-black',
	secondary: 'bg-white text-yellow-600 border border-yellow-400 hover:bg-red-50',
	danger: 'bg-yellow-100 text-yellow-700 border border-yellow-400 hover:bg-yellow-200',
	icon: 'bg-none text-yellow-500 hover:text-yellow-700',
	suggestion: 'bg-transparent text-white hover:bg-yellow-700',
};
const sizeClasses = {
	sm: 'px-3 py-1 text-sm',
	md: 'px-4 py-2 text-base',
	lg: 'px-6 py-3 text-lg',
};

const Button: React.FC<ButtonProps> = ({
	children,
	variant = 'primary',
	size = 'sm',
	loading = false,
	disabled,
	className,
	...props
}) => (
	<button
		className={classNames(baseClasses, variantClasses[variant], sizeClasses[size], className, {
			'opacity-50 cursor-not-allowed': disabled || loading,
		})}
		disabled={disabled || loading}
		{...props}>
		{loading ? (
			<span className='inline-block w-4 h-4 border-2 border-white border-t-yellow-600 rounded-full animate-spin mr-2'></span>
		) : (
			children
		)}
	</button>
);

export default Button;
</file>

<file path="client/src/components/ui/Icon.tsx">
import React from 'react';

interface IconProps {
	icon: React.ElementType;
	className?: string;
	variant?: 'default' | 'inline' | 'inlineCircular';
	heading?: string;
}

const Icon: React.FC<IconProps> = ({
	icon: IconComponent,
	className,
	variant = 'default',
	heading,
}) => {
	if (variant === 'inline') {
		return (
			<div className='flex items-center justify-center gap-2'>
				<IconComponent className={`${className} text-3xl text-yellow-500`} />
				{heading && <h2 className='border-none'>{heading}</h2>}
			</div>
		);
	}

	if (variant === 'inlineCircular') {
		return (
			<div className='flex items-center  gap-2 '>
				<span className='bg-yellow-500 shadow-sm shadow-black/50 rounded-full p-2 '>
					<IconComponent className={` text-white text-xl   ${className || ''}`} />
				</span>

				{heading && <h3 className='text-shadow-sm text-shadow-black/50 p-2'>{heading}</h3>}
			</div>
		);
	}

	// Default variant (circular icon)
	return (
		<div className='flex flex-col items-center text-center'>
			<div className='flex items-center justify-center w-12 h-12 bg-yellow-500 mx-auto text-white rounded-full shadow-sm shadow-black/50 '>
				<IconComponent className={`w-6 h-6 ${className || ''}`} />
			</div>
			{heading && <h3 className='mt-4 text-shadow-sm text-shadow-black/50'>{heading}</h3>}
		</div>
	);
};

export default Icon;
</file>

<file path="client/src/components/ui/Link.tsx">
import React from 'react';
import Link, { LinkProps as NextLinkProps } from 'next/link';
import classNames from 'classnames';

export type LinkVariant = 'primary' | 'secondary' | 'button';

interface LinkProps extends NextLinkProps {
	children: React.ReactNode;
	className?: string;
	variant?: LinkVariant;
}

const baseClasses = 'transition-colors duration-200 flex gap-2 items-center justify-center';

const variantClasses = {
	primary: 'text-yellow-100 shadow-blue-500 font-bold hover:text-yellow-700 hover:underline',
	secondary: 'text-yellow-200 hover:text-yellow-700 hover:underline',
	button:
		'bg-yellow-500 font-bold grow p-2 text-center text-nowrap text-white shadow-md shadow-black active:bg-yellow-900 rounded-md flex gap-2 items-center justify-center font-semibold transition-colors duration-200 focus:outline-none focus-visible:ring-4  focus-visible:ring-yellow-400 ',
};

const AppLink: React.FC<LinkProps> = ({ children, className, variant = 'primary', ...props }) => {
	return (
		<Link
			{...props}
			className={classNames(baseClasses, variantClasses[variant], className)}>
			{children}
		</Link>
	);
};

export default AppLink;
</file>

<file path="client/src/components/ui/Loading.tsx">
import Image from 'next/image';
import '../components.css'; // Optional: for custom styles
import Main from './layout/Main';
import Section from './layout/Section';

const Loading = ({ message = 'Loading...' }: { message?: string }) => (
	<Main className='flex flex-col justify-center items-center min-h-screen  p-4' tittle='Central Eatery' heading='Experience the unique convenience of delicious food and a state-of-the-art Photo boot, all in
				one place in Lulekani.'>
		<Section className='flex flex-col items-center text-center max-w-md'>
			<div className='mt-8 animate-pulse'>
				<Image
					src='/PA_Logo.png'
					alt='Central Eatery Logo'
					width={220}
					height={220}
					className='w-48 h-48 mb-4'
					priority
				/>
			</div>
			<div className='spinner' />
			<p className='text-white font-semibold'>{message}</p>
		</Section>
	</Main>
);

export default Loading;
</file>

<file path="client/src/components/ui/TextInput.tsx">
import React from 'react';
import classNames from 'classnames';

export type TextInputVariant = 'default' | 'error';
export type CustomTextInputSize = 'sm' | 'md' | 'lg'; // Renamed to avoid conflict

interface TextInputProps extends React.InputHTMLAttributes<HTMLInputElement> {
	variant?: TextInputVariant;
	customSize?: CustomTextInputSize; // Using the new name
	loading?: boolean;
	label?: string;
	fullWidth?: boolean;
	icon?: React.ReactNode;
}

const baseClasses = 'block rounded-md transition-all duration-200 focus:outline-none focus:ring-2 ';

const variantClasses = {
	default: 'border-white/30 bg-black/20 focus:border-yellow-500 focus:ring-yellow-500',
	error: 'border-yellow-500 bg-black/20 focus:border-yellow-500 focus:ring-yellow-500',
};

// Use the new custom size type here
const sizeClasses = {
	sm: 'px-3 py-1 text-sm',
	md: 'px-4 py-2 text-base',
	lg: 'px-5 py-2.5 text-lg',
};

const TextInput: React.FC<TextInputProps> = ({
	label,
	variant = 'default',
	customSize = 'md',
	loading = false,
	disabled,
	className,
	fullWidth = true,
	icon,
	...props
}) => {
	const inputId = props.id || `text-input-${Math.random().toString(36).substring(2, 9)}`;

	const containerClasses = classNames('relative', { 'w-full': fullWidth });

	const inputClasses = classNames(
		baseClasses,
		variantClasses[variant],
		sizeClasses[customSize],
		className,
		{
			'opacity-50 cursor-not-allowed': disabled || loading,
			'w-full': fullWidth,
			'pl-10': icon,
		}
	);

	return (
		<div className={containerClasses}>
			{label && (
				<label
					htmlFor={inputId}
					className='block text-sm font-medium text-white mb-1'>
					{label}
				</label>
			)}
			{icon && (
				<div className='absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none'>
					{icon}
				</div>
			)}
			<input
				id={inputId}
				className={inputClasses}
				disabled={disabled || loading}
				{...props}
			/>
		</div>
	);
};

export default TextInput;
</file>

<file path="client/src/components/ui/TimeSlotPicker.tsx">
import React from 'react';

const timeSlots = ['09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00'];

interface TimeSlotPickerProps {
	selectedTime: string;
	onChange: (time: string) => void;
	availableWorkers: string[];
	disabled?: boolean;
}

const TimeSlotPicker: React.FC<TimeSlotPickerProps> = ({
	selectedTime,
	onChange,
	availableWorkers,
	disabled = false,
}) => (
	<div className='space-y-4'>
		<h3 className='text-lg font-semibold text-white'>Available Time Slots</h3>
		<div className='grid grid-cols-2 sm:grid-cols-4 gap-3'>
			{timeSlots.map((time) => {
				const isAvailable = !disabled && availableWorkers.length > 0;
				return (
					<button
						key={time}
						type='button'
						onClick={() => isAvailable && onChange(time)}
						disabled={!isAvailable}
						className={`p-3 rounded-md text-center transition-colors ${
							selectedTime === time
								? 'bg-yellow-500 text-white'
								: isAvailable
								? 'bg-black/30 text-white hover:bg-yellow-500/20'
								: 'bg-black/10 text-white/40 cursor-not-allowed'
						}`}>
						{time}
					</button>
				);
			})}
		</div>
		{!disabled && availableWorkers.length === 0 && (
			<p className='text-yellow-400'>No workers available for these time slots.</p>
		)}
	</div>
);

export default TimeSlotPicker;
</file>

<file path="client/src/components/components.css">
.spinner {
  width: 48px;
  height: 48px;
  border: 6px solid rgba(255, 255, 255, 0.3);
  border-top-color: #f0b100;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 16px;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}
</file>

<file path="client/src/lib/actions/auth.ts">
"use server";

import { createClient } from "@/lib/supabase/server";
import { redirect } from "next/navigation";
import type { User, SupabaseClient } from "@supabase/supabase-js";
import { Database } from "@/lib/database.types";

export type AuthActionState = {
  success: boolean;
  error?: string;
  user?: User | null;
};

export async function signInAction(
  _prevState: AuthActionState | null,
  formData: FormData
): Promise<AuthActionState> {
  const email = String(formData.get("email") ?? "").trim();
  const password = String(formData.get("password") ?? "").trim();

  if (!email || !password) {
    return {
      success: false,
      error: "Email and password are required.",
    };
  }

  let user = null;

  try {
    const supabase: SupabaseClient<Database> = await createClient();
    const { data, error } = await supabase.auth.signInWithPassword({
      email,
      password,
    });

    if (error) {
      return {
        success: false,
        error: error.message,
      };
    }

    user = data.user;
  } catch (error) {
    return {
      success: false,
      error: error instanceof Error ? error.message : "An unexpected error occurred during sign in.",
    };
  }

  if (user) {
    redirect("/profile");
  }

  return {
    success: false,
    error: "Sign in failed. Please check your credentials.",
  };
}

export async function signUpAction(
  _prevState: AuthActionState | null,
  formData: FormData
): Promise<AuthActionState> {
  const email = String(formData.get("email") ?? "").trim();
  const password = String(formData.get("password") ?? "").trim();
  const displayName = String(formData.get("displayName") ?? "").trim();
  const phoneNumber = String(formData.get("phoneNumber") ?? "").trim() || undefined;

  if (!email || !password || !displayName) {
    return {
      success: false,
      error: "Email, password, and display name are required.",
    };
  }

  let user = null;

  try {
    const supabase: SupabaseClient<Database> = await createClient();

    // Sign up user
    const { data: authData, error: authError } = await supabase.auth.signUp({
      email,
      password,
      options: {
        data: {
          display_name: displayName,
          phone_number: phoneNumber || "",
        },
      },
    });

    if (authError) {
      return {
        success: false,
        error: authError.message,
      };
    }

    user = authData.user;

    // Create user profile in public.profiles table
    if (user) {
      const { error: profileError } = await (supabase
        .from("profiles") as any).insert({
          id: user.id,
          email: user.email,
          display_name: displayName,
          phone: phoneNumber || "",
          role: "customer",
          uid: user.id,
          email_verified: false,
          photo_url: null,
          address: "",
          city: "",
          state: "",
          zip_code: "",
          country: "",
          theme: "system",
          order_history: [],
          loyalty_points_balance: 0,
          tier_status: "Bronze",
          rewards_available: [],
          yellowemption_history: [],
          personalized_promotions: [],
          referral_code: "",
          car_wash_count: 0,
          preferences: {
            dietaryRestrictions: [],
            favoriteItems: [],
            preferyellowCarWashServices: [],
            preferyellowPaymentMethod: "credit_card",
            communicationPreferences: {
              email: true,
              sms: false,
              promotions: true,
            },
          },
          saved_payment_methods: [],
          created_at: new Date().toISOString(),
          updated_at: new Date().toISOString(),
          last_login: new Date().toISOString(),
        } as any);

      if (profileError) {
        console.error("Error creating user profile:", profileError);
        // We might want to return an error here, but for now we'll proceed
        // return { success: false, error: "Failed to create profile: " + profileError.message };
      }
    }
  } catch (error) {
    return {
      success: false,
      error: error instanceof Error ? error.message : "An unexpected error occurred during registration.",
    };
  }

  if (user) {
    redirect("/profile");
  }

  return {
    success: false,
    error: "Registration failed. Please try again.",
  };
}
</file>

<file path="client/src/lib/actions/profile.ts">
"use server";

import { createClient } from "@/lib/supabase/server";

export type ProfileActionState = {
  success: boolean;
  error?: string;
};

export async function updateProfileAction(
  _prevState: ProfileActionState | null,
  formData: FormData
): Promise<ProfileActionState> {
  const displayName = String(formData.get("displayName") ?? "").trim();
  const phoneNumber = String(formData.get("phoneNumber") ?? "").trim() || null;
  const photoURL = String(formData.get("photoURL") ?? "").trim() || null;

  if (!displayName) {
    return {
      success: false,
      error: "Display name is required.",
    };
  }

  try {
    const supabase = await createClient();
    const {
      data: { user },
      error: authError,
    } = await supabase.auth.getUser();

    if (authError || !user) {
      return {
        success: false,
        error: "User not authenticated.",
      };
    }

    // Update user metadata
    const { error: updateError } = await supabase.auth.updateUser({
      data: {
        display_name: displayName,
        phone_number: phoneNumber,
        photoURL: photoURL,
      },
    });

    if (updateError) {
      return {
        success: false,
        error: updateError.message,
      };
    }

    // Also update the profiles table
    const { error: profileError } = await supabase
      .from("profiles")
      // @ts-ignore - Supabase type inference issue with Database types
      .update({
        display_name: displayName,
        phone: phoneNumber,
      })
      .eq("id", user.id);

    if (profileError) {
      console.error("Error updating profile:", profileError);
      // Don't fail if profile update fails, but log it
    }

    return {
      success: true,
    };
  } catch (error) {
    return {
      success: false,
      error: error instanceof Error ? error.message : "An unexpected error occurred while updating profile.",
    };
  }
}

export async function updateAddressAction(
  _prevState: ProfileActionState | null,
  formData: FormData
): Promise<ProfileActionState> {
  const address = String(formData.get("address") ?? "").trim();
  const city = String(formData.get("city") ?? "").trim();
  const state = String(formData.get("state") ?? "").trim();
  const zipCode = String(formData.get("zipCode") ?? "").trim();
  const country = String(formData.get("country") ?? "").trim();

  if (!address || !city || !state || !zipCode || !country) {
    return {
      success: false,
      error: "All address fields are required.",
    };
  }

  try {
    const supabase = await createClient();
    const {
      data: { user },
      error: authError,
    } = await supabase.auth.getUser();

    if (authError || !user) {
      return {
        success: false,
        error: "User not authenticated.",
      };
    }

    // Update user metadata with address information
    const { error: updateError } = await supabase.auth.updateUser({
      data: {
        address: address,
        city: city,
        state: state,
        zipCode: zipCode,
        country: country,
      },
    });

    if (updateError) {
      return {
        success: false,
        error: updateError.message,
      };
    }

    return {
      success: true,
    };
  } catch (error) {
    return {
      success: false,
      error: error instanceof Error ? error.message : "An unexpected error occurred while updating address.",
    };
  }
}
</file>

<file path="client/src/lib/context/CartContext.tsx">
'use client';

import { createContext, useContext, useState, ReactNode, SetStateAction, Dispatch } from 'react';



interface CartContextType {
	cartItems: CartItem[];
	addItem: (item: ProductType) => void;
	removeFromCart: (ProductID: ProductType['ProductID']) => void;
	clearCart: () => void;
	minisItemQuantity: (item: ProductType) => void;
	totalPrice: number;
	totalQuantity: number;
}

export const useCart = () => {
	const context = useContext(CartContext);
	if (context === undefined) {
		throw new Error('useCart must be used within a CartProvider');
	}
	return context;
};

const CartContext = createContext<CartContextType | undefined>(undefined);

export const CartProvider = ({ children }: { children: ReactNode }) => {
	const [cartItems, setCartItems] = useState<CartItem[]>([]);

	const addItem = (item: ProductType) => {
		setCartItems((prevItems) => {
			const existingItem = prevItems.find((cartItem) => cartItem.ProductID === item.ProductID);
			if (existingItem) {
				return prevItems.map((cartItem) =>
					cartItem.ProductID === item.ProductID
						? { ...cartItem, quantity: cartItem.quantity + 1 }
						: cartItem
				);
			} else {
				const newItem: CartItem = { ...item, quantity: 1 };
				return [...prevItems, newItem];
			}
		});
	};

	const removeFromCart = (ProductID: ProductType['ProductID']) => {
		const updatedItems = cartItems.filter((item) => item.ProductID !== ProductID);
		setCartItems(updatedItems);
	};

	const minisItemQuantity = (item: ProductType) => {
		setCartItems((prevItems) => {
			return prevItems.map((cartItem) =>
				cartItem.Name === item.Name ? { ...cartItem, quantity: cartItem.quantity - 1 } : cartItem
			);
		});
	};

	const clearCart = () => {
		setCartItems([]);
	};

	const totalPrice = cartItems.reduce((sum, item) => sum + item.Price * item.quantity, 0);
	const totalQuantity = cartItems.reduce((sum, item) => sum + item.quantity, 0);

	return (
		<CartContext.Provider
			value={{
				cartItems,
				totalPrice,
				totalQuantity,
				addItem,
				removeFromCart,
				minisItemQuantity,
				clearCart,
			}}>
			{children}
		</CartContext.Provider>
	);
};

// Ensure CartItem has ProductID, Name, Price, quantity, and Image properties

// Toast Context for notifications
interface ToastContextType {
	showToast: (message: string) => void;
}
const ToastContext = createContext<ToastContextType | undefined>(undefined);

export const ToastProvider = ({ children }: { children: ReactNode }) => {
	const [toast, setToast] = useState<string | null>(null);
	const showToast = (message: string) => {
		setToast(message);
		setTimeout(() => setToast(null), 2500); // 4 seconds
	};
	return (
		<ToastContext.Provider value={{ showToast }}>
			{children}
			{toast && (
				<div className='fixed bottom-8 right-8 z-50 bg-black border-2 border-yellow-500  font-bold text-lg px-6 py-3 rounded-md shadow-2xl animate-fadein min-w-[180px] text-center'>
					{toast}
				</div>
			)}
		</ToastContext.Provider>
	);
};

export const useToast = () => {
	const context = useContext(ToastContext);
	if (!context) throw new Error('useToast must be used within a ToastProvider');
	return context;
};
</file>

<file path="client/src/lib/forms/CartProductForm.tsx">
'use client';

import ProductDetails from '@/app/menu/components/ProductDetails';
import Button from '@/components/ui/Button';
import Section from '@/components/ui/layout/Section';
import { useCart } from '@/lib/context/CartContext';
import React from 'react';
import { FaMinusCircle, FaPlusCircle, FaTrashAlt } from 'react-icons/fa';

function CartProductForm() {
	const { cartItems, removeFromCart, minisItemQuantity, addItem } = useCart();

	if (!cartItems || cartItems.length === 0) {
		return (
			<div className='text-center text-white bg-black/50 p-8 rounded-md'>
				<h2
					className='text-2xl font-bold'
					style={{ filter: 'drop-shadow(0 0 3px #f0b100)' }}>
					Your Cart is Empty
				</h2>
			</div>
		);
	}

	const quantityButtonStyle =
		' text-white rounded-md bg-yellow-600 hover:bg-yellow-500 transition-colors duration-200 ease-in-out';
	const removeButtonStyle =
		'flex items-center justify-center gap-2 px-3 py-2 text-white rounded-md bg-yellow-700 hover:bg-yellow-600 transition-colors duration-200 ease-in-out font-semibold';

	return (
		<Section
			tittle='	Your Items'
			className=' p-2  max-h-[70vh] overflow-y-auto'>
			<ul className='space-y-4'>
				{cartItems.map((item) => (
					<li
						className='p-0 rounded-md border border-white/50 '
						key={item.ProductID}>
						<article className='p-4 m-0 flex flex-col md:flex-row items-center justify-between gap-4'>
							<ProductDetails item={item} />

							<div className='flex items-center justify-between gap-3 w-full md:w-auto'>
								{/* Quantity Controls */}
								<div className='flex items-center gap-2 bg-black/50 p-1 rounded-md'>
									<Button
										title='Decrease Quantity'
										onClick={() => minisItemQuantity(item)}
										className={quantityButtonStyle}>
										<FaMinusCircle />
									</Button>
									<span className='px-3 text-lg font-bold text-white'>{item.quantity}</span>
									<Button
										title='Increase Quantity'
										onClick={() => addItem(item)}
										className={quantityButtonStyle}>
										<FaPlusCircle />
									</Button>
								</div>

								{/* Remove Button */}
								<Button
									title='Remove Item'
									onClick={() => removeFromCart(item.ProductID)}
									className={removeButtonStyle}>
									<FaTrashAlt />
									<span className='hidden sm:inline'>Remove</span>
								</Button>
							</div>
						</article>
					</li>
				))}
			</ul>
		</Section>
	);
}

export default CartProductForm;
</file>

<file path="client/src/lib/forms/CommentsForm.tsx">
import { getCommentsForProduct } from '@/lib/supabase/comments';
import { redirect } from 'next/navigation';
import Section from '@/components/ui/layout/Section';
import Button from '@/components/ui/Button';

interface CommentsProps {
	ProductName: string;
}

const CommentsForm: React.FC<CommentsProps> = async ({ ProductName }) => {
       // NOTE: GetUser should be called server-side via Supabase session; placeholder for now
       // You should pass user as a prop or fetch from Supabase session
	const user: any = null; // TODO: Get authenticated user from Supabase session

       if (!user) {
	       return redirect('/login');
       }

       let comments: Array<{ id: string; user_name: string | null; created_at: string; body: string }> = [];
       try {
	       comments = (await getCommentsForProduct(ProductName)) || [];
       } catch (err) {
	       console.error('Failed to load comments', err);
       }

       return (
	       <Section>
		       <h2>Comments</h2>
		       <ul className='space-y-4'>
			       {comments.map((comment) => (
				       <li
					       key={comment.id}
					       className='border-b border-white/20 pb-4'>
					       <div className='flex items-start space-x-3'>
						       <div className='flex-shrink-0 w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center text-white font-bold'>
							       {(comment.user_name || 'U').charAt(0).toUpperCase()}
						       </div>
						       <div className='flex-1'>
							       <div className='flex justify-between items-center'>
								       <span className='font-semibold '>{comment.user_name || 'Anonymous'}</span>
								       <span className='text-xs '>{new Date(comment.created_at).toLocaleString()}</span>
							       </div>
							       <p className='mt-1'>{comment.body}</p>
							       <button className='mt-2 text-sm text-yellow-400 hover:underline'>REPLY</button>
						       </div>
					       </div>
				       </li>
			       ))}
		       </ul>
		       <div className='mt-6 flex space-x-3'>
			       <div className='flex-shrink-0 w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center text-white font-bold'>
				       {(user?.user_metadata?.displayName || user?.email || 'U').charAt(0).toUpperCase()}
			       </div>
			       <div className='flex-1'>
				       <textarea
					       className='w-full p-3 border border-white/50 rounded-md bg-black/20 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition-all duration-200'
					       placeholder={`What are your thoughts on ${ProductName}?`}
					       rows={2}></textarea>
				       <Button>Send</Button>
			       </div>
		       </div>
	       </Section>
       );
};

export default CommentsForm;
</file>

<file path="client/src/lib/forms/ContactForm.tsx">
'use client';

import { useForm } from 'react-hook-form';
import { useState } from 'react';
import { FaWhatsapp, FaEnvelope, FaPhone } from 'react-icons/fa';

type FormData = {
  name: string;
  email: string;
  phone: string;
  message: string;
};

export default function ContactForm() {
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [submitStatus, setSubmitStatus] = useState<{ success: boolean; message: string } | null>(null);

  const { register, handleSubmit, formState: { errors }, reset } = useForm<FormData>({
  });

  const onSubmit = async (data: FormData) => {
    setIsSubmitting(true);
    try {
      // Here you would typically send the form data to your API
      console.log('Form submitted:', data);

      // For demo, we'll simulate an API call
      await new Promise(resolve => setTimeout(resolve, 1000));

      setSubmitStatus({
        success: true,
        message: 'Your message has been sent successfully! We\'ll get back to you soon.'
      });
      reset();
    } catch (error) {
      setSubmitStatus({
        success: false,
        message: 'Failed to send message. Please try again later.'
      });
    } finally {
      setIsSubmitting(false);
    }
  };

  const openWhatsApp = () => {
    const phoneNumber = '1234567890'; // Replace with your WhatsApp number
    const message = 'Hello, I have a question about your services.';
    window.open(`https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`, '_blank');
  };

  return (
    <div className="max-w-4xl mx-auto p-6 bg-white/10 backdrop-blur-md rounded-lg shadow-lg">
      <h2 className="text-3xl font-bold mb-6 text-center text-white">Contact Us</h2>

      <div className="grid md:grid-cols-2 gap-8">
        <div>
          <h3 className="text-xl font-semibold mb-4 text-white">Get in Touch</h3>
          <p className="mb-6 text-gray-200">
            Have questions or feedback? We'd love to hear from you. Fill out the form or reach out directly.
          </p>

          <div className="space-y-4">
            <div className="flex items-center space-x-3">
              <FaPhone className="text-yellow-500/95 text-xl" />
              <span className="text-white">+1 (555) 123-4567</span>
            </div>
            <div className="flex items-center space-x-3">
              <FaEnvelope className="text-yellow-500/95 text-xl" />
              <span className="text-white">info@centraleatery.com</span>
            </div>
            <button
              onClick={openWhatsApp}
              className="flex items-center space-x-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md transition-colors"
            >
              <FaWhatsapp className="text-xl" />
              <span>Chat on WhatsApp</span>
            </button>
          </div>
        </div>

        <form onSubmit={handleSubmit(onSubmit)} className="space-y-4">
          {submitStatus && (
            <div className={`p-4 rounded-md ${submitStatus.success ? 'bg-green-500/20' : 'bg-yellow-500/20'}`}>
              <p className={submitStatus.success ? 'text-green-200' : 'text-yellow-200'}>
                {submitStatus.message}
              </p>
            </div>
          )}

          <div>
            <label htmlFor="name" className="block text-sm font-medium text-white mb-1">Name</label>
            <input
              id="name"
              type="text"
              {...register('name')}
              className="w-full px-4 py-2 rounded-md bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500/50"
              placeholder="Your name"
            />
            {errors.name && <p className="mt-1 text-sm text-yellow-300">{errors.name.message}</p>}
          </div>

          <div>
            <label htmlFor="email" className="block text-sm font-medium text-white mb-1">Email</label>
            <input
              id="email"
              type="email"
              {...register('email')}
              className="w-full px-4 py-2 rounded-md bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500/50"
              placeholder="your.email@example.com"
            />
            {errors.email && <p className="mt-1 text-sm text-yellow-300">{errors.email.message}</p>}
          </div>

          <div>
            <label htmlFor="phone" className="block text-sm font-medium text-white mb-1">Phone</label>
            <input
              id="phone"
              type="tel"
              {...register('phone')}
              className="w-full px-4 py-2 rounded-md bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500/50"
              placeholder="+1 (555) 123-4567"
            />
            {errors.phone && <p className="mt-1 text-sm text-yellow-300">{errors.phone.message}</p>}
          </div>

          <div>
            <label htmlFor="message" className="block text-sm font-medium text-white mb-1">Message</label>
            <textarea
              id="message"
              rows={4}
              {...register('message')}
              className="w-full px-4 py-2 rounded-md bg-white/10 border border-white/20 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-500/50"
              placeholder="Your message..."
            />
            {errors.message && <p className="mt-1 text-sm text-yellow-300">{errors.message.message}</p>}
          </div>

          <button
            type="submit"
            disabled={isSubmitting}
            className="w-full bg-yellow-500/95 hover:bg-yellow-600 text-white font-medium py-2 px-4 rounded-md transition-colors disabled:opacity-70 disabled:cursor-not-allowed"
          >
            {isSubmitting ? 'Sending...' : 'Send Message'}
          </button>
        </form>
      </div>
    </div>
  );
}
</file>

<file path="client/src/lib/forms/EditProfileForm.tsx">
'use client';

import React, { useState, useEffect } from 'react';
import { useRouter } from 'next/navigation';
import { useActionState } from 'react';
import { FaSave, FaTimes } from 'react-icons/fa';
import TextInput from '@/components/ui/TextInput';
import Button from '@/components/ui/Button';
import Avatar from '@/components/ui/Avatar';
import Loading from '@/components/ui/Loading';
import { useAuth } from '@/lib/supabase/auth/useAuth';
import { updateProfileAction } from '@/lib/actions/profile';

import Section from '@/components/ui/layout/Section';

const EditProfileForm: React.FC = () => {
    const { user, loading } = useAuth();
    const router = useRouter();
    const [state, formAction, isPending] = useActionState(updateProfileAction, null);

    // State for form fields
    const [displayName, setDisplayName] = useState('');
    const [phoneNumber, setPhoneNumber] = useState('');
    const [photoURL, setPhotoURL] = useState('');

    // Validation states
    const [displayNameError, setDisplayNameError] = useState(false);
    const [phoneNumberError, setPhoneNumberError] = useState(false);

    // Effect to initialize form fields when user data loads or changes
    useEffect(() => {
        if (user) {
            setDisplayName(user.user_metadata?.displayName || '');
            setPhoneNumber(user.user_metadata?.phoneNumber || '');
            setPhotoURL(user.user_metadata?.photoURL || '');
        }
    }, [user]);

    // Handle redirection if user is not logged in after loading
    useEffect(() => {
        if (!loading && !user) {
            router.replace('/login');
        }
    }, [user, loading, router]);

    // Redirect on success
    useEffect(() => {
        if (state?.success) {
            router.push('/profile');
        }
    }, [state?.success, router]);

    // Show loading state while user data is being fetched by context
    if (loading) {
        return <Loading message='Loading profile data...' />;
    }

    // If user is null after loading, it means redirection is happening
    if (!user) {
        return null;
    }

    const validateForm = () => {
        let isValid = true;

        if (!displayName.trim()) {
            setDisplayNameError(true);
            isValid = false;
        } else {
            setDisplayNameError(false);
        }

        // Basic phone number validation
        if (phoneNumber.trim() && !/^\+?[0-9\s-()]{7,20}$/.test(phoneNumber.trim())) {
            setPhoneNumberError(true);
            isValid = false;
        } else {
            setPhoneNumberError(false);
        }

        return isValid;
    };

    const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
        if (!validateForm()) {
            e.preventDefault();
            return;
        }
    };

    const handleCancel = () => {
        router.back();
    };

    return (
        <Section className="bg-white/10 backdrop-blur-md">
            <div className='flex flex-col items-center mb-8'>
                <Avatar
                    src={photoURL || user.user_metadata?.photoURL || ''}
                    alt={displayName || user.user_metadata?.displayName || user.email || 'User'}
                    size='large'
                    className='mb-4 shadow-md'
                />
                <h2 className='text-yellow-500 text-3xl font-bold mb-2'>Edit Personal Information</h2>
                <p className='text-yellow-500 text-lg'>Update your profile details below.</p>
            </div>

            {state?.error && (
                <div className='text-yellow-500 mb-4 bg-yellow-900/20 p-3 rounded-md'>{state.error}</div>
            )}
            {state?.success && (
                <div className='text-white mb-4 bg-green-900/20 p-3 rounded-md'>Profile updated successfully!</div>
            )}

            <form
                action={formAction}
                onSubmit={handleSubmit}
                className='space-y-6'>
                {/* Display Name */}
                <div>
                    <TextInput
                        type='text'
                        label='Display Name'
                        name='displayName'
                        placeholder='Your Name'
                        value={displayName}
                        onChange={(e) => {
                            setDisplayName(e.target.value);
                            setDisplayNameError(false);
                        }}
                        variant={displayNameError ? 'error' : 'default'}
                        required
                    />
                    {displayNameError && (
                        <p className='text-yellow-500 text-sm mt-1'>Display Name is required.</p>
                    )}
                </div>

                {/* Email (Read-only) */}
                <div>
                    <TextInput
                        type='email'
                        label='Email (Cannot be changed here)'
                        value={user.email || ''}
                        disabled
                        className='cursor-not-allowed bg-black/50'
                    />
                    <p className='text-sm mt-1'>
                        To change your email, please visit your account settings or contact support.
                    </p>
                </div>

                {/* Phone Number */}
                <div>
                    <TextInput
                        type='tel'
                        label='Phone Number'
                        name='phoneNumber'
                        placeholder='e.g., +27 12 345 6789'
                        value={phoneNumber}
                        onChange={(e) => {
                            setPhoneNumber(e.target.value);
                            setPhoneNumberError(false);
                        }}
                        variant={phoneNumberError ? 'error' : 'default'}
                    />
                    {phoneNumberError && (
                        <p className='text-yellow-500 text-sm mt-1'>
                            Please enter a valid phone number (optional).
                        </p>
                    )}
                </div>

                {/* Photo URL */}
                <div>
                    <TextInput
                        type='url'
                        label='Profile Photo URL'
                        name='photoURL'
                        placeholder='https://example.com/your-photo.jpg'
                        value={photoURL}
                        onChange={(e) => setPhotoURL(e.target.value)}
                    />
                    <p className='text-sm mt-1'>Enter a direct link to your profile picture.</p>
                </div>

                {/* Action Buttons */}
                <div className='flex flex-col sm:flex-row gap-4 justify-end pt-4'>
                    <Button
                        type='button'
                        onClick={handleCancel}
                        variant='secondary'
                        size='md'
                        className='w-full sm:w-auto'>
                        <FaTimes className='mr-2' /> Cancel
                    </Button>
                    <Button
                        type='submit'
                        variant='primary'
                        size='md'
                        loading={isPending}
                        disabled={isPending}
                        className='w-full sm:w-auto'>
                        <FaSave className='mr-2' /> {isPending ? 'Saving...' : 'Save Changes'}
                    </Button>
                </div>
            </form>
        </Section>
    );
};

export default EditProfileForm;
</file>

<file path="client/src/lib/forms/LoginForm.tsx">
'use client';

import { useActionState } from 'react';
import { signInAction } from '@/lib/actions/auth';
import Loading from '@/components/ui/Loading';

import Button from '@/components/ui/Button';
import TextInput from '@/components/ui/TextInput';
import AppLink from '@/components/ui/Link';
import Section from '@/components/ui/layout/Section';

export default function LoginForm() {
    const [state, formAction, isPending] = useActionState(signInAction, null);

    if (isPending) {
        return <Loading message="Signing in..." />;
    }

    return (
        <Section className="bg-white/10 backdrop-blur-md">
            {state?.error && (
                <div className='text-yellow-500 mb-4 mt-4 bg-yellow-900/20 p-3 rounded-md'>{state.error}</div>
            )}
            <form
                action={formAction}
                className='space-y-6 mt-6'>
                <TextInput
                    label='Email:'
                    type='email'
                    id='email'
                    name='email'
                    required
                />
                <TextInput
                    label='Password:'
                    type='password'
                    id='password'
                    name='password'
                    required
                />
                <Button
                    type='submit'
                    variant='primary'
                    className='w-full'
                    size='lg'
                    loading={isPending}>
                    Sign In
                </Button>
            </form>
            <p className='mt-6 text-white/70'>
                Don&apos;t have an account? <AppLink href='/register'>Sign Up</AppLink>
            </p>
        </Section>
    );
}
</file>

<file path="client/src/lib/forms/RegisterForm.tsx">
'use client';

import { useActionState } from 'react';
import { signUpAction } from '@/lib/actions/auth';
import Loading from '@/components/ui/Loading';
import Button from '@/components/ui/Button';
import TextInput from '@/components/ui/TextInput';
import AppLink from '@/components/ui/Link';
import Section from '@/components/ui/layout/Section';

const RegisterForm = () => {
    const [state, formAction, isPending] = useActionState(signUpAction, null);

    if (isPending) {
        return <Loading message="Registering..." />;
    }

    return (
        <Section className="bg-white/10 backdrop-blur-md">
            {state?.error && (
                <div className='text-yellow-500 mb-4 mt-4 bg-yellow-900/20 p-3 rounded-md'>{state.error}</div>
            )}
            <form
                action={formAction}
                className='space-y-6 mt-6'>
                <TextInput
                    label='Email'
                    id='email'
                    name='email'
                    type='email'
                    placeholder='Email'
                    required
                />
                <TextInput
                    label='Display Name'
                    id='displayName'
                    name='displayName'
                    type='text'
                    placeholder='Display Name'
                    required
                />
                <TextInput
                    label='Phone Number'
                    id='phoneNumber'
                    name='phoneNumber'
                    type='tel'
                    placeholder='Phone Number'
                    required
                />
                <TextInput
                    label='Password'
                    id='password'
                    name='password'
                    type='password'
                    placeholder='******************'
                    required
                />
                <Button
                    type='submit'
                    variant='primary'
                    className='w-full'
                    size='lg'
                    loading={isPending}>
                    Register
                </Button>
            </form>
            <p className='text-center text-sm mt-6 text-white/70'>
                Already have an account? <AppLink href='/login'>Login</AppLink>
            </p>
        </Section>
    );
};

export default RegisterForm;
</file>

<file path="client/src/lib/forms/UserAddressForm.tsx">
'use client';

import React, { useState, useEffect } from 'react';
import { useActionState } from 'react';
import TextInput from '@/components/ui/TextInput';
import Button from '@/components/ui/Button';
import { FaMapMarkerAlt, FaSave } from 'react-icons/fa';
import { TbAccessPoint } from 'react-icons/tb';
import Loading from '@/components/ui/Loading';
import { useAuth } from '@/lib/supabase/auth/useAuth';
import { updateAddressAction } from '@/lib/actions/profile';

const UserAddressForm: React.FC = () => {
	const { user, loading } = useAuth();
	const [showAddressInput, setShowAddressInput] = useState(false);
	const [state, formAction, isPending] = useActionState(updateAddressAction, null);

	const [addressData, setAddressData] = useState({
		address: '',
		city: 'Phalaborwa',
		state: 'Limpopo',
		zipCode: '1392',
		country: 'South Africa',
	});

	const [errors, setErrors] = useState({
		address: false,
		city: false,
		state: false,
		zipCode: false,
		country: false,
	});

	useEffect(() => {
		if (user) {
			setAddressData({
				address: user.user_metadata?.address || '',
				city: user.user_metadata?.city || 'Phalaborwa',
				state: user.user_metadata?.state || 'Limpopo',
				zipCode: user.user_metadata?.zipCode || '1392',
				country: user.user_metadata?.country || 'South Africa',
			});
		}
	}, [user]);

	// Close form on successful save
	useEffect(() => {
		if (state?.success) {
			setShowAddressInput(false);
		}
	}, [state?.success]);

	const validateFields = () => {
		const newErrors = {
			address: !addressData.address.trim(),
			city: !addressData.city.trim(),
			state: !addressData.state.trim(),
			zipCode: !addressData.zipCode.trim(),
			country: !addressData.country.trim(),
		};
		setErrors(newErrors);
		return !Object.values(newErrors).some(Boolean);
	};

	const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {
		if (!validateFields() || !user?.id) {
			e.preventDefault();
			return;
		}
	};

	const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
		const { name, value } = e.target;
		setAddressData((prev) => ({ ...prev, [name]: value }));
		setErrors((prev) => ({ ...prev, [name]: false }));
	};

	if (loading) return <Loading />;
	if (!user) return null;

	const fullAddress = `${user.user_metadata?.address || ''}, ${user.user_metadata?.city || ''}, ${user.user_metadata?.state || ''}, ${user.user_metadata?.zipCode || ''}, ${user.user_metadata?.country || ''}`;

	       return (
		       <article>
			       <h3 className='flex items-center gap-2 text-xl font-bold mb-3'>
				       <FaMapMarkerAlt /> Shipping Address
			       </h3>

			       {user.user_metadata?.address && !showAddressInput ? <p className='text-white'>{fullAddress}</p> : null}

			{showAddressInput ? (
				<div className='mt-4 flex flex-col gap-3'>
					{state?.error && (
						<div className='text-yellow-500 mb-2 bg-yellow-900/20 p-2 rounded-md text-sm'>{state.error}</div>
					)}
					{state?.success && (
						<div className='text-white mb-2 bg-green-900/20 p-2 rounded-md text-sm'>Address saved successfully!</div>
					)}
					<form action={formAction} onSubmit={handleSubmit} className='flex flex-col gap-3'>
						<TextInput
							type='text'
							name='address'
							placeholder='e.g., 123 Main St, Apt 4B'
							label='Street Address'
							value={addressData.address}
							onChange={handleInputChange}
							className={errors.address ? 'border-yellow-500 ring-yellow-500' : ''}
							required
						/>
						{errors.address && <p className='text-white text-sm mt-1'>Street address is required.</p>}

						<TextInput
							type='text'
							name='city'
							placeholder='e.g., Phalaborwa'
							label='City'
							value={addressData.city}
							onChange={handleInputChange}
							className={errors.city ? 'border-yellow-500 ring-yellow-500' : ''}
							required
						/>
						{errors.city && <p className='text-white text-sm mt-1'>City is required.</p>}

						<TextInput
							type='text'
							name='state'
							placeholder='e.g., Limpopo'
							label='State'
							value={addressData.state}
							onChange={handleInputChange}
							className={errors.state ? 'border-yellow-500 ring-yellow-500' : ''}
							required
						/>
						{errors.state && <p className='text-white text-sm mt-1'>State is required.</p>}

						<div className='flex gap-2'>
							<TextInput
								type='text'
								name='zipCode'
								placeholder='e.g., 1390'
								label='Zip Code'
								value={addressData.zipCode}
								onChange={handleInputChange}
								className={`flex-grow ${errors.zipCode ? 'border-yellow-500 ring-yellow-500' : ''}`}
								required
							/>
							<TextInput
								type='text'
								name='country'
								placeholder='e.g., South Africa'
								label='Country'
								value={addressData.country}
								onChange={handleInputChange}
								className={`flex-grow ${errors.country ? 'border-yellow-500 ring-yellow-500' : ''}`}
								required
							/>
						</div>
						{(errors.zipCode || errors.country) && (
							<p className='text-white text-sm mt-1'>
								{errors.zipCode && 'Zip code is required.'}
								{errors.zipCode && errors.country && ' '}
								{errors.country && 'Country is required.'}
							</p>
						)}

						<Button
							type='submit'
							loading={isPending}
							disabled={isPending}
							className='h-10 px-4 py-2 inline-flex items-center justify-center gap-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-white transition duration-200 mt-2'>
							<FaSave /> Save Address
						</Button>
					</form>
				</div>
			) : (
				       <button
					       onClick={() => setShowAddressInput(true)}
					       className='inline-flex items-center gap-2 px-4 py-2 bg-black/50 text-white rounded-md hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-50 transition duration-200'>
					       <TbAccessPoint /> {user.user_metadata?.address ? 'Edit Address' : 'Add Address'}
				       </button>
			)}
		</article>
	);
};

export default UserAddressForm;
</file>

<file path="client/src/lib/hooks/Cookies/getdelete.ts">
'use server'
import { cookies } from "next/headers"
import type { CookieName } from "./setCookie"

export default async function getCookie(Name: CookieName,) {
  try {
    const cookieStore = await cookies()
    return cookieStore.get(Name)?.value
  } catch (error) {
    console.error(`Error setting cookie ${Name}:`, error);
    throw new Error("Authentication failed");
  }
}
</file>

<file path="client/src/lib/hooks/Cookies/setCookie.ts">
'use server'
import { cookies } from "next/headers"
const COOKIE_EXPIRY = 60 * 60 * 24 * 5;
export type CookieName = "userId" | "userRole"

export default async function setCookie(Name: CookieName, Value: string) {
  try {
    const cookieStore = await cookies()
    cookieStore.set(Name, Value, {
      httpOnly: true,
      secure: process.env.NODE_ENV === 'production',
      sameSite: 'lax',
      maxAge: COOKIE_EXPIRY,
      path: '/'
    })

    // Verify the cookie was set
    const verifyValue = cookieStore.get(Name)?.value;
    if (verifyValue !== Value) {
      console.error(`Failed to set cookie ${Name}. Expected: ${Value}, Got: ${verifyValue}`);
      throw new Error("Failed to set cookie");
    }

    return true;
  } catch (error) {
    console.error(`Error setting cookie ${Name}:`, error);
    throw new Error("Authentication failed");
  }
}
</file>

<file path="client/src/lib/hooks/Cookies/setdelete.ts">
'use server'
import { cookies } from "next/headers"
import type { CookieName } from "./setCookie"

export default async function deleteCookie(Name: CookieName,) {
  try {
    const cookieStore = await cookies()
    cookieStore.delete(Name)

  } catch (error) {
    console.error(`Error setting cookie ${Name}:`, error);
    throw new Error("Authentication failed");
  }
}
</file>

<file path="client/src/lib/supabase/auth/logout.ts">
import { createClient } from '@/lib/supabase/client';

export const logout = async () => {
  const supabase = createClient();

  const { error } = await supabase.auth.signOut();

  if (error) {
    throw new Error(error.message);
  }
};
</file>

<file path="client/src/lib/supabase/auth/useAuth.ts">
'use client';

import { useEffect, useState } from 'react';
import { createClient } from '@/lib/supabase/client';
import type { User } from '@supabase/supabase-js';

export const useAuth = () => {
  const [user, setUser] = useState<User | null>(null);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const supabase = createClient();

    // Get initial session
    const getSession = async () => {
      const {
        data: { session },
      } = await supabase.auth.getSession();
      setUser(session?.user ?? null);
      setLoading(false);
    };

    getSession();

    // Subscribe to auth changes
    const { data: authListener } = supabase.auth.onAuthStateChange((event, session) => {
      setUser(session?.user ?? null);
      setLoading(false);
    });

    return () => {
      authListener?.subscription.unsubscribe();
    };
  }, []);

  return { user, loading };
};
</file>

<file path="client/src/lib/supabase/orders/orders.ts">
import { createClient } from '@/lib/supabase/client';

export interface Order {
  id: string;
  user_id: string;
  items: CartItem[];
  total_price: number;
  total_quantity: number;
  status: 'pending' | 'processing' | 'completed' | 'cancelled';
  created_at: string;
  updated_at: string;
}

export const addOrder = async (
  userId: string,
  items: CartItem[],
  totalPrice: number,
  totalQuantity: number
) => {
  const supabase = createClient();

  const { data, error } = await supabase
    .from('orders')
    // @ts-ignore - Supabase type inference issue with Database types
    .insert({
      user_id: userId,
      items,
      total_price: totalPrice,
      total_quantity: totalQuantity,
      status: 'pending',
    })
    .select()
    .single();

  if (error) {
    console.error('Error creating order:', error);
    throw new Error(error.message);
  }

  return data as Order;
};

export const getOrdersByUser = async (userId: string) => {
  const supabase = createClient();

  const { data, error } = await supabase
    .from('orders')
    .select('*')
    .eq('user_id', userId)
    .order('created_at', { ascending: false });

  if (error) {
    console.error('Error fetching orders:', error);
    return [];
  }

  return (data as Order[]) || [];
};

export const getOrdersByStatus = async (userId: string, status: string) => {
  const supabase = createClient();

  const { data, error } = await supabase
    .from('orders')
    .select('*')
    .eq('user_id', userId)
    .eq('status', status)
    .order('created_at', { ascending: false });

  if (error) {
    console.error('Error fetching orders:', error);
    return [];
  }

  return (data as Order[]) || [];
};

export const updateOrderStatus = async (orderId: string, status: string) => {
  const supabase = createClient();

  const { data, error } = await supabase
    .from('orders')
    // @ts-ignore - Supabase type inference issue with Database types
    .update({ status, updated_at: new Date().toISOString() })
    .eq('id', orderId)
    .select()
    .single();

  if (error) {
    console.error('Error updating order:', error);
    throw new Error(error.message);
  }

  return data as Order;
};
</file>

<file path="client/src/lib/supabase/products/products.ts">
import { createClient } from '@/lib/supabase/client';

export interface Product {
  id: string;
  name: string;
  description: string;
  price: number;
  category: string;
  image_url: string;
  stock: number;
  created_at: string;
}

export const getProducts = async () => {
  const supabase = createClient();

  const { data, error } = await supabase.from('products').select('*');

  if (error) {
    console.error('Error fetching products:', error);
    return [];
  }

  return (data as Product[]) || [];
};

export const getProductsByCategory = async (category: string) => {
  const supabase = createClient();

  const { data, error } = await supabase
    .from('products')
    .select('*')
    .eq('category', category);

  if (error) {
    console.error('Error fetching products by category:', error);
    return [];
  }

  return (data as Product[]) || [];
};

export const getProductById = async (id: string) => {
  const supabase = createClient();

  const { data, error } = await supabase.from('products').select('*').eq('id', id).single();

  if (error) {
    console.error('Error fetching product:', error);
    return null;
  }

  return (data as Product) || null;
};
</file>

<file path="client/src/lib/supabase/client.ts">
import { createBrowserClient } from '@supabase/ssr';
import { Database } from '@/lib/database.types';

export function createClient() {
  return createBrowserClient<Database>(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY!
  );
}
</file>

<file path="client/src/lib/supabase/comments.ts">
import { createClient } from './client';

const supabaseBrowser = createClient();

export const getCommentsForProduct = async (productId: string) => {
  const { data, error } = await supabaseBrowser
    .from('comments')
    .select('*')
    .eq('product_id', productId)
    .order('created_at', { ascending: false });
  if (error) throw error;
  return data;
};

export const addComment = async (productId: string, userId: string | null, userName: string | null, body: string) => {
  const { data, error } = await supabaseBrowser
    .from('comments')
    // @ts-ignore - Supabase type inference issue with Database types
    .insert([{ product_id: productId, user_id: userId, user_name: userName, body }])
    .select()
    .single();
  if (error) throw error;
  return data;
};
</file>

<file path="client/src/lib/supabase/favorites.ts">
import { createClient } from './client';

const supabaseBrowser = createClient();

export const getUserFavorites = async (userId: string) => {
  const { data, error } = await supabaseBrowser
    .from('user_favorites')
    .select('product_id')
    .eq('user_id', userId);
  if (error) throw error;
  return data?.map((r: any) => r.product_id) ?? [];
};

export const toggleFavorite = async (userId: string, productId: string) => {
  // Try insert; if conflict, delete
  const { error: insertErr } = await supabaseBrowser
    .from('user_favorites')
    // @ts-ignore - Supabase type inference issue with Database types
    .insert([{ user_id: userId, product_id: productId }]);
  if (!insertErr) return { added: true };
  // If insert failed because exists, remove
  const { data, error } = await supabaseBrowser
    .from('user_favorites')
    .delete()
    .match({ user_id: userId, product_id: productId });
  if (error) throw error;
  return { added: false };
};
</file>

<file path="client/src/lib/supabase/likes.ts">
import { createClient } from './client';

const supabaseBrowser = createClient();

export const getLikeCount = async (productId: string) => {
  const { data, error } = await supabaseBrowser
    .from('products')
    .select('likes')
    .eq('id', productId)
    .single();
  if (error) throw error;
  // @ts-ignore - Supabase type inference issue with Database types
  return data?.likes ?? 0;
};

export const toggleLike = async (productId: string, increment: number = 1) => {
  // increment is +1 or -1. Read current likes then update atomically via a transaction-like approach.
  const { data: current, error: fetchErr } = await supabaseBrowser
    .from('products')
    .select('likes')
    .eq('id', productId)
    .single();
  if (fetchErr) throw fetchErr;
  // @ts-ignore - Supabase type inference issue with Database types
  const currentLikes = (current?.likes ?? 0) + increment;
  const { data, error } = await supabaseBrowser
    .from('products')
    // @ts-ignore - Supabase type inference issue with Database types
    .update({ likes: currentLikes })
    .eq('id', productId)
    .select()
    .single();
  if (error) throw error;
  return data;
};
</file>

<file path="client/src/lib/supabase/orders.ts">
import { createClient } from './client';

const supabaseBrowser = createClient();

export const addOrder = async (userId: string | null, items: any[], totalPrice: number, totalQuantity: number) => {
  const payload = {
    user_id: userId,
    items,
    total_price: totalPrice,
    total_quantity: totalQuantity,
  };
  const { data, error } = await supabaseBrowser
    .from('orders')
    // @ts-ignore - Supabase type inference issue with Database types
    .insert([payload])
    .select()
    .single();
  if (error) throw error;
  return data;
};

export const getOrdersByUser = async (userId: string) => {
  const { data, error } = await supabaseBrowser
    .from('orders')
    .select('*')
    .eq('user_id', userId)
    .order('created_at', { ascending: false });
  if (error) throw error;
  return data;
};
</file>

<file path="client/src/lib/supabase/server.ts">
import { createServerClient } from '@supabase/ssr';
import { cookies } from 'next/headers';
import { Database } from '@/lib/database.types';

import { SupabaseClient } from '@supabase/supabase-js';

export async function createClient(): Promise<SupabaseClient<Database>> {
  const cookieStore = await cookies();

  return createServerClient<Database>(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY!,
    {
      cookies: {
        getAll() {
          return cookieStore.getAll();
        },
        setAll(cookiesToSet) {
          try {
            cookiesToSet.forEach(({ name, value }) => cookieStore.set(name, value));
          } catch {
            // The `setAll` method was called from a Server Component.
            // This can be ignored if you have middleware refreshing
            // user sessions.
          }
        },
      },
    }
  );
}
</file>

<file path="client/src/lib/types/CarWashTypes.d.ts">
declare global {
  interface BookingFormData {
    service: string;
    addOns: string[];
    date: string;
    time: string;
    worker: string;
  }

  interface TimeSlotPickerProps {
    selectedDate: string;
    selectedService: string;
    onSelectTime: (time: string) => void;
  }

  interface CarWashBooking {
    id: string;
    userId: string;
    service: string;
    date: Date;
    time: string;
    worker: string;
    status: 'pending' | 'confirmed' | 'cancelled' | 'completed' | 'deleted';
    createdAt: Date;
    addOns?: string[];
    vehicleDetails?: string;
    isFree?: boolean;
  }

  type BookingStatus = 'pending' | 'loading' | 'success' | 'error';
}
export { };
</file>

<file path="client/src/lib/types/index.ts">
export interface Reward {
  name: string;
  pointsrequired: number;
}
export type paymentMethod = "instore" | "Cepitec transfer";

export interface yellowemption {
  name: string;
  date: string;
}
</file>

<file path="client/src/lib/types/OrderTypes.d.ts">
declare global {

  interface OrderDetails {
    userId: string;
    items: CartItem[];
    totalAmount: number;
    shippingAddress: string;
    paymentMethod: paymentMethod;
  }
 
  interface OrderItem {
    name: string;
    quantity: number;
  }

  type CartItem = ProductType & {
    quantity: number;
  };

  interface Order {
    orderId: string;
    userId?: string;
    orderDate: Date;
    products: CartItem[];
    quantity: number;
    totalAmount: number;
    status: 'pending' | 'processing' | 'completed' | 'cancelled';
    type: 'Takeaway' | 'Photo boot' | 'Laundry';
    location?: string;
    paymentMethod?: paymentMethod;
    deliveryAddress?: string;
    shippingAddress?: string;
  }
}
export { };
</file>

<file path="client/src/lib/types/ProductTypes.d.ts">
declare global {
  interface nutritionalInfo {
    calories: number;
    protein: string;
    carbs: string;
    fat: string;
    fiber: string;
    sugar: string;
  }

  interface ProductType {
    ProductID: string;
    Name: string;
    Description: string[];
    Price: number;
    Image?: string;
    badge?: string;
    rating?: number;
    nutritional?: nutritionalInfo;
    allergens?: string[];
    isVegetarian?: boolean;
    isSpicy?: boolean;
  }

  type ProductsType = {
    id: number;
    Name: string;
    Products: ProductType[];
    Image?: string;
    Description?: string;
  }[];
}
export { };
</file>

<file path="client/src/lib/types/UserTypes.d.ts">
import { Reward, yellowemption, paymentMethod } from './index';
declare global {
  type UserRole =
    | 'coFounder'
    | 'Ceo'
    | 'Manager'
    | 'kitchenStaff'
    | 'carWashStaff'
    | 'Cashier'
    | 'Customer'
    | 'admin';

  interface UserPreferences {
    dietaryRestrictions: string[];
    favoriteItems: string[];
    preferyellowCarWashServices: string[];
    preferyellowPaymentMethod: paymentMethod
    communicationPreferences: {
      email: boolean;
      sms: boolean;
      promotions: boolean;
    };
  }

  interface UserProfile {
    uid: string;
    displayName: string | null;
    email: string | null;
    emailVerified: boolean;
    photoURL: string | null;
    phoneNumber: string | null;
    role: UserRole;
    address: string;
    city: string;
    state: string;
    zipCode: string;
    country: string;
    theme: 'system' | 'light' | 'dark';
    orderHistory: Order[];
    loyaltyPointsBalance?: number;
    tierStatus: string;
    rewardsAvailable: Reward[];
    yellowemptionHistory: yellowemption[];
    personalizedPromotions: string[];
    referralCode: string;
    carWashCount?: number;
    preferences: UserPreferences;
    savedPaymentMethods?: PaymentMethod[];
    createdAt: Date;
    updatedAt: Date;
    lastLogin?: Date;
  }
}
export { };
</file>

<file path="client/src/lib/utils/dateUtils.ts">
export const formatDate = (date: Date | string): string => {
  const dateObj = date instanceof Date ? date : new Date(date);
  return dateObj.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  });
};

export const generateTimeSlots = (start = 9, end = 17, interval = 60): string[] => {
  const slots: string[] = [];
  for (let hour = start; hour < end; hour++) {
    slots.push(
      `${hour.toString().padStart(2, '0')}:00`
    );
  }
  return slots;
};

export const isDateInPast = (date: Date | string): boolean => {
  const today = new Date();
  today.setHours(0, 0, 0, 0);
  const compayellowate = new Date(date);
  compayellowate.setHours(0, 0, 0, 0);
  return compayellowate < today;
};
</file>

<file path="client/src/lib/database.types.ts">
export type Json = any

export type Database = {
  public: {
    Tables: {
      profiles: {
        Row: {
          id: string
          email: string | null
          display_name: string | null
          full_name: string | null
          phone: string | null
          role: string | null
          metadata: Json | null
          created_at: string
          uid: string | null
          email_verified: boolean | null
          photo_url: string | null
          address: string | null
          city: string | null
          state: string | null
          zip_code: string | null
          country: string | null
          theme: string | null
          order_history: Json | null
          loyalty_points_balance: number | null
          tier_status: string | null
          rewards_available: Json | null
          yellowemption_history: Json | null
          personalized_promotions: Json | null
          referral_code: string | null
          car_wash_count: number | null
          preferences: Json | null
          saved_payment_methods: Json | null
          updated_at: string | null
          last_login: string | null
        }
        Insert: {
          id?: string
          email?: string | null
          display_name?: string | null
          full_name?: string | null
          phone?: string | null
          role?: string | null
          metadata?: Json | null
          created_at?: string
          uid?: string | null
          email_verified?: boolean | null
          photo_url?: string | null
          address?: string | null
          city?: string | null
          state?: string | null
          zip_code?: string | null
          country?: string | null
          theme?: string | null
          order_history?: Json | null
          loyalty_points_balance?: number | null
          tier_status?: string | null
          rewards_available?: Json | null
          yellowemption_history?: Json | null
          personalized_promotions?: Json | null
          referral_code?: string | null
          car_wash_count?: number | null
          preferences?: Json | null
          saved_payment_methods?: Json | null
          updated_at?: string | null
          last_login?: string | null
        }
        Update: {
          id?: string
          email?: string | null
          display_name?: string | null
          full_name?: string | null
          phone?: string | null
          role?: string | null
          metadata?: Json | null
          created_at?: string
          uid?: string | null
          email_verified?: boolean | null
          photo_url?: string | null
          address?: string | null
          city?: string | null
          state?: string | null
          zip_code?: string | null
          country?: string | null
          theme?: string | null
          order_history?: Json | null
          loyalty_points_balance?: number | null
          tier_status?: string | null
          rewards_available?: Json | null
          yellowemption_history?: Json | null
          personalized_promotions?: Json | null
          referral_code?: string | null
          car_wash_count?: number | null
          preferences?: Json | null
          saved_payment_methods?: Json | null
          updated_at?: string | null
          last_login?: string | null
        }
        Relationships: []
      }
      products: {
        Row: {
          id: string
          name: string
          slug: string | null
          description: string | null
          price: number | null
          category: string | null
          image_url: string | null
          stock: number | null
          likes: number | null
          liked_by: Json | null
          badge: string | null
          created_at: string
        }
        Insert: {
          id?: string
          name: string
          slug?: string | null
          description?: string | null
          price?: number | null
          category?: string | null
          image_url?: string | null
          stock?: number | null
          likes?: number | null
          liked_by?: Json | null
          badge?: string | null
          created_at?: string
        }
        Update: {
          id?: string
          name?: string
          slug?: string | null
          description?: string | null
          price?: number | null
          category?: string | null
          image_url?: string | null
          stock?: number | null
          likes?: number | null
          liked_by?: Json | null
          badge?: string | null
          created_at?: string
        }
      }
      comments: {
        Row: {
          id: string
          product_id: string | null
          user_id: string | null
          user_name: string | null
          body: string
          created_at: string
        }
        Insert: {
          id?: string
          product_id?: string | null
          user_id?: string | null
          user_name?: string | null
          body: string
          created_at?: string
        }
        Update: {
          id?: string
          product_id?: string | null
          user_id?: string | null
          user_name?: string | null
          body?: string
          created_at?: string
        }
      }
      orders: {
        Row: {
          id: string
          user_id: string | null
          items: Json
          total_price: number
          total_quantity: number
          status: string | null
          created_at: string
          updated_at: string | null
        }
        Insert: {
          id?: string
          user_id?: string | null
          items: Json
          total_price: number
          total_quantity: number
          status?: string | null
          created_at?: string
          updated_at?: string | null
        }
        Update: {
          id?: string
          user_id?: string | null
          items?: Json
          total_price?: number
          total_quantity?: number
          status?: string | null
          created_at?: string
          updated_at?: string | null
        }
      }
      user_favorites: {
        Row: {
          user_id: string
          product_id: string
          created_at: string | null
        }
        Insert: {
          user_id: string
          product_id: string
          created_at?: string | null
        }
        Update: {
          user_id?: string
          product_id?: string
          created_at?: string | null
        }
      }
    }
    Views: {
      [_ in never]: never
    }
    Functions: {
      [_ in never]: never
    }
    Enums: {
      [_ in never]: never
    }
    CompositeTypes: {
      [_ in never]: never
    }
  }
}
</file>

<file path="client/src/lib/utils.ts">
import { clsx, type ClassValue } from "clsx"
import { twMerge } from "tailwind-merge"

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}
</file>

<file path="client/src/proxy.ts">
import { createServerClient } from '@supabase/ssr';
import { NextResponse, type NextRequest } from 'next/server';

export async function proxy(request: NextRequest) {
    let response = NextResponse.next({
        request: {
            headers: request.headers,
        },
    });

    const supabase = createServerClient(
        process.env.NEXT_PUBLIC_SUPABASE_URL!,
        process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY!,
        {
            cookies: {
                getAll() {
                    return request.cookies.getAll();
                },
                setAll(cookiesToSet) {
                    cookiesToSet.forEach(({ name, value, options }) => {
                        request.cookies.set(name, value);
                        response.cookies.set(name, value, options);
                    });
                },
            },
        }
    );

    const {
        data: { user },
    } = await supabase.auth.getUser();

    const protectedPaths = ['/profile', '/orders', '/carwash/booking'];
    const isProtected = protectedPaths.some((path) =>
        request.nextUrl.pathname.startsWith(path)
    );

    if (isProtected && !user) {
        const redirectUrl = request.nextUrl.clone();
        redirectUrl.pathname = '/login';
        redirectUrl.searchParams.set('redirectTo', request.nextUrl.pathname);
        return NextResponse.redirect(redirectUrl);
    }

    return response;
}

export const config = {
    matcher: [
        /*
         * Match all request paths except for the ones starting with:
         * - _next/static (static files)
         * - _next/image (image optimization files)
         * - favicon.ico (favicon file)
         * Feel free to modify this pattern to include more paths.
         */
        '/((?!_next/static|_next/image|favicon.ico|.*\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)',
    ],
};
</file>

<file path="client/supabase_migrations/create_tables.sql">
-- Supabase SQL migration for PA-Catering
-- Run this in Supabase SQL editor or psql connected to your Supabase Postgres

-- Enable extensions if not present
CREATE EXTENSION IF NOT EXISTS "pgcrypto";

-- users table (supabase auth handles auth, but we keep a profile table)
CREATE TABLE IF NOT EXISTS profiles (
  id uuid PRIMARY KEY DEFAULT auth.uid(),
  email text,
  display_name text,
  phone text,
  metadata jsonb,
  created_at timestamp with time zone DEFAULT now()
);

-- products table
CREATE TABLE IF NOT EXISTS products (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  name text NOT NULL,
  slug text UNIQUE,
  description text,
  price numeric(10,2) DEFAULT 0,
  category text,
  image_url text,
  stock integer DEFAULT 0,
  likes integer DEFAULT 0,
  created_at timestamp with time zone DEFAULT now()
);

-- comments table
CREATE TABLE IF NOT EXISTS comments (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  product_id uuid REFERENCES products(id) ON DELETE CASCADE,
  user_id uuid,
  user_name text,
  body text NOT NULL,
  created_at timestamp with time zone DEFAULT now()
);

-- orders table
CREATE TABLE IF NOT EXISTS orders (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id uuid,
  items jsonb NOT NULL,
  total_price numeric(10,2) NOT NULL,
  total_quantity integer NOT NULL,
  status text DEFAULT 'pending',
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now()
);

-- user_favorites table (tracks favorites per user)
CREATE TABLE IF NOT EXISTS user_favorites (
  user_id uuid,
  product_id uuid,
  created_at timestamp with time zone DEFAULT now(),
  PRIMARY KEY (user_id, product_id),
  FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
);

-- Indexes for common queries
CREATE INDEX IF NOT EXISTS idx_products_category ON products(category);
CREATE INDEX IF NOT EXISTS idx_comments_product ON comments(product_id);
CREATE INDEX IF NOT EXISTS idx_orders_user ON orders(user_id);

-- Optional seed: a couple of sample products
INSERT INTO products (name, slug, description, price, category, image_url, stock)
VALUES
  ('Classic Beef Burger', 'classic-beef-burger', 'A juicy classic beef burger with cheese and lettuce.', 8.50, 'Burgers', '/Menus/burger1.jpg', 25)
ON CONFLICT (slug) DO NOTHING;

INSERT INTO products (name, slug, description, price, category, image_url, stock)
VALUES
  ('Vegan Salad Bowl', 'vegan-salad-bowl', 'Fresh greens with avocado, nuts, and lemon dressing.', 7.00, 'Salads', '/Menus/salad1.jpg', 40)
ON CONFLICT (slug) DO NOTHING;
</file>

<file path="client/supabase_migrations/seed_products.sql">
INSERT INTO products (name, category, description, price, image_url, badge, stock) VALUES
('Kota Meals', 'Meals', 'Thrown Kota, Chips, Coca-Cola 440ml', 90, '/Menus/KotaMeal.png', 'Bestseller', 100),
('Burger Meals', 'Meals', 'Burger, Chips, Coca-Cola 440ml', 100, '/Menus/BurgerMeal.png', 'Special', 100),
('Chicken Meals', 'Meals', '1/4 Chicken, Bun, Chips, Coca-Cola 440ml', 80, '/Menus/ChickenMeal.png', NULL, 100),
('Fish Meals', 'Meals', 'Fish, Chips, Coca-Cola 440ml', 80, '/Menus/FishMeal.png', 'New', 100),
('Smash Kota Meals', 'Kota Meals', 'Smash Kota, Chips, Coca-Cola 440ml', 70, '/Menus/KotaMeal.png', NULL, 100),
('Smash Kota Single Meals', 'Kota Meals', 'Smash Kota, Chips', 70, '/Menus/Kota.jpg', NULL, 100),
('Double Smash Kota Meals', 'Kota Meals', 'Double Smash Kota, Chips, Coca-Cola 440ml', 70, '/Menus/KotaMeal.png', NULL, 100),
('Double Smash Kota Single Meals', 'Kota Meals', 'Double Smash Kota, Chips', 70, '/Menus/Kota.jpg', NULL, 100),
('Thrown Kota Meals', 'Kota Meals', 'Thrown Kota, Chips, Coca-Cola 440ml', 70, '/Menus/KotaMeal.png', NULL, 100),
('Thrown Kota Single Meals', 'Kota Meals', 'Thrown Kota, Chips', 70, '/Menus/Kota.jpg', NULL, 100),
('Smash Kota', 'Kota', 'Bread, Chips, Polony, Archaar, Rasaian, Egg, Lettuce', 30, '/Menus/Kota.png', NULL, 100),
('Double Smash Kota', 'Kota', 'Bread, Chips, Polony, Archaar, Rasaian, Egg, Lettuce, Cheese', 35, '/Menus/Kota.png', NULL, 100),
('Thrown Kota', 'Kota', 'Bread, Chips, Polony, Archaar, Rasaian, Egg, Lettuce, Cheese, Patty', 55, '/Menus/Kota.png', NULL, 100),
('Small Chips', 'Chips', '5cm × 5cm × 2.5cm Box', 25, '/Menus/Chips.png', NULL, 100),
('Medium Chips', 'Chips', '5cm × 7cm × 2.5cm Box', 35, '/Menus/Chips.png', NULL, 100),
('Large Chips', 'Chips', '8cm × 5cm × 3cm Box', 50, '/Menus/Chips.png', NULL, 100),
('Coca-Cola', 'Beverages', 'Coca-cola 1.25L, Coca-cola 400ml', 15, '/Menus/Coca-Cola.png', NULL, 100),
('Mocktails', 'Beverages', 'flavour Mocktails, flavour Mocktails, flavour Mocktails', 40, NULL, NULL, 100),
('Still Water', 'Beverages', 'Still Water 500ml', 7, NULL, NULL, 100),
('Still Water', 'Beverages', 'Still Water 1L', 12, NULL, NULL, 100),
('Cappy', 'Beverages', 'Pineapple flavour', 14, '/Menus/Cappy.png', NULL, 100),
('Chicken and BBQ Pizza', 'Pizza', 'A savory pizza with tender chicken and rich BBQ sauce.', 85, '/Menus/ChickenAndBBQ.png', 'Fan-favorite', 100),
('Chicken and Mayo Pizza', 'Pizza', 'Creamy and delicious, topped with chicken and mayonnaise.', 85, '/Menus/ChickenAndMayo.png', NULL, 100),
('Sweet Chilli Sausage Pizza', 'Pizza', 'A perfect blend of sweet and spicy with sausage toppings.', 90, '/Menus/mexicanChilli.png', NULL, 100),
('Pineapple Pizza', 'Pizza', 'A tropical delight with juicy pineapple chunks.', 80, '/Menus/Pineapply.png', NULL, 100),
('Mexican Chilli Pizza', 'Pizza', 'Spicy and flavorful, with authentic Mexican chilli.', 95, '/Menus/mexicanChilli.png', 'Spicy', 100);
</file>

<file path="client/supabase_migrations/update_profiles_schema.sql">
-- Add missing columns to profiles table
ALTER TABLE profiles
ADD COLUMN IF NOT EXISTS role text DEFAULT 'customer',
ADD COLUMN IF NOT EXISTS uid text,
ADD COLUMN IF NOT EXISTS email_verified boolean DEFAULT false,
ADD COLUMN IF NOT EXISTS photo_url text,
ADD COLUMN IF NOT EXISTS address text,
ADD COLUMN IF NOT EXISTS city text,
ADD COLUMN IF NOT EXISTS state text,
ADD COLUMN IF NOT EXISTS zip_code text,
ADD COLUMN IF NOT EXISTS country text,
ADD COLUMN IF NOT EXISTS theme text DEFAULT 'system',
ADD COLUMN IF NOT EXISTS order_history jsonb DEFAULT '[]'::jsonb,
ADD COLUMN IF NOT EXISTS loyalty_points_balance integer DEFAULT 0,
ADD COLUMN IF NOT EXISTS tier_status text DEFAULT 'Bronze',
ADD COLUMN IF NOT EXISTS rewards_available jsonb DEFAULT '[]'::jsonb,
ADD COLUMN IF NOT EXISTS redemption_history jsonb DEFAULT '[]'::jsonb,
ADD COLUMN IF NOT EXISTS personalized_promotions jsonb DEFAULT '[]'::jsonb,
ADD COLUMN IF NOT EXISTS referral_code text,
ADD COLUMN IF NOT EXISTS car_wash_count integer DEFAULT 0,
ADD COLUMN IF NOT EXISTS preferences jsonb DEFAULT '{}'::jsonb,
ADD COLUMN IF NOT EXISTS saved_payment_methods jsonb DEFAULT '[]'::jsonb,
ADD COLUMN IF NOT EXISTS updated_at timestamp with time zone DEFAULT now(),
ADD COLUMN IF NOT EXISTS last_login timestamp with time zone DEFAULT now();

-- Enable Row Level Security
ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;

-- Policy: Profiles are viewable by everyone (or just authenticated users)
-- User requested: "Profiles are viewable by everyone"
-- Policy: Profiles are viewable by everyone
CREATE POLICY "Profiles are viewable by everyone"
ON profiles FOR SELECT
TO PUBLIC
USING ( true );

-- Policy: Users can insert their own profile
CREATE POLICY "Users can insert their own profile"
ON profiles FOR INSERT
TO authenticated
WITH CHECK ( auth.uid() = id );

-- Policy: Users can update their own profile
CREATE POLICY "Users can update their own profile"
ON profiles FOR UPDATE
TO authenticated
USING ( auth.uid() = id );
</file>

<file path="client/.gitignore">
# See https://help.github.com/articles/ignoring-files/ for more about ignoring files.

# dependencies
/node_modules
/.pnp
.pnp.*
.yarn/*
!.yarn/patches
!.yarn/plugins
!.yarn/releases
!.yarn/versions

# testing
/coverage

# next.js
/.next/
/out/

# production
/build

# misc
.DS_Store
*.pem

# debug
npm-debug.log*
yarn-debug.log*
yarn-error.log*
.pnpm-debug.log*

# env files (can opt-in for committing if needed)
.env*

# vercel
.vercel

# typescript
*.tsbuildinfo
next-env.d.ts
</file>

<file path="client/biome.json">
{
  "$schema": "https://biomejs.dev/schemas/2.2.0/schema.json",
  "vcs": {
    "enabled": true,
    "clientKind": "git",
    "useIgnoreFile": true
  },
  "files": {
    "ignoreUnknown": true,
    "includes": ["**", "!node_modules", "!.next", "!dist", "!build"]
  },
  "formatter": {
    "enabled": true,
    "indentStyle": "space",
    "indentWidth": 2
  },
  "linter": {
    "enabled": true,
    "rules": {
      "recommended": true,
      "suspicious": {
        "noUnknownAtRules": "off"
      }
    },
    "domains": {
      "next": "recommended",
      "react": "recommended"
    }
  },
  "assist": {
    "actions": {
      "source": {
        "organizeImports": "on"
      }
    }
  }
}
</file>

<file path="client/next.config.ts">
import type { NextConfig } from 'next';

const nextConfig: NextConfig = {
  reactCompiler: true,
  images: {
    remotePatterns: [
      {
        protocol: 'https',
        hostname: 'placehold.co',
        port: '',
        pathname: '/**',
      },
      {
        protocol: 'https',
        hostname: 'images.unsplash.com',
        port: '',
        pathname: '/**',
      },
      {
        protocol: 'https',
        hostname: 'picsum.photos',
        port: '',
        pathname: '/**',
      },
    ],
  },
};

module.exports = nextConfig;
</file>

<file path="client/package.json">
{
  "name": "client",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "analyze": "cross-env ANALYZE=true next build",
    "start": "next start",
    "lint": "biome check",
    "format": "biome format --write"
  },
  "dependencies": {
    "@radix-ui/react-slot": "^1.2.4",
    "@supabase/auth-helpers-nextjs": "^0.10.0",
    "@supabase/ssr": "^0.7.0",
    "@supabase/supabase-js": "^2.81.1",
    "@vercel/analytics": "^1.5.0",
    "class-variance-authority": "^0.7.1",
    "classnames": "^2.5.1",
    "clsx": "^2.1.1",
    "next": "16.0.1",
    "react": "19.2.0",
    "react-dom": "19.2.0",
    "react-hook-form": "^7.66.0",
    "react-icons": "^5.5.0",
    "tailwind-merge": "^3.4.0"
  },
  "devDependencies": {
    "@biomejs/biome": "2.2.0",
    "@tailwindcss/postcss": "^4",
    "@types/node": "^20",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "babel-plugin-react-compiler": "1.0.0",
    "cross-env": "^7.0.3",
    "tailwindcss": "^4",
    "tw-animate-css": "^1.4.0",
    "typescript": "^5"
  }
}
</file>

<file path="client/postcss.config.mjs">
const config = {
  plugins: {
    "@tailwindcss/postcss": {},
  },
};

export default config;
</file>

<file path="client/README.md">
This is a [Next.js](https://nextjs.org) project bootstrapped with [`create-next-app`](https://nextjs.org/docs/app/api-reference/cli/create-next-app).

## Getting Started

First, run the development server:

```bash
npm run dev
# or
yarn dev
# or
pnpm dev
# or
bun dev
```

Open [http://localhost:3000](http://localhost:3000) with your browser to see the result.

You can start editing the page by modifying `app/page.tsx`. The page auto-updates as you edit the file.

This project uses [`next/font`](https://nextjs.org/docs/app/building-your-application/optimizing/fonts) to automatically optimize and load [Geist](https://vercel.com/font), a new font family for Vercel.

## Learn More

To learn more about Next.js, take a look at the following resources:

- [Next.js Documentation](https://nextjs.org/docs) - learn about Next.js features and API.
- [Learn Next.js](https://nextjs.org/learn) - an interactive Next.js tutorial.

You can check out [the Next.js GitHub repository](https://github.com/vercel/next.js) - your feedback and contributions are welcome!

## Deploy on Vercel

The easiest way to deploy your Next.js app is to use the [Vercel Platform](https://vercel.com/new?utm_medium=default-template&filter=next.js&utm_source=create-next-app&utm_campaign=create-next-app-readme) from the creators of Next.js.

Check out our [Next.js deployment documentation](https://nextjs.org/docs/app/building-your-application/deploying) for more details.
</file>

<file path="client/tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2018",
    "lib": [
      "dom",
      "dom.iterable",
      "esnext"
    ],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": [
        "./src/*"
      ]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    "**/*.mts",
    ".next/types/**/*.ts",
    ".next/dev/types/**/*.ts"
  ],
  "exclude": [
    "node_modules",
    ".next"
  ]
}
</file>

</files>
